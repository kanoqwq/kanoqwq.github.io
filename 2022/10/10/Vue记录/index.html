<!DOCTYPE html>
<html lang="zh-cn">
    <head>
  <!-- 元数据 -->
  <meta charset="utf-8">
  
  
  <title>Vue笔记 | minikanoの测试站</title>
  <meta name="author" content="MiniKano" />
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="robots" content="index,follow" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <meta name="format-detection" content="telphone=no, email=no" />
  
    <meta name="keywords" content="" />
  
  <meta name="description" content="Vue笔记简介 Vue是一个动态构建用户界面的渐进式 Javascript 框架  特点 遵循mvvm模式 编码简洁，体积小，运行效率高，适合移动&#x2F;pc 端开发 它本身只关注UI，也可以引入其他第三方库开发项目  浅尝一下引入Vue.js 1&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cn.vuejs.org&#x2F;js&#x2F;vue.js&quot;&gt;&lt;&#x2F;script&amp;g">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue笔记">
<meta property="og:url" content="https://blog.kanokano.cn/2022/10/10/Vue%E8%AE%B0%E5%BD%95/index.html">
<meta property="og:site_name" content="minikanoの测试站">
<meta property="og:description" content="Vue笔记简介 Vue是一个动态构建用户界面的渐进式 Javascript 框架  特点 遵循mvvm模式 编码简洁，体积小，运行效率高，适合移动&#x2F;pc 端开发 它本身只关注UI，也可以引入其他第三方库开发项目  浅尝一下引入Vue.js 1&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cn.vuejs.org&#x2F;js&#x2F;vue.js&quot;&gt;&lt;&#x2F;script&amp;g">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/image-20220802003004189-16593714091981.png">
<meta property="og:image" content="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/image-20220803221650284.png">
<meta property="og:image" content="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/image-20220807225408598.png">
<meta property="og:image" content="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/image-20220807225444623.png">
<meta property="og:image" content="https://blog.kanokano.cn/Users/miniMiniKano/Library/CloudStorage/OneDrive-%E4%B8%AA%E4%BA%BA/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/vue%E5%AD%A6%E4%B9%A0/%E7%AC%94%E8%AE%B0.assets/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png">
<meta property="og:image" content="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/image-20220823004855399.png">
<meta property="og:image" content="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/image-20220903003656759.png">
<meta property="og:image" content="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/vuex.png">
<meta property="og:image" content="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/lifecycle.16e4c08e.png">
<meta property="og:image" content="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/f84e4e2c02424d9a99862ade0a2e4114tplv-k3u1fbpfcp-watermark.gif">
<meta property="og:image" content="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/e5ac7e20d1784887a826f6360768a368tplv-k3u1fbpfcp-watermark-16634993151275.gif">
<meta property="og:image" content="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/bc0be8211fc54b6c941c036791ba4efetplv-k3u1fbpfcp-watermark.gif">
<meta property="og:image" content="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/6cc55165c0e34069a75fe36f8712eb80tplv-k3u1fbpfcp-watermark.gif">
<meta property="article:published_time" content="2022-10-10T13:38:06.724Z">
<meta property="article:modified_time" content="2022-10-10T13:49:27.950Z">
<meta property="article:author" content="MiniKano">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/image-20220802003004189-16593714091981.png">
  
  <!-- 站点验证相关 -->
  
    
    
    
  
  <!-- 样式表文件 -->
  <link rel="stylesheet" id="kratos-css" href="/css/kratosr.min.css" media="all"></script>
  
    <link rel="stylesheet" id="darkmode-css" href="/css/kr-color-dark.min.css" media="(prefers-color-scheme: dark)"></script>
    <script src="/js/kr-dark.min.js"></script>
  
  
    <link rel="stylesheet" id="highlight-css" href="/css/highlight/night-eighties.min.css" media="all"></script>
  
  
  <link rel="stylesheet" id="fontawe-css" href="/vendors/font-awesome@4.7.0/css/font-awesome.min.css" media="all"></script>
  <link rel="stylesheet" id="nprogress-css" href="/vendors/nprogress@0.2.0/nprogress.css" media="all"></script>
  
  
    <link rel="stylesheet" href="/vendors/aplayer@1.10.1/dist/APlayer.min.css"></script>
  
  
    <link rel="stylesheet" href="/vendors/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"></script>
  
  <!-- 不得不预先加载的一些JS文件 -->
  <script src="/vendors/jquery@3.6.0/dist/jquery.min.js"></script>
  
    <script src="/vendors/qrcode_js@1.0.0/qrcode.min.js"></script>
  
  
  <style>
    
      .kratos-cover.kratos-cover-2 {
        background-image: url('/images/banner.webp');
      }
    
    
      @media(min-width:768px) {
        body.custom-background {
          background-image: url('/images/bg.webp');
        }
      }
    
  </style>
  
<meta name="generator" content="Hexo 6.3.0"></head>


    <body class="custom-background">
        <div id="kratos-wrapper">
    <div id="kratos-page">
        <div id="kratos-header">
            <header id="kratos-desktop-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="nav-header">
                        <nav id="kratos-menu-wrap">
                            <ul id="kratos-primary-menu" class="sf-menu">
                                
                                    
                                    
                                
                            </ul>
                        </nav>
                    </div>
                </div>
            </header>
            <header id="kratos-mobile-topnav" class="kratos-topnav">
                <div class="container">
                    <div class="color-logo"><a href="/">minikanoの测试站</a></div>
                    <div class="nav-toggle">
                        <a class="kratos-nav-toggle js-kratos-nav-toggle">
                            <i></i>
                        </a>
                    </div>
                </div>
            </header>
        </div>
        <div class="kratos-start kratos-hero-2">
            <!-- <div class="kratos-overlay"></div> -->
            <div class="kratos-cover kratos-cover-2 text-center">
                <div class="desc desc2 animate-box">
                    <a href="/">
                        <h2>minikanoの测试站</h2> <br />
                        <span></span>
                    </a>
                </div>
            </div>
        </div>

        <div id="kratos-blog-post">
            <div class="container">
                <div id="main" class="row">
                    

        

            <section class="col-md-8">

        

            <article itemscope itemtype="https://schema.org/Article">
    
    <link itemprop="mainEntityOfPage" href="https://blog.kanokano.cn/2022/10/10/Vue%E8%AE%B0%E5%BD%95/">
    <div class="kratos-hentry kratos-post-inner clearfix">
        <header class="kratos-entry-header">
            
                <h1 class="kratos-entry-title text-center" itemprop="name headline">Vue笔记</h1>
            
            
            <ul class="kratos-post-meta text-center">
                <li><time datetime="2022-10-10T13:38:06.724Z" itemprop="datePublished"><i class="fa fa-calendar"></i> 2022-10-10</time></li>
                <li itemprop="author" itemscope itemtype="https://schema.org/Person">
                    <i class="fa fa-user"></i> 作者 <span itemprop="name">MiniKano</span>
                </li>
                <li>
                    <i class="fa fa-edit"></i> 
                    
                    
                        ~98.23K
                    
                    字
                </li>
                
            </ul>
        </header>
        <div class="kratos-post-content">
            
            <div id="expire-alert" class="alert alert-warning hidden" role="alert">
                <div class="icon"><i class="fa fa-warning"></i></div>
                <div class="text"><p>本文最后编辑于 <time datetime="1665409767950"></time> 前，其中的内容可能需要更新。</p></div>
            </div>
            
            
            
            <hr />
            <div itemprop="articleBody"><h1 id="Vue笔记"><a href="#Vue笔记" class="headerlink" title="Vue笔记"></a><strong>Vue</strong>笔记</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><blockquote>
<p>Vue是一个动态构建用户界面的渐进式 Javascript 框架</p>
</blockquote>
<h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><ol>
<li>遵循mvvm模式</li>
<li>编码简洁，体积小，运行效率高，适合移动&#x2F;pc 端开发</li>
<li>它本身只关注UI，也可以引入其他第三方库开发项目</li>
</ol>
<h2 id="浅尝一下"><a href="#浅尝一下" class="headerlink" title="浅尝一下"></a>浅尝一下</h2><p><strong>引入Vue.js</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cn.vuejs.org/js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>HTML容器：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 准备一个容器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 插值 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello &#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>事&#123;&#123;name2&#125;&#125;捏<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>Vue脚本：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建Vue实例</span></span><br><span class="line"><span class="keyword">const</span> x = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="comment">//配置对象</span></span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>, <span class="comment">//el 用于指定当前Vue实例为哪个容器服务，css选择器格式</span></span><br><span class="line">    <span class="attr">data</span>: &#123; <span class="comment">//data 中用于指定存储的数据，数据供el所指定的容器去使用</span></span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;MiniKanoMiniKano&#x27;</span>,</span><br><span class="line">        <span class="attr">name2</span>: <span class="string">&#x27;嘉然&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="Vue的工作条件"><a href="#Vue的工作条件" class="headerlink" title="Vue的工作条件"></a>Vue的工作条件</h2><ul>
<li>想让Vue工作，就必须创建一个Vue实例，且要传入一个配置对象</li>
<li>root容器里的代码依然符合html的规范标准，只是混入了vue的一些语法</li>
<li>root容器里的代码被称为Vue模板</li>
<li>一个容器对应一个Vue实例，反之亦然，Vue实例配合组件一起使用</li>
<li><code>&#123;&#123;&#125;&#125;</code>中需要写的是js表达式，且变量可以自动读取到data中所有的属性</li>
<li>一旦data中的数据发生改变，模板(页面)中的目标也会自动更新</li>
</ul>
<h2 id="模板语法"><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h2><h4 id="插值语法"><a href="#插值语法" class="headerlink" title="插值语法"></a>插值语法</h4><p>插值语法直接在html标签体内使用Vue插值模板，填入data中的属性即可</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 插值 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Hello &#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建Vue实例</span></span><br><span class="line"><span class="keyword">const</span> x = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="comment">//配置对象</span></span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>, </span><br><span class="line">    <span class="attr">data</span>: &#123; </span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;MiniKanoMiniKano&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="指令语法"><a href="#指令语法" class="headerlink" title="指令语法"></a>指令语法</h4><blockquote>
<p>指令语法以 v- 开头，用于解析标签（包括标签属性，标签体内容，绑定事件等）</p>
</blockquote>
<h5 id="举例-v-bind"><a href="#举例-v-bind" class="headerlink" title="举例 (v-bind)"></a>举例 (v-bind)</h5><p>使用v-bind:来模板化href属性</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>MiniKanoMiniKano的博客<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> x = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="comment">//配置对象</span></span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>, </span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;https://MiniKanoMiniKano.cn&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>有时，v-bind: 也可以简写为 :</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">a</span> <span class="attr">:href</span>=<span class="string">&quot;url&quot;</span>&gt;</span>MiniKanoMiniKano的博客<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>总结：<strong>标签体内用插值语法，标签属性用指令语法</strong></p>
<h5 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h5><p>由于v-bind是单向的数据绑定，只能通过对象传递到DOM</p>
<p>有了单向数据绑定这个概念，那就一定会有双向数据绑定</p>
<p>双向数据绑定使用：<code>v-model:</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>单向数据绑定：<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">:value</span>=<span class="string">&quot;name2&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>双向数据绑定：<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model:value</span>=<span class="string">&quot;name2&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意，以下代码是错误的</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-model:data</span>=<span class="string">&quot;name&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>这是因为 v-model 只支持表单类等输入型元素内</strong></p>
<p><em>v-model:value 可以简写为 v-model 因为 v-model 默认收集的就是value的值</em></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span>&gt;</span>双向数据绑定：<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;name2&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="el与data的两种写法"><a href="#el与data的两种写法" class="headerlink" title="el与data的两种写法"></a>el与data的两种写法</h3><p><strong>el的两种写法：</strong></p>
<p>对象属性</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> v = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&quot;你好呀&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>使用实例对象的原型对象上的$mount方法挂载元素</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> v = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&quot;你好呀&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">v.$mount(<span class="string">&#x27;#root&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p><strong>data的两种写法</strong></p>
<p>对象式:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&quot;你好呀&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>函数式:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//此处的this式Vue的实例对象</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;你好呀&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>注意，函数写法不可以是箭头函数，因为会扰乱this的指向（原本this指向一个Vue对象</strong>）</p>
</blockquote>
<p><em>&#x2F;&#x2F;函数式可适用于vue组件</em></p>
<h2 id="MVVM模型"><a href="#MVVM模型" class="headerlink" title="MVVM模型"></a>MVVM模型</h2><ul>
<li>M:模型（Model）: <strong>对应 data中的数据</strong></li>
<li>V:视图（View）: <strong>模板</strong></li>
<li>VM：视图模型（ViewModel）:  <strong>vue实例对象</strong></li>
</ul>
<p><img src="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/image-20220802003004189-16593714091981.png" alt="image-20220802003004189"></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- View --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span>&#123;&#123;MiniKano&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123; <span class="comment">//ViewModel</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: &#123; <span class="comment">//Model</span></span></span><br><span class="line"><span class="language-javascript">                <span class="title class_">MiniKano</span>: <span class="string">&quot;MiniKano&quot;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="数据代理"><a href="#数据代理" class="headerlink" title="数据代理"></a>数据代理</h2><h3 id="Object-defineproperty-方法"><a href="#Object-defineproperty-方法" class="headerlink" title="Object.defineproperty 方法"></a>Object.defineproperty 方法</h3><blockquote>
<p>此方法可以设置一个对象的属性,该方法有三个参数，区别于直接赋值，该方法的作用更多，更高级</p>
</blockquote>
<p><strong>简单用法：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> singer = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;MiniKano&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(singer, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">value</span>: <span class="number">8</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(singer);</span><br></pre></td></tr></table></figure>

<p>这样就能给一个对象添加属性了，但是你会发现，这个属性居然不能修改，也不能删除，更不能被遍历出来！</p>
<p>其实是因为 Object.defineProperty 方法默认创建出来的属性，他的 writable, enumerable, configurable的值都为false.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">Object</span>.<span class="title function_">getOwnPropertyDescriptors</span>(singer)); </span><br><span class="line"><span class="comment">//该方法返回指定对象所有 自身属性 的描述对象</span></span><br></pre></td></tr></table></figure>

<p>想要解决无法修改，配置，遍历属性的问题，其实很简单，只需要在第三个参数中指定属性的特征即可：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(singer, <span class="string">&#x27;age&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">value</span>: <span class="number">8</span>,</span><br><span class="line">    <span class="attr">enumerable</span>: <span class="literal">true</span>, <span class="comment">//控制属性是否可被枚举</span></span><br><span class="line">    <span class="attr">writable</span>: <span class="literal">true</span>, <span class="comment">//控制属性是否可被修改</span></span><br><span class="line">    <span class="attr">configurable</span>: <span class="literal">true</span> <span class="comment">//控制属性是否可被删除</span></span><br><span class="line">&#125;);</span><br><span class="line">singer.<span class="property">age</span>=<span class="number">11</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(singer);</span><br></pre></td></tr></table></figure>

<p>以上代码配置了可修改，可配置，可被枚举的属性特征，所以是可以遍历且值可以被修改删除</p>
<h4 id="getter与setter"><a href="#getter与setter" class="headerlink" title="getter与setter"></a>getter与setter</h4><p>如标题所言，JavaScript已经开始逐渐像java&#x2F;c#类这样的面向对象语言靠拢了（喜）</p>
<p><strong>直接看使用方法：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数据代理</span></span><br><span class="line"><span class="keyword">let</span> msg = <span class="string">&#x27;hello~&#x27;</span>;</span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(singer, <span class="string">&#x27;msg&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">get</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;调用了getter&#x27;</span>);</span><br><span class="line">        <span class="keyword">return</span> msg</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">set</span>: <span class="function"><span class="params">value</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;调用了setter&#x27;</span>);</span><br><span class="line">        msg = value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(singer);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>当读取msg属性的时候，get访问器就会自动调用函数获取相应的值，返回的值就是msg属性的值<br>修改(set访问器)也是一样，有java&#x2F;C#类语言的基础会更好理解</p>
</blockquote>
<p>这样，通过get访问器就可以实现代理msg变量了，实现了数据的双向&#x2F;单向同步</p>
<p><strong>总结：Object.defineProperty 是一个比较高级的给对象添加属性的方法，不仅增加了对象属性的安全性，也可以让我们更灵活使用对象中的属性,更重要的是 这个方法可以设置访问代理，Vue的数据双向绑定就是依照这个方法构建的</strong></p>
<h3 id="数据代理实例"><a href="#数据代理实例" class="headerlink" title="数据代理实例"></a>数据代理实例</h3><p>我们可以通过一个简单的例子来实现数据代理：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="attr">a</span>: <span class="number">10</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> objj = &#123;</span><br><span class="line">    <span class="attr">b</span>: <span class="number">20</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(objj, <span class="string">&#x27;a&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">get</span>: <span class="function">() =&gt;</span> obj.<span class="property">a</span>,</span><br><span class="line">    <span class="attr">set</span>: <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">        obj.<span class="property">a</span> = value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(objj.<span class="property">a</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">a</span>);</span><br><span class="line">obj.<span class="property">a</span> = <span class="number">111</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(objj.<span class="property">a</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">a</span>);</span><br></pre></td></tr></table></figure>

<h3 id="Vue中的数据代理"><a href="#Vue中的数据代理" class="headerlink" title="Vue中的数据代理"></a>Vue中的数据代理</h3><ol>
<li>Vue中的数据代理：<ul>
<li>V通过vm对象来代理data对象中属性的操作读和写</li>
</ul>
</li>
<li>Vue中数据代理的好处：<ul>
<li>更加方便操作data中的数据</li>
</ul>
</li>
<li>基本原理：<ul>
<li>通过Object。defineProperty() 把data对象中所有的属性添加到vm上，为每一个添加到vm上的属性，都指定一个getter&#x2F;setter 在里面进行读写data中对应的属性</li>
</ul>
</li>
</ol>
<h4 id="原理图"><a href="#原理图" class="headerlink" title="原理图"></a>原理图</h4><p><img src="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/image-20220803221650284.png" alt="image-20220803221650284"></p>
<h4 id="示例代码"><a href="#示例代码" class="headerlink" title="示例代码"></a>示例代码</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> data = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;MiniKano&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">10</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    data</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data === vm.<span class="property">_data</span>); <span class="comment">//true</span></span><br><span class="line">vm.<span class="property">name</span> = <span class="string">&quot;MiniKanoMiniKano&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(data.<span class="property">name</span>, vm.<span class="property">_data</span>.<span class="property">name</span>); <span class="comment">//一致</span></span><br></pre></td></tr></table></figure>

<h2 id="事件处理"><a href="#事件处理" class="headerlink" title="事件处理"></a>事件处理</h2><h3 id="事件的基本使用"><a href="#事件的基本使用" class="headerlink" title="事件的基本使用"></a>事件的基本使用</h3><ol>
<li>使用v-on:xxx 或 @xxx 绑定事件，其中xxx是事件名</li>
<li>事件的回调需要配置在methods对象中，最终会在vm上</li>
<li>methods中配置的函数不能使用箭头函数，会造成this指向错误</li>
<li>methods中配置的函数，都是被Vue所管理的函数，this的指向是 <strong>vm 或 组件的实例对象</strong></li>
<li>@click 中的字符串可以使用函数写法进行传参,<code>@click=&quot;fun&quot;</code>和<code>@click=”fun($event)“</code>是一样的</li>
<li>函数传参的时候如有多个参数，会造成event无法使用，可以在实参列表中，添加$event 进行占位，就可以使用了</li>
</ol>
<h4 id="代码演示"><a href="#代码演示" class="headerlink" title="代码演示"></a>代码演示</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;hello&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;showInfo&quot;</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 简写 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 函数没有参数时候可以省略括号 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 想用event可以使用$event关键词占位 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;showInfo1(123,$event)&quot;</span>&gt;</span>点我点我<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">hello</span>: <span class="string">&#x27;你好！&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123; <span class="comment">//methods内的方法不做数据代理</span></span><br><span class="line">        <span class="title function_">showInfo</span>(<span class="params">e</span>) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&#x27;okk&#x27;</span>)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">//这里的this是vm</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">target</span>.<span class="property">innerText</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">showInfo1</span>(<span class="params">num, e</span>) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(num)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">//这里的this是vm</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">target</span>.<span class="property">innerText</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a>事件修饰符</h3><p>Vue中的事件修饰符：</p>
<ol>
<li>prevent：阻止默认事件（常用）</li>
<li>stop：阻止事件冒泡（常用）</li>
<li>once：事件只触发一次（常用）</li>
<li>capture：使用事件捕获模式</li>
<li>self：只有event.target 是当前操作的元素才会触发事件</li>
<li>passive：事件的默认行为是立即执行，无需等待事件回调即可执行完毕</li>
</ol>
<blockquote>
<p><strong>注意，事件修饰符是可以连用的 比如 @click.stop.prevent 先阻止冒泡。再阻止默认行为</strong></p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;hello&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- .prevent就可以阻止默认行为 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- .prevent就是事件修饰符 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;//baidu.com&quot;</span> @<span class="attr">click.prevent</span>=<span class="string">&quot;showInfo&quot;</span>&gt;</span>点我<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 阻止事件冒泡（常用） --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">&quot;showInfo&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color:skyblue&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.stop</span>=<span class="string">&quot;showInfo&quot;</span>&gt;</span>点点点<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 一次性事件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.once</span>=<span class="string">&quot;showInfo&quot;</span>&gt;</span>我是一次性的<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 事件捕获模式 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 点击紫色盒子，先输出1再输出2 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click.capture</span>=<span class="string">&quot;show(1)&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color:skyblue;padding: 10px;&quot;</span>&gt;</span>1</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click.capture</span>=<span class="string">&quot;show(2)&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color:blueviolet;&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 只有event.target 是当前操作的元素才会触发事件，点击紫色盒子的时候会触发事件，此时e.target是点击的那个button，然后会触发事件冒泡 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 事件冒泡到上层绑定事件的元素时，由于加了.self修饰，发现了触发事件的event不是自己，就不会触发事件操作 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click.self</span>=<span class="string">&quot;show(1)&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color:skyblue;padding: 10px;&quot;</span>&gt;</span>1</span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;show(2)&quot;</span> <span class="attr">style</span>=<span class="string">&quot;background-color:blueviolet;&quot;</span>&gt;</span>2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 事件的默认行为是立即执行，无需等待事件回调即可执行完毕 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- wheel是鼠标滚轮事件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> @<span class="attr">wheel.passive</span>=<span class="string">&quot;scrollbig&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>1111<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>2222<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>3333<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span>&gt;</span>4444<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">hello</span>: <span class="string">&#x27;你好！&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123; <span class="comment">//methods内的方法不做数据代理</span></span><br><span class="line">        <span class="title function_">showInfo</span>(<span class="params">e</span>) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&#x27;okk&#x27;</span>)</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>); <span class="comment">//这里的this是vm</span></span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">target</span>.<span class="property">innerText</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">show</span>(<span class="params">s</span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(s);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">scrollbig</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">999</span>; i++) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;dddd&#x27;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="键盘事件"><a href="#键盘事件" class="headerlink" title="键盘事件"></a>键盘事件</h3><ol>
<li><p>常用按键别名：</p>
<ul>
<li><p>回车 enter删除 delete （删除和退格都行</p>
</li>
<li><p>退出 esc空格 space换行 tab （特殊，必须配合keydown）</p>
</li>
<li><p>上  up</p>
</li>
<li><p>下 down</p>
</li>
<li><p>左 left</p>
</li>
<li><p>右 right</p>
</li>
</ul>
</li>
<li><p>Vue未提供别名的按键，可以使用按键原始值的key值绑定，但要注意要转为 keybab-case 短横线小写命名</p>
</li>
<li><p>系统修饰键（特殊） ctrl alt shift 等</p>
<ol>
<li>配合keyup使用：按下修饰键的同时，再按下其他键，随后释放，事件才能触发</li>
<li>配合keydown使用，正常触发事件</li>
</ol>
</li>
<li><p>可以使用keyCode指定具体的按键（不建议）</p>
</li>
<li><p>Vue.config.keyCodes.自定义按键名&#x3D;键码，可以自定义按键别名</p>
</li>
<li><p>可以利用修饰符连写的特性，进行组合键的侦听</p>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;按下回车键提示输入&quot;</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;into&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 修饰符连写 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;按下ctrl+y提示输入&quot;</span> @<span class="attr">keyup.ctrl.y</span>=<span class="string">&quot;into&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">keyCodes</span> = <span class="number">41</span>;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">name</span>: <span class="string">&#x27;键盘事件演示&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">into</span>(<span class="params">e</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(e.<span class="property">target</span>.<span class="property">value</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h2><ol>
<li><strong>定义：要用的属性不存在，要通过已有的属性计算得来。</strong></li>
<li><strong>原理：底层借助了Object.defineproperty方法提供的getter和setter</strong></li>
<li><strong>get函数什么时候执行？</strong><ol>
<li><strong>初次读取时会执行一次</strong></li>
<li><strong>当依赖的数据发生改变的时候会被再次调用</strong></li>
</ol>
</li>
<li><strong>优势：与methods实现相比，内部有缓存机制，效率更高，调试方便</strong></li>
<li><strong>注意：</strong><ol>
<li><strong>计算属性最终会出现在vm上，直接读取使用即可</strong></li>
<li><strong>如果计算属性要被修改，那必须写set函数去响应修改，且set中要引起计算时依赖的数据发生变化（firstname、lastname）</strong></li>
</ol>
</li>
</ol>
<h3 id="代码演示-1"><a href="#代码演示-1" class="headerlink" title="代码演示"></a>代码演示</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- v-model 双向数据绑定 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span> 姓：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;firstname&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span> 名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;lastname&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 上面的input内容只要发生变化，vue的模板都会重新解析一遍html，从而带动下面的函数的重载 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span> 姓名：<span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;fullname&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">firstname</span>: <span class="string">&#x27;张&#x27;</span>,</span><br><span class="line">        <span class="attr">lastname</span>: <span class="string">&#x27;三&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//计算属性,computed内的就是计算属性，用来处理复杂的属性计算，里面的属性值也是用数据代理</span></span><br><span class="line">    <span class="comment">//计算属性是有缓存的，get调用了一次，如果值没有改变，再次调用属性的时候就不会调用get函数了</span></span><br><span class="line">    <span class="comment">//初次读取fullname时候，get会被调用，所依赖的数据发生变化时，get也会被调用</span></span><br><span class="line">    <span class="comment">//computed 属性中的get不能被手动调用，Vue会在使用到属性的时候自动调用</span></span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="attr">fullname</span>: &#123;</span><br><span class="line">            <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="comment">//此处的this是vm</span></span><br><span class="line">                <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstname</span> + <span class="string">&#x27;-&#x27;</span> + <span class="variable language_">this</span>.<span class="property">lastname</span>;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">//当fullname被修改的时候自动调用set</span></span><br><span class="line">            <span class="title function_">set</span>(<span class="params">value</span>) &#123;</span><br><span class="line">                <span class="keyword">let</span> arr = value.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>);</span><br><span class="line">                <span class="comment">//改的是这两个变量，而不是fullname</span></span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">firstname</span> = arr[<span class="number">0</span>];</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">lastname</span> = arr[<span class="number">1</span>]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>此外，fullname还有一种简写形式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//fullname的简写形式</span></span><br><span class="line"><span class="title function_">fullname</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">firstname</span> + <span class="string">&#x27;-&#x27;</span> + <span class="variable language_">this</span>.<span class="property">lastname</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>可以把属性写成一个函数，函数名就是属性名（es6）函数体默认就有getter的作用</strong></p>
<p><strong>注意！！ 不要把fullname理解为一个函数了，它本身还是一个属性，函数只是负责计算返回结果，在模板内只需要写属性名即可！！！</strong></p>
<h2 id="监视属性watch"><a href="#监视属性watch" class="headerlink" title="监视属性watch"></a>监视属性watch</h2><ol>
<li><strong>当被监视的属性变化时，回调函数自动调用，进行相关操作</strong></li>
<li><strong>监视的属性必须存在，才能进行监视操作</strong></li>
<li><strong>监视的两种写法</strong><ol>
<li><strong>new Vue 时传入 watch配置</strong></li>
<li><strong>通过vm.$watch(‘属性名’，配置)</strong></li>
</ol>
</li>
</ol>
<h3 id="代码演示-2"><a href="#代码演示-2" class="headerlink" title="代码演示"></a>代码演示</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>今天天气很&#123;&#123;Info&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;changeWeather&quot;</span>&gt;</span>切换天气<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 如果函数功能很简单，可以直接在click里面写语句 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;isHot = !isHot;&quot;</span>&gt;</span>切换天气<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 但是这里面不能写alert等函数，因为Vue中的原型对象不包含window对象 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 解决方法：可以在vm实例中添加window属性，指向window对象即可 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- &lt;button v-on:click=&quot;isHot = !isHot;&quot;&gt;切换天气&lt;/button&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">isHot</span>: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title function_">changeWeather</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">isHot</span> = !<span class="variable language_">this</span>.<span class="property">isHot</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="title class_">Info</span>() &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">isHot</span> ? <span class="string">&#x27;炎热&#x27;</span> : <span class="string">&#x27;凉爽&#x27;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//监视属性</span></span><br><span class="line">    <span class="comment">// watch: &#123;</span></span><br><span class="line">    <span class="comment">//     isHot: &#123;</span></span><br><span class="line">    <span class="comment">//         //立即执行，初始化时候，让handler调用一次</span></span><br><span class="line">    <span class="comment">//         immediate: true,</span></span><br><span class="line">    <span class="comment">//         //handler当ishot发生改变时调用</span></span><br><span class="line">    <span class="comment">//         handler() &#123;</span></span><br><span class="line">    <span class="comment">//             console.log(&#x27;isHot被修改了&#x27;);</span></span><br><span class="line">    <span class="comment">//         &#125;</span></span><br><span class="line">    <span class="comment">//     &#125;</span></span><br><span class="line">    <span class="comment">// &#125;,</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//监视属性的另一种写法$watch(&#x27;属性名&#x27;，配置)</span></span><br><span class="line"><span class="comment">//属性名如果找不到的话也不会报错</span></span><br><span class="line">vm.$watch(<span class="string">&#x27;isHot&#x27;</span>, &#123;</span><br><span class="line">    <span class="title function_">handler</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;isHot被修改了&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>这里有一个小问题注意：<strong>当模板里不使用info变量的时候，点击切换天气，vue开发者工具里的变量显示可能不会更新，但vm内属性实际是更新了的</strong></p>
<h3 id="深度监视"><a href="#深度监视" class="headerlink" title="深度监视"></a>深度监视</h3><p>看完了监视属性的简单使用，这时候我会提出一个需求，那就是，如果data属性内有一个对象，我们该怎么监视该对象里面的特定属性呢？</p>
<h4 id="监视多级结构中某属性的变化"><a href="#监视多级结构中某属性的变化" class="headerlink" title="监视多级结构中某属性的变化"></a>监视多级结构中某属性的变化</h4><p>答案是使用 ’对象名.属性名‘：{监视配置}</p>
<p><strong>看代码：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">isHot</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">numbers</span>: &#123;</span><br><span class="line">            <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">b</span>: <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>还原成原始写法，就可以使用 点. 来进行单个数据的监视了，也就是深度监视</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;numbers.a&#x27;</span>: &#123;</span><br><span class="line">    <span class="title function_">handler</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;a被修改了&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><strong>这样就可以监视多级结构中的某个属性的变化了</strong></p>
<h4 id="深度监视的简易写法"><a href="#深度监视的简易写法" class="headerlink" title="深度监视的简易写法"></a>深度监视的简易写法</h4><p>如果监视属性里面的语句很简单，就可以使用简易写法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//正常写法</span></span><br><span class="line"><span class="attr">isHot</span>: &#123;</span><br><span class="line">    <span class="comment">// immediate: true,</span></span><br><span class="line">    <span class="comment">// deep: true,</span></span><br><span class="line">    <span class="title function_">handler</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;isHot被修改了&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//简写</span></span><br><span class="line"><span class="title function_">isHot</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;isHot被修改了&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>外部写法也是如此：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//正常外部写法</span></span><br><span class="line">vm.$watch(<span class="string">&#x27;isHot&#x27;</span>, &#123;</span><br><span class="line">    <span class="attr">immediate</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">deep</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="title function_">handler</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;isHot被修改了&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//简写</span></span><br><span class="line">vm.$watch(<span class="string">&#x27;isHot&#x27;</span>, <span class="keyword">function</span>(<span class="params">newValue, oldValue</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;isHot被修改了&#x27;</span>, newValue, oldValue);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="watch-对比-computed"><a href="#watch-对比-computed" class="headerlink" title="watch 对比 computed"></a>watch 对比 computed</h4><p>computed和watch的区别：</p>
<ol>
<li>computed能完成的功能，watch都可以完成</li>
<li>watch能完成的功能，computed不一定能完成，例如，watch可以执行异步操作</li>
</ol>
<p>重要的两个小原则：</p>
<ol>
<li>所被vue管理的函数，最好写成普通函数，这样this的指向才会是vm</li>
<li>所有不会被vue所管理的函数，（定时器，ajax回调）。最好写成箭头函数，这样this指向才是vm</li>
</ol>
<p>比如下面的姓名案例，用watch实现：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span> 姓：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;firstname&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span> 名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;lastname&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span> 姓名：<span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123;fullName&#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">firstname</span>: <span class="string">&#x27;张&#x27;</span>,</span><br><span class="line">        <span class="attr">lastname</span>: <span class="string">&#x27;三&#x27;</span>,</span><br><span class="line">        <span class="attr">fullName</span>: <span class="string">&#x27;张-三&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">watch</span>: &#123;</span><br><span class="line">        <span class="title function_">firstname</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line">            <span class="comment">//可以写定时器</span></span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="variable language_">this</span>.<span class="property">fullName</span> = newValue + <span class="string">&#x27;-&#x27;</span> + <span class="variable language_">this</span>.<span class="property">lastname</span>;</span><br><span class="line">            &#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">lastname</span>(<span class="params">newValue</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">fullName</span> = <span class="variable language_">this</span>.<span class="property">firstname</span> + <span class="string">&#x27;-&#x27;</span> + newValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>以上代码，会发现我在firstname的处理函数内写了一个定时器，达到了数据更改之后一秒后才执行更改的目的</p>
<h2 id="绑定样式"><a href="#绑定样式" class="headerlink" title="绑定样式"></a>绑定样式</h2><h3 id="绑定class样式"><a href="#绑定class样式" class="headerlink" title="绑定class样式"></a>绑定class样式</h3><p>在vue中，绑定class的方式是使用 v-bind来动态处理class样式的</p>
<p>一共有三种方式：</p>
<ol>
<li>字符串写法，适用于：样式类名不确定 ，需要动态指定</li>
<li>数组写法，适用于：样式类名不确定 ，个数也不确定，名字也不确定，需要动态指定</li>
<li>对象写法，适用于：样式类名确定 ，个数也确定，名字也确定，需要动态决定用不用</li>
</ol>
<p><strong>代码：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 绑定class样式 字符串写法，适用于：样式类名不确定 ，需要动态指定 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basic normal&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;mood&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;changeMood&quot;</span>&gt;</span>&#123;&#123;a&#125;&#125;1<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 绑定class样式 数组写法，适用于：样式类名不确定 ，个数也不确定，名字也不确定，需要动态指定 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basic&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;array&quot;</span>&gt;</span>&#123;&#123;a&#125;&#125;2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;md&quot;</span>&gt;</span>点我删除类<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 绑定class样式 对象写法，适用于：样式类名确定 ，个数也确定，名字也确定，需要动态决定用不用 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basic&quot;</span> <span class="attr">:class</span>=<span class="string">&quot;classObj&quot;</span>&gt;</span>&#123;&#123;a&#125;&#125;2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">a</span>: <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">        <span class="attr">mood</span>: <span class="string">&#x27;normal&#x27;</span>,</span><br><span class="line">        <span class="comment">//存放类的数组</span></span><br><span class="line">        <span class="attr">array</span>: [<span class="string">&#x27;normal&#x27;</span>, <span class="string">&#x27;happy&#x27;</span>, <span class="string">&#x27;sad&#x27;</span>],</span><br><span class="line">        <span class="attr">classObj</span>: &#123;</span><br><span class="line">            <span class="comment">//类的对象写法，false为不启用</span></span><br><span class="line">            <span class="attr">happy</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">sad</span>: <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title function_">changeMood</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> arr = [<span class="string">&#x27;happy&#x27;</span>, <span class="string">&#x27;sad&#x27;</span>, <span class="string">&#x27;normal&#x27;</span>];</span><br><span class="line">            <span class="keyword">const</span> index = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">3</span>);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">mood</span> = arr[index]</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="title function_">md</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">array</span>.<span class="title function_">shift</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="绑定style样式"><a href="#绑定style样式" class="headerlink" title="绑定style样式"></a>绑定style样式</h3><p>绑定style样式的方法和绑定class样式大同小异</p>
<p>使用 <code>:style=&quot;styleObj&quot;</code> 进行绑定</p>
<p>对象名可以使用驼峰命名的css属性 <code>fontSize: &#39;44px&#39;</code></p>
<p>也可以是原始css属性，但需要加上引号 <code>&#39;font-size&#39;: &#39;44px&#39;</code></p>
<p><strong>代码演示</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 绑定style样式 也是对象写法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basic&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;styleObj&quot;</span>&gt;</span>&#123;&#123;a&#125;&#125;2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 绑定style样式 数组对象写法 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;basic&quot;</span> <span class="attr">:style</span>=<span class="string">&quot;[styleObj1,styleObj]&quot;</span>&gt;</span>&#123;&#123;a&#125;&#125;2<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="comment">//样式的对象写法</span></span><br><span class="line">    <span class="attr">styleObj</span>: &#123;</span><br><span class="line">        <span class="comment">//vue中的css属性写法</span></span><br><span class="line">        <span class="comment">// fontSize: &#x27;44px&#x27;</span></span><br><span class="line">        <span class="comment">//也可以写原生css写法</span></span><br><span class="line">        <span class="string">&#x27;font-size&#x27;</span>: <span class="string">&#x27;44px&#x27;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">styleObj1</span>: &#123;</span><br><span class="line">        <span class="comment">//vue中的css属性写法</span></span><br><span class="line">        <span class="comment">// fontSize: &#x27;44px&#x27;</span></span><br><span class="line">        <span class="comment">//也可以写原生css写法</span></span><br><span class="line">        <span class="attr">color</span>: <span class="string">&#x27;red&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h2><h3 id="1-v-if"><a href="#1-v-if" class="headerlink" title="1.v-if"></a>1.v-if</h3><p>写法：</p>
<ol>
<li>v-if&#x3D;”表达式”</li>
<li>v-else-if&#x3D;”表达式”</li>
<li>v-else&#x3D;”表达式”</li>
</ol>
<p>适用于：切换频率较低的场景</p>
<p>特点：不展示DOM元素直接被移除</p>
<p>注意：v-if可以用：v-else-if ，v-else一起使用，但中间不能有元素打断</p>
<h3 id="2-v-show"><a href="#2-v-show" class="headerlink" title="2.v-show"></a>2.v-show</h3><p>写法：v-show&#x3D;”表达式“</p>
<p>适用于：切换频率较高的场景</p>
<p>特点：不展示dom元素，未被移除，仅仅是使用样式隐藏掉</p>
<p>注意：使用v-if时候，元素可能无法被获取到，但是使用v-show是一定可以获取到的</p>
<p>v-if可以配合template模板使用</p>
<p><strong>代码演示</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 条件渲染 相当于css的display --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-show</span>=<span class="string">&quot;true&quot;</span>&gt;</span>&#123;&#123;a&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-show</span>=<span class="string">&quot;1===1&quot;</span>&gt;</span>&#123;&#123;a&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-show</span>=<span class="string">&quot;aa&quot;</span>&gt;</span>&#123;&#123;a&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 使用v-if做条件渲染 影响结构--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-if</span>=<span class="string">&quot;aa&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;n++&quot;</span>&gt;</span>&#123;&#123;n&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-if</span>=<span class="string">&quot;true&quot;</span>&gt;</span>&#123;&#123;a&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-if</span>=<span class="string">&quot;1===1&quot;</span>&gt;</span>&#123;&#123;a&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- v-else-if --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- if和elseif 中间不能有元素打断 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;n===1&quot;</span>&gt;</span>1111<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">&quot;n===2&quot;</span>&gt;</span>2222<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else-if</span>=<span class="string">&quot;n===3&quot;</span>&gt;</span>3333<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- v-else 不用写参数，是上面条件都不符合的情况 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-else</span>&gt;</span>好<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 使用template模板配合if渲染多个元素 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 使用template模板只能配合if，不能配合show --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-if</span>=<span class="string">&quot;n===4&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-show</span>=<span class="string">&quot;true&quot;</span>&gt;</span>template&#123;&#123;a&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-show</span>=<span class="string">&quot;1===1&quot;</span>&gt;</span>template&#123;&#123;a&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-show</span>=<span class="string">&quot;aa&quot;</span>&gt;</span>template&#123;&#123;a&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">a</span>: <span class="string">&#x27;hello&#x27;</span>,</span><br><span class="line">        <span class="attr">n</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">aa</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="v-for-指令"><a href="#v-for-指令" class="headerlink" title="v-for 指令"></a>v-for 指令</h2><p>v-for指令可以用来循环遍历对象、数组、字符串、数字 到相应个数的标签中</p>
<p>作用、语法：</p>
<ol>
<li>用于展示列表数据</li>
<li>语法：<code>v-for=&quot;(item,index) in xxx&quot; :key=&quot;yyy&quot;</code></li>
<li>可遍历： 数组、对象、字符串、数字</li>
</ol>
<p>注意：<strong>只要你使用了遍历语法，你就必须要使用key这个关键字,给每一个li设定唯一的标识</strong></p>
<p>格式：<code>:key=&quot;xxx“</code></p>
<h4 id="代码演示-3"><a href="#代码演示-3" class="headerlink" title="代码演示"></a>代码演示</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>人员列表<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 使用v-for进行遍历输出 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 只要你使用了遍历语法，你就必须要使用key这个关键字,给每一个li设定唯一的标识 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;p in persons&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;p.id&quot;</span>&gt;</span>&#123;&#123;p.name&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- key的另一种写法 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- a就相当于item，b就相当于index --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(a,b) in persons&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;b&quot;</span>&gt;</span>A:&#123;&#123;a&#125;&#125; B:&#123;&#123;b&#125;&#125; <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 也可以使用of 遍历对象（in也可以） 这样a就是value b就是key了 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(a,b) of car&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;b&quot;</span>&gt;</span>key: &#123;&#123;b&#125;&#125; ---- value :&#123;&#123;a&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 甚至还能遍历字符串 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(a,b) in str&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;b&quot;</span>&gt;</span>key: &#123;&#123;b&#125;&#125; ---- value :&#123;&#123;a&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 甚至还能遍历输出数字 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(a,b) in 10&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;b&quot;</span>&gt;</span>key: &#123;&#123;b&#125;&#125; ---- value :&#123;&#123;a&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">persons</span>: [&#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;001&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="string">&#x27;18&#x27;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;002&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="string">&#x27;19&#x27;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;003&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;王五&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="string">&#x27;20&#x27;</span></span><br><span class="line">        &#125;],</span><br><span class="line">        <span class="attr">car</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;马自达&#x27;</span>,</span><br><span class="line">            <span class="attr">price</span>: <span class="string">&#x27;114514&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">str</span>: <span class="string">&#x27;MiniKanoMiniKano123&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="v-for中key的作用与坑"><a href="#v-for中key的作用与坑" class="headerlink" title="v-for中key的作用与坑"></a>v-for中key的作用与坑</h4><blockquote>
<p>key在v-for中扮演者极为重要的角色，<strong>key</strong>是vue作为判断数据的唯一性的重要标识</p>
</blockquote>
<p>所以，key的唯一性成了一个非常重要的前提保证</p>
<p>这里就要提一下Vue在生成数据的时候的步骤了：</p>
<ol>
<li>首先vue会在渲染页面前，在计算机内存中计算并生成一个<strong>虚拟DOM</strong>，然后才会渲染成<strong>真实DOM</strong>文档到页面上</li>
<li>如果需要在相同的地方进行重新渲染，Vue就会依次对比新数据和之前的<strong>虚拟DOM</strong>数据是否一致，如果发现旧数据有一致的地方，则会复用旧的<strong>虚拟DOM</strong>缓存渲染的<strong>真实DOM</strong>，以提高渲染效率，如果不一致，则会按照<strong>新dom</strong>来重新渲染</li>
</ol>
<p>既然是依次对比，所以，这里就会牵扯到顺序问题，vue是按照key进行顺序遍历对比的，所以，key一定要是一个唯一的值！！！</p>
<h5 id="要点归纳"><a href="#要点归纳" class="headerlink" title="要点归纳"></a>要点归纳</h5><ol>
<li>虚拟DOM中key的作用：<ul>
<li>key是虚拟dom对象的标识，当状态中的数据发生变化时，Vue会根据新数据生成“新虚拟dom”<br>随后Vue进行“新虚拟dom” 与 ”旧虚拟dom“ 的差异比较，规则如下：</li>
</ul>
</li>
<li>对比规则：<ul>
<li>旧虚拟DOM中找到了与新的虚拟DOM相同的key<ul>
<li>若虚拟DOM中的内容没有改变，则会直接复用之前的真实dom</li>
<li>若虚拟DOM中的内容改变了，则会生成新的真实DOM，随后替换掉页面中之前的真实DOM</li>
</ul>
</li>
<li>旧虚拟DOM中未找到与新虚拟DOM相同的key<ul>
<li>创建真实的DOM，随后渲染到页面</li>
</ul>
</li>
</ul>
</li>
<li>用index作为key可能会引发的问题：<ul>
<li>若对数据进行：逆序添加，逆序删除等破坏顺序的操作：<ul>
<li>产生没有必要的真实DOM更改 &#x3D;&gt; 界面没有问题，但是渲染效率降低</li>
</ul>
</li>
<li>如果结构中还包括输入类的dom<ul>
<li>会产生错误的DOM更新 &#x3D;&gt; 界面有问题，顺序错乱</li>
</ul>
</li>
</ul>
</li>
<li>开发中如何选择key？<ol>
<li>最好使用每条数据的唯一标识作为key，比如id，手机号，身份证号，学号等唯一值</li>
<li>如果不存在对数据的逆序添加、逆序删除等破坏顺序的操作，仅用于渲染列表用于显示，使用index作为key是没有问题的</li>
</ol>
</li>
</ol>
<h5 id="错误示例"><a href="#错误示例" class="headerlink" title="错误示例"></a>错误示例</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>人员列表<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>点我添加老六<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 使用v-for进行遍历输出 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(i,index) in persons&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123;i.name&#125;&#125;-&#123;&#123;i.id&#125;&#125;</span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">persons</span>: [&#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;001&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="string">&#x27;18&#x27;</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;002&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="string">&#x27;19&#x27;</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">id</span>: <span class="string">&#x27;003&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;王五&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="string">&#x27;20&#x27;</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;,</span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="title function_">add</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> p = &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;004&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;老六&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">21</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">//往数组第一个写入数据</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">persons</span>.<span class="title function_">unshift</span>(p);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>点击之前：</strong>    <img src="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/image-20220807225408598.png" alt="image-20220807225408598"></p>
<p><strong>点击之后</strong> :   <img src="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/image-20220807225444623.png" alt="image-20220807225444623"></p>
<p><strong>你会发现，老六旁边的输入框本应该是空的，结果变成了张三，导致下面的输入框全都错了一位</strong></p>
<p>这是因为：<strong>Vue在对比新老虚拟DOM的时候，发现张三在index 0的位置，无法渲染，但是旁边的输入框在虚拟DOM中都是空的，Vue则会复用之前的实际DOM，然后继续往后依次比对，发现每一个的姓名和index都对不上，所以只能使用新虚拟DOM重新渲染名字了，但是，输入框在新老虚拟DOM中，都是空的，Vue就会误以为可以直接复用，就会把前三个复用掉，最后才会渲染新的input元素到最后</strong></p>
<blockquote>
<p>这里的主要问题就是，<strong>index不是唯一的</strong>，修改DOM树的时候容易造成查找不正确，从而进行错误的操作</p>
</blockquote>
<h5 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h5><p>把 <code>:key=&quot;index&quot;</code> 替换为 <code>:key=&quot;i.id&quot;</code>即可</p>
<p>或者在这个项目例子里，没有必要非要把老六放在第一位，可以<strong>使用push方法</strong>插入数据到数组尾部，这样就不会打乱index的标号顺序了</p>
<h3 id="使用列表过滤实现简单搜索与排序"><a href="#使用列表过滤实现简单搜索与排序" class="headerlink" title="使用列表过滤实现简单搜索与排序"></a>使用列表过滤实现简单搜索与排序</h3><p>基本原理就是，使用计算属性于filter，sort函数</p>
<p>切记，计算属性执行的条件是：<strong>页面刚加载时和依赖数据发生变化时</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>人员列表<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入姓名&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;Keyword&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sortType=2&quot;</span>&gt;</span>年龄升序<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sortType=1&quot;</span>&gt;</span>年龄降序<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;sortType=0&quot;</span>&gt;</span>原顺序<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- key的另一种写法 --&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- a就相当于item，b就相当于index --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(a,b) in findPersons&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;a.id&quot;</span>&gt;</span>&#123;&#123;a.name&#125;&#125;-&#123;&#123;a.age&#125;&#125;-&#123;&#123;a.sex&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="title class_">Keyword</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">sortType</span>: <span class="number">0</span>, <span class="comment">//0原序 1 降序 2升序</span></span><br><span class="line">        <span class="attr">persons</span>: [&#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;000&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="string">&#x27;11&#x27;</span>,</span><br><span class="line">            <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;001&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;张麻子&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="string">&#x27;28&#x27;</span>,</span><br><span class="line">            <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;002&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="string">&#x27;19&#x27;</span>,</span><br><span class="line">            <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;003&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;王五&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="string">&#x27;50&#x27;</span>,</span><br><span class="line">            <span class="attr">sex</span>: <span class="string">&#x27;男&#x27;</span></span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">id</span>: <span class="string">&#x27;004&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;马冬梅&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="string">&#x27;12&#x27;</span>,</span><br><span class="line">            <span class="attr">sex</span>: <span class="string">&#x27;女&#x27;</span></span><br><span class="line">        &#125;],</span><br><span class="line">        <span class="comment">// findPersons: []</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//使用计算属性实现</span></span><br><span class="line">    <span class="attr">computed</span>: &#123;</span><br><span class="line">        <span class="comment">//这玩意开始的时候执行一次</span></span><br><span class="line">        <span class="comment">//所依赖的keyword变化时候又会执行一次</span></span><br><span class="line">        <span class="comment">//里面用到了sortType 所以sortType改变的时候也会触发这个函数</span></span><br><span class="line">        <span class="title function_">findPersons</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> arr = <span class="variable language_">this</span>.<span class="property">persons</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">p</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">//true就是符合，返回一个新数组</span></span><br><span class="line">                <span class="comment">//indexof对于空字符串的返回是0（特别重要）</span></span><br><span class="line">                <span class="keyword">return</span> p.<span class="property">name</span>.<span class="title function_">indexOf</span>(<span class="variable language_">this</span>.<span class="property">Keyword</span>) !== -<span class="number">1</span></span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="comment">//别急着返回，判断一下是否要排序</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">sortType</span>) &#123;</span><br><span class="line">                arr.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">                    <span class="comment">//由于a和b在这里都是对象，不能直接比，我们要获取里面的age</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">sortType</span> == <span class="number">1</span> ? b.<span class="property">age</span> - a.<span class="property">age</span> : a.<span class="property">age</span> - b.<span class="property">age</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> arr;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//#region</span></span><br><span class="line">    <span class="comment">//使用监视属性实现</span></span><br><span class="line">    <span class="comment">// watch: &#123;</span></span><br><span class="line">    <span class="comment">//     Keyword: &#123;</span></span><br><span class="line">    <span class="comment">//         //立即执行一次，否则页面没数据</span></span><br><span class="line">    <span class="comment">//         immediate: true,</span></span><br><span class="line">    <span class="comment">//         handler(val) &#123;</span></span><br><span class="line">    <span class="comment">//             this.findPersons = this.persons.filter((p) =&gt; &#123;</span></span><br><span class="line">    <span class="comment">//                 //true就是符合，返回一个新数组</span></span><br><span class="line">    <span class="comment">//                 //indexof对于空字符串的返回是0（特别重要）</span></span><br><span class="line">    <span class="comment">//                 return p.name.indexOf(val) !== -1</span></span><br><span class="line">    <span class="comment">//             &#125;)</span></span><br><span class="line">    <span class="comment">//         &#125;</span></span><br><span class="line">    <span class="comment">//     &#125;</span></span><br><span class="line">    <span class="comment">// &#125;,</span></span><br><span class="line">    <span class="comment">//#endregion</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="Vue数据侦测"><a href="#Vue数据侦测" class="headerlink" title="Vue数据侦测"></a>Vue数据侦测</h2><h3 id="实现类似vue的简单数据检测"><a href="#实现类似vue的简单数据检测" class="headerlink" title="实现类似vue的简单数据检测"></a>实现类似vue的简单数据检测</h3><h4 id="代码演示-4"><a href="#代码演示-4" class="headerlink" title="代码演示"></a>代码演示</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//需要传入的data对象</span></span><br><span class="line"><span class="keyword">let</span> data = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;MiniKano&#x27;</span>,</span><br><span class="line">    <span class="attr">adress</span>: <span class="string">&#x27;Janpan&#x27;</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//创建一个监视的实例对象，用于监视data中属性的变化</span></span><br><span class="line"><span class="keyword">const</span> obs = <span class="keyword">new</span> <span class="title class_">Observer</span>(data);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obs);</span><br><span class="line"><span class="comment">//创建一个vm</span></span><br><span class="line"><span class="keyword">let</span> vm = &#123;&#125;;</span><br><span class="line">vm.<span class="property">_data</span> = obs;</span><br><span class="line">vm.<span class="property">data</span> = obs;</span><br><span class="line"><span class="comment">//创建一个名叫监视者的构造函数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Observer</span>(<span class="params">obj</span>) &#123;</span><br><span class="line">    <span class="comment">//汇总对象中所有的属性，形成一个数组</span></span><br><span class="line">    <span class="keyword">const</span> keys = <span class="title class_">Object</span>.<span class="title function_">keys</span>(obj);</span><br><span class="line">    <span class="comment">//遍历</span></span><br><span class="line">    keys.<span class="title function_">forEach</span>(<span class="function">(<span class="params">k</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(<span class="variable language_">this</span>, k, &#123;</span><br><span class="line">            <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> obj[k];</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="title function_">set</span>(<span class="params">val</span>) &#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;我被修改了，我要去处理页面响应&quot;</span>);</span><br><span class="line">                obj[k] = val;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>不完善的地方：无法找出数组中的对象并赋予getter setter , 多层对象也一样</strong></p>
<h3 id="使用Vue-set方法新增响应式属性"><a href="#使用Vue-set方法新增响应式属性" class="headerlink" title="使用Vue.set方法新增响应式属性"></a>使用Vue.set方法新增响应式属性</h3><p>首先得注意的是：</p>
<blockquote>
<p><strong>这个set方法只能给vue data里面某个对象增加属性</strong>!!!<br><strong>也就是要操作的对象不能是Vue实例，或者Vue实例的根数据对象（data、_data）</strong></p>
</blockquote>
<h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">set</span>(vue实例, <span class="string">&#x27;属性&#x27;</span>, 值或对象)</span><br></pre></td></tr></table></figure>

<h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;MiniKanoMiniKano&#x27;</span>,</span><br><span class="line">        <span class="attr">adress</span>: <span class="string">&#x27;湖南&#x27;</span>,</span><br><span class="line">        <span class="attr">student</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;tony&#x27;</span>,</span><br><span class="line">            <span class="comment">// sex: &#x27;男&#x27;,</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//vm.$set(vm.student, &#x27;sex&#x27;, &#x27;男&#x27;)</span></span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">set</span>(<span class="variable language_">this</span>.<span class="property">student</span>, <span class="string">&#x27;sex&#x27;</span>, <span class="string">&#x27;男&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="数组更新检测"><a href="#数组更新检测" class="headerlink" title="数组更新检测"></a>数组更新检测</h3><p>Vue将被监听的数组的变更方法进行了包装，所以也可以触发网页元素更新，方法包括：</p>
<ul>
<li>push()</li>
<li>pop()</li>
<li>shift()</li>
<li>unshift()</li>
<li>splice()</li>
<li>sort()</li>
<li>reverse()</li>
</ul>
<p><strong>注意：使用下标索引直接修改数组数据是不会触发视图更新的！！！</strong></p>
<p><strong>错误示范</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vm.<span class="property">hobby</span>[<span class="number">0</span>]=<span class="string">&#x27;ddd&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>上面的操作是不会生效的（</p>
<p><strong>对于非修改性质的方法，比如filter() ，过滤完成后可以直接替换赋值掉原对象</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vm.<span class="property">hobby</span> = vm.<span class="property">hobby</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">x</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x != <span class="string">&#x27;抽烟&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h4 id="代码演示-5"><a href="#代码演示-5" class="headerlink" title="代码演示"></a>代码演示</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;Xukun Cai&#x27;</span>,</span><br><span class="line">            <span class="attr">hobby</span>: [<span class="string">&#x27;唱&#x27;</span>, <span class="string">&#x27;跳&#x27;</span>, <span class="string">&#x27;rap&#x27;</span>, <span class="string">&#x27;篮球&#x27;</span>],</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//添加元素</span></span><br><span class="line">vm.<span class="property">hobby</span>.<span class="title function_">push</span>(<span class="string">&#x27;你干嘛~ 哎哟&#x27;</span>);</span><br><span class="line">vm.<span class="property">hobby</span>.<span class="title function_">shift</span>();</span><br></pre></td></tr></table></figure>

<p>此外，除了可以用上面提到的几个方法操作数组之外，其实也可以使用Vue.set方法进行变更数据:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="title function_">set</span>(vm.<span class="property">hobby</span>,<span class="number">0</span>,<span class="string">&#x27;唱&#x27;</span>);</span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line">vm.$set(vm.<span class="property">hobby</span>,<span class="number">0</span>,<span class="string">&#x27;唱&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>Vue监视数据的原理：</p>
<ol>
<li><p>Vue会监视data中所有层次的数据</p>
</li>
<li><p>如何检测对象中的数据</p>
<ul>
<li>通过setter实现监视，且要造new Vue 时就要传入要监测的数据<ul>
<li>对象中后追击啊的属性，Vue默认不做响应式处理</li>
<li>如需给后添加的属性做响应式，请使用如下API<ul>
<li><code>vue.set(target,propertyName/index,value)</code></li>
<li><code>vm.$set(target,propertyName/index,value)</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>如何监测数组中的数据？</p>
<ul>
<li>通过包装数组对应更新元素的方法来实现，本质就是<ul>
<li>调用原生对应的方法对数组进行更新</li>
<li>重新解析没模板，进而更新页面</li>
</ul>
</li>
</ul>
</li>
<li><p>vue修改数组中某一个元素一定要使用支持的方法</p>
<ol>
<li>API: push , pop , shift , unshift , splice , sort , reverse</li>
<li>Vue.set 或者 vm.$set</li>
</ol>
<p><strong>特别注意的是：Vue.set 和 vm.$set  不能给vm或者vm的根数据对象添加属性！</strong></p>
<p><strong>对于非修改性质的方法，比如filter() ，过滤完成后可以直接替换赋值掉原对象</strong></p>
</li>
</ol>
<h2 id="使用v-model收集表单数据"><a href="#使用v-model收集表单数据" class="headerlink" title="使用v-model收集表单数据"></a>使用v-model收集表单数据</h2><p><strong>要点</strong>：</p>
<p>若：<code>&lt;input type=&quot;text&quot;&gt;</code> 则v-model收集的是value的值。<br>若：<code>&lt;input type=&quot;radio&quot;&gt;</code> 则v-model收集的是value的值，且要给标签配置value值<br>若：<code>&lt;input type=&quot;checkbox&quot;&gt;</code> :</p>
<ul>
<li>没有配置input的value属性：，那么收集的就是checked（布尔值）</li>
<li>配置input的value属性：<ul>
<li>v-model的初始属性就是非数组，那么收集的就是checked（布尔值）</li>
<li>v-model的初始值是数组，那么收集的就是value组成的数组</li>
</ul>
</li>
</ul>
<p>备注：v-model的三个修饰符：</p>
<ul>
<li>lazy：失去焦点再收集数据</li>
<li>number：输入字符串转换为有效数字</li>
<li>trim：输入首尾空格过滤</li>
</ul>
<h3 id="代码演示-6"><a href="#代码演示-6" class="headerlink" title="代码演示"></a>代码演示</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> @<span class="attr">submit.prevent</span>=<span class="string">&quot;demo&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- trim修饰符，这个就不说了 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;username&quot;</span>&gt;</span> 账号：<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span> <span class="attr">v-model.trim</span>=<span class="string">&quot;userInfo.account&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;passwd&quot;</span>&gt;</span> 密码：<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;passwd&quot;</span> <span class="attr">v-model.trim</span>=<span class="string">&quot;userInfo.password&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span> 性别： 男</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;男&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.sex&quot;</span>&gt;</span> 女<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;radio&quot;</span> <span class="attr">name</span>=<span class="string">&quot;sex&quot;</span> <span class="attr">value</span>=<span class="string">&quot;女&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.sex&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span> 年龄</span><br><span class="line">        <span class="comment">&lt;!-- v-model也是有修饰符的，这里可以使用修饰符使传入的数据为数字类型 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;number&quot;</span> <span class="attr">name</span>=<span class="string">&quot;age&quot;</span> <span class="attr">value</span>=<span class="string">&quot;男&quot;</span> <span class="attr">v-model.number</span>=<span class="string">&quot;userInfo.age&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span> 爱好： 唱</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;唱&quot;</span>&gt;</span> 跳</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;跳&quot;</span>&gt;</span> rap</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;rap&quot;</span>&gt;</span> 篮球</span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.hobby&quot;</span> <span class="attr">value</span>=<span class="string">&quot;篮球&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span> 所属校区</span><br><span class="line">        <span class="comment">&lt;!-- 下拉框的v-model需要配置在select上而不是option上 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;scholl&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.city&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span>&gt;</span>请选择校区<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;beijing&quot;</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;shanghai&quot;</span>&gt;</span>上海<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;shenzhen&quot;</span>&gt;</span>深圳<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;wuhan&quot;</span>&gt;</span>武汉<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span> 其他信息</span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- lazy修饰符可以让用户输入完成之后再做出数据捕获的动作，节省资源 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">cols</span>=<span class="string">&quot;30&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;10&quot;</span> <span class="attr">v-model.lazy</span>=<span class="string">&quot;userInfo.other&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;userInfo.accept&quot;</span>&gt;</span>阅读并接受<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;//MiniKanoMiniKano.cn&quot;</span>&gt;</span>用户协议<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">userInfo</span>: &#123;</span><br><span class="line">            <span class="attr">account</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">password</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="comment">//这里面要是有值的话，因为model的双向绑定，渲染的时候就会选中填入的值</span></span><br><span class="line">            <span class="comment">//sex由于是radio，需要手动配置标签的value属性</span></span><br><span class="line">            <span class="attr">sex</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="comment">//hobby 是复选框，所以也需要手动配置value属性</span></span><br><span class="line">            <span class="comment">//复选框需要的属性，必须是数组类型的</span></span><br><span class="line">            <span class="attr">hobby</span>: [],</span><br><span class="line">            <span class="attr">city</span>: <span class="string">&#x27;beijing&#x27;</span>,</span><br><span class="line">            <span class="attr">other</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">accept</span>: <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title function_">demo</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="variable language_">this</span>.<span class="property">userInfo</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="v-text-指令"><a href="#v-text-指令" class="headerlink" title="v-text 指令"></a>v-text 指令</h2><p><strong>作用：</strong>向其所在的节点中渲染文本内容</p>
<p><strong>与插值语法的区别</strong>：会替换标签里面现有的文本</p>
<h3 id="演示"><a href="#演示" class="headerlink" title="演示"></a>演示</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;name&#125;&#125;ddd<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- v-text --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 和插值语法的区别就是会替换标签里面现有的文本 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-text</span>=<span class="string">&quot;name&quot;</span>&gt;</span>ddd<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;MiniKano&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="v-html-指令"><a href="#v-html-指令" class="headerlink" title="v-html 指令"></a>v-html 指令</h2><p>作用：向指定节点中渲染包含html解构的内容，使用上和v-text没有太大区别，但还是有点</p>
<p>与插值语法的区别：</p>
<ul>
<li>v-html会替换掉节点中所有内容，插值语法则不会</li>
<li>v-html可以识别html结构</li>
</ul>
<p>！严重注意：v-html会有安全性的问题：</p>
<ul>
<li>在网站上动态渲染任意HTML都是非常危险的，容易导致xss攻击</li>
<li>一定要在可信任内容上使用v-html 永远不要在用户提交的内容上使用！</li>
</ul>
<h3 id="演示-1"><a href="#演示-1" class="headerlink" title="演示"></a>演示</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;name&#125;&#125;ddd<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 可以解析html --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-html</span>=<span class="string">&quot;html&quot;</span>&gt;</span>ddd<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//好用，但容易xss注入</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">html</span>: <span class="string">&#x27;&lt;a href=&quot;javascript:alert(document.cookie);&quot;&gt;dddd&lt;/a&gt;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="v-cloak指令"><a href="#v-cloak指令" class="headerlink" title="v-cloak指令"></a>v-cloak指令</h2><ol>
<li>本质是一个特殊属性，Vue实例创建完毕并接管容器之后，会删掉v-cloak属性</li>
<li>使用css配合v-cloak可以解决网速慢时候页面展示出的问题</li>
</ol>
<h3 id="演示-2"><a href="#演示-2" class="headerlink" title="演示"></a>演示</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">  <span class="comment">/*这里需要使用属性选择器进行选择性隐藏*/</span></span></span><br><span class="line"><span class="language-css">  <span class="selector-attr">[v-cloak]</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-cloak</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 有时候我们需要把vue写在后面，这样会导致页面闪现问题 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;MiniKano&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="v-once指令"><a href="#v-once指令" class="headerlink" title="v-once指令"></a>v-once指令</h2><ol>
<li>v-once所在的节点在初次动态渲染之后，就视为静态内容了，</li>
<li>以后数据的改变不会引起v-once所在的结构的更新，可以用于优化性能</li>
</ol>
<h3 id="代码演示-7"><a href="#代码演示-7" class="headerlink" title="代码演示"></a>代码演示</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-once</span>&gt;</span>初始化的n是：&#123;&#123;n&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> &gt;</span>当前的n是：&#123;&#123;n&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;n++&quot;</span>&gt;</span>点我n+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">  <span class="attr">data</span>: &#123;</span><br><span class="line">    <span class="attr">n</span>:<span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="v-pre指令"><a href="#v-pre指令" class="headerlink" title="v-pre指令"></a>v-pre指令</h2><ol>
<li>跳过其所在节点的编译过程</li>
<li>可利用它跳过，没有使用指令的语法，没有使用插值与法的节点，会加快编译</li>
</ol>
<h3 id="代码演示-8"><a href="#代码演示-8" class="headerlink" title="代码演示"></a>代码演示</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-pre</span>&gt;</span>Vue<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-once</span> <span class="attr">v-pre</span>&gt;</span>初始化的n是：&#123;&#123;n&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-pre</span>&gt;</span>当前的n是：&#123;&#123;n&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;n++&quot;</span>&gt;</span>点我n+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br></pre></td></tr></table></figure>

<h2 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h2><p><strong>我们可以使用<code>directives</code>编写自定义指令</strong></p>
<p>directives内可以有两种写法：</p>
<ol>
<li>函数式，属性是函数，适用于处理简单一点的事务</li>
<li>对象式，里面有三个函数：bind，inserted，update<ul>
<li>指令与元素成功绑定时会执行bind</li>
<li>指令被所在元素插入页面时会执行inserted</li>
<li>指令所在的模板被重新解析时会执行update</li>
</ul>
</li>
</ol>
<p>注意，以上函数的this指向都为<strong>window</strong><br>注意，指令定义的时候不加 v- 但使用的时候要加</p>
<hr>
<p><strong>局部写法:</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">directives</span>:&#123;指令名：配置对象&#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//或者</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="title function_">directives</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>全局写法:</strong></p>
<p><strong><code>Vue.directive(&#39;指令名&#39;,&#123;bind，inserted，update&#125;)</code>或 <code>Vue.directive(&#39;指令名&#39;,回调函数)</code></strong></p>
<hr>
<p> <strong>big函数何时会被调用？</strong></p>
<ol>
<li>指令与元素成功绑定时(绑定时候是虚拟dom状态，还没有放入页面)</li>
<li>指令所在的模板被重新解析时</li>
</ol>
<p><strong>特别注意！！！</strong></p>
<blockquote>
<p><strong>自定义指令不能使用驼峰名称或者大写字母，因为Vue会把指令名上所有大写字母转成小写字母！！，推荐使用-（需要还原为带引号的属性名）或者_作为分隔符</strong></p>
</blockquote>
<h3 id="例子-1"><a href="#例子-1" class="headerlink" title="例子"></a>例子</h3><blockquote>
<p>定义一个v-big指令，和v-text功能类似，但会把绑定的数值放大十倍</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- 定义一个v-big指令，和v-text功能类似，但会把绑定的数值放大十倍 --&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前的n是： <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-text</span>=<span class="string">&quot;n&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">h2</span>&gt;</span>放大十倍的n是： <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-big</span>=<span class="string">&quot;n&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;n++&quot;</span>&gt;</span>点我+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.....</span><br><span class="line"><span class="comment">//自定义指令区域</span></span><br><span class="line"><span class="attr">directives</span>:&#123;</span><br><span class="line">  <span class="comment">//两个参数，一个是dom，另一个是参数对象</span></span><br><span class="line">  <span class="title function_">big</span>(<span class="params">ele,binding</span>)&#123;</span><br><span class="line">    ele.<span class="property">innerText</span> = <span class="built_in">parseInt</span>(binding.<span class="property">value</span>) * <span class="number">10</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">....</span><br></pre></td></tr></table></figure>

<blockquote>
<p>定义一个v-fbind指令，和v-bind功能类似，但可以让其所绑定的input元素默认获取焦点</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 定义一个v-fbind指令，和v-bind功能类似，但可以让其所绑定的input元素默认获取焦点 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-fbind:value</span>=<span class="string">&quot;n&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>当我们想要在一开始的时候获取input元素的焦点，除了可以在input标签里面添加autofocus之外，</strong><br><strong>我们还可以使用自定义指令，但是自定义指令如果写成函数式，就会出现页面加载后，自动对焦不起作用问题：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fbind</span>(<span class="params">ele,binding</span>)&#123;</span><br><span class="line">  ele.<span class="property">value</span> = binding.<span class="property">value</span>;</span><br><span class="line">  <span class="comment">//无效</span></span><br><span class="line">  ele.<span class="title function_">focus</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其原因在于：<strong>一开始dom并没有先渲染出来，只有点击+1后才会生效，因为元素已经在页面里面，所以执行focus就会生效</strong></p>
<p><strong>正确写法：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自定义指令区域</span></span><br><span class="line"><span class="attr">directives</span>:&#123;</span><br><span class="line">  <span class="attr">fbind</span>:&#123;</span><br><span class="line">    <span class="comment">//三个固定函数</span></span><br><span class="line">    <span class="comment">//指令与元素成功绑定时</span></span><br><span class="line">    <span class="title function_">bind</span>(<span class="params">ele,binding</span>)&#123;</span><br><span class="line">      ele.<span class="property">value</span> = binding.<span class="property">value</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">      <span class="comment">//指令被所在元素插入页面时</span></span><br><span class="line">      <span class="title function_">inserted</span>(<span class="params">ele,binding</span>)&#123;</span><br><span class="line">        ele.<span class="title function_">focus</span>();</span><br><span class="line">      &#125;,</span><br><span class="line">        <span class="comment">//指令所在的模板被重新解析时</span></span><br><span class="line">        <span class="title function_">update</span>(<span class="params">ele,binding</span>)&#123;</span><br><span class="line">          ele.<span class="property">value</span> = binding.<span class="property">value</span>;</span><br><span class="line">        &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><blockquote>
<p>Vue的生命周期中一共要执行很多重要的函数，mounted函数则是其中的一个</p>
</blockquote>
<h3 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h3><ol>
<li>生命周期又叫生命周期回调函数、生命周期函数，生命周期钩子</li>
<li>Vue在关键时刻帮我们调用的一些特殊名称的函数</li>
<li>生命周期函数的名字不可更改，但函数的具体内容是程序员根据需求编写的</li>
<li>生命周期函数中的this指向的是VM 或 组件的实例对象</li>
</ol>
<h3 id="流程图"><a href="#流程图" class="headerlink" title="流程图"></a>流程图</h3><p><img src="/Users/miniMiniKano/Library/CloudStorage/OneDrive-%E4%B8%AA%E4%BA%BA/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/vue%E5%AD%A6%E4%B9%A0/%E7%AC%94%E8%AE%B0.assets/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png" alt="生命周期"></p>
<h3 id="分析生命周期"><a href="#分析生命周期" class="headerlink" title="分析生命周期"></a>分析生命周期</h3><p><strong>vue实例的整个生命周期分别要执行如下几组函数：</strong></p>
<ol>
<li>beforeCreate( ) 和 created( )</li>
<li>beforeMount( ) 和 mounted( )</li>
<li>beforeUpdate( ) 和 updated( )</li>
<li>beforeDestroy( ) 和 destroyed( )</li>
</ol>
<h4 id="每个生命周期函数的作用"><a href="#每个生命周期函数的作用" class="headerlink" title="每个生命周期函数的作用"></a>每个生命周期函数的作用</h4><h5 id="beforeCreate函数"><a href="#beforeCreate函数" class="headerlink" title="beforeCreate函数"></a>beforeCreate函数</h5><blockquote>
<p>这个阶段初始化生命周期和事件，但是代理并没有开始<br>在这个阶段，无法通过vm访问倒data中的数据，method中的方法</p>
</blockquote>
<h5 id="created函数"><a href="#created函数" class="headerlink" title="created函数"></a>created函数</h5><blockquote>
<p>生命周期和事件初始化完毕<br>在这个阶段，可以通过vm访问倒data中的数据，methods中的方法</p>
</blockquote>
<h5 id="beforeMount函数"><a href="#beforeMount函数" class="headerlink" title="beforeMount函数"></a>beforeMount函数</h5><blockquote>
<p>在这个阶段，页面呈现的是未经Vue编译的DOM结构，故而在这期间，所有对dom的操作最终都是无效的<br>此时会发现，页面的基本结构已经渲染到页面上了，但是插值语法等并没有进行解析<br>这是因为在这期间，Vue并没有将真实DOM放到页面上，此时的DOM还是虚拟的</p>
</blockquote>
<h5 id="mounted函数"><a href="#mounted函数" class="headerlink" title="mounted函数"></a>mounted函数</h5><blockquote>
<p>Vue完成模板解析并把真实DOM元素放入页面后（完成挂载）会调用一个名叫mounted的函数<br>这个函数整在个Vue的生命周期中只调用一次<br>此时页面中呈现的是经过VUe编译的ODM，对DOM的操作均有效（但不推荐）</p>
</blockquote>
<p><strong>至此初始化的过程就结束了</strong><br>p.s: 这里一般可以进行：开启定时器，发送网络请求，订阅消息，绑定自定义事件，等其他初始化操作</p>
<h5 id="beforeUpdate函数"><a href="#beforeUpdate函数" class="headerlink" title="beforeUpdate函数"></a>beforeUpdate函数</h5><blockquote>
<p>当Vue准备发生响应式变化的时候，会触发beforeUpdate系列函数<br>此时，数据是新的，但页面是旧的<br>即：页面尚未和数据保持同步</p>
</blockquote>
<h5 id="updated函数"><a href="#updated函数" class="headerlink" title="updated函数"></a>updated函数</h5><blockquote>
<p>当数据更新操作执行完毕后，会触发updated系列函数<br>此时，数据是新的，页面也是新的<br>即：数据和页面保持同步</p>
</blockquote>
<h5 id="beforeDestroy函数"><a href="#beforeDestroy函数" class="headerlink" title="beforeDestroy函数"></a>beforeDestroy函数</h5><blockquote>
<p>这个函数是在Vue实例销毁之前所执行的<br>此时，vm中所有的 data,method 指令等等都处于可用状态，马上要执行销毁作业，<br>但是在这里所有的对this的操作都不会触发页面更新了<br>一般在这个阶段可以做：关闭定时器，取消订阅消息，解绑自定义事件等操作</p>
</blockquote>
<h5 id="destroyed函数"><a href="#destroyed函数" class="headerlink" title="destroyed函数"></a>destroyed函数</h5><blockquote>
<p>Vue销毁实例之后会执行destroyed回调函数<br>此时vm已经销毁</p>
</blockquote>
<p><strong>以上就是Vue实例的整个生命周期了</strong></p>
<h4 id="生命周期函数演示"><a href="#生命周期函数演示" class="headerlink" title="生命周期函数演示"></a>生命周期函数演示</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 准备好一个容器 --&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">h2</span>&gt;</span>当前的n值是:&#123;&#123;n&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;add&quot;</span>&gt;</span>点我n+1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;bye&quot;</span>&gt;</span>点我销毁容器<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//如果没有el的话，Vue的生命周期就会暂停在created函数</span></span></span><br><span class="line"><span class="language-javascript">            <span class="comment">//直到遇到vm.$mount(el)调用</span></span></span><br><span class="line"><span class="language-javascript">            <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">n</span>:<span class="number">1</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">add</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;add()&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.<span class="property">n</span>++;</span></span><br><span class="line"><span class="language-javascript">                &#125;,</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">bye</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;destroy()&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">this</span>.$destroy()</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeCreate&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// console.log(this.n);</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//此时this里面没有n</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// debugger;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">created</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;created&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// console.log(this.n);</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">beforeMount</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;BeforeMount&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//此时会发现，页面的基本结构已经渲染到页面上了，但是插值语法的&#123;&#123;n&#125;&#125;并没有解析成数字</span></span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// debugger;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;mounted&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// debugger;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">beforeUpdate</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeUpdate&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">n</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// debugger;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">updated</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;updated&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">// this.n++;//别整活儿，会不停的触发数据更新操作</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">beforeDestroy</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;beforeDestroy&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">this</span>.<span class="property">n</span>++;<span class="comment">//不起作用</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">destroyed</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;destroyed&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">        &#125;);</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="总结生命周期"><a href="#总结生命周期" class="headerlink" title="总结生命周期"></a>总结生命周期</h3><p><strong>常用的生命周期钩子：</strong></p>
<ol>
<li>mounted：可以发送<strong>Ajax</strong>请求、启动定时器、绑定自定义事、订阅消息等【初始化操作】</li>
<li>beforeDestroy：清除定时器、解绑自定义事件、取消订阅消息等【收尾工作】</li>
</ol>
<p><strong>关于销毁Vue实例</strong></p>
<ol>
<li>销毁后借助Vue开发者工具不会看到任何信息</li>
<li>销毁后自定义事件会失效，但是原生DOM事件依旧有效（vue2.7版本之后无效）</li>
<li>一般不会在beforeDestory中操作数据，因为那样不会出发数据&#x2F;页面更新流程了</li>
</ol>
<h2 id="Vue组件化编程"><a href="#Vue组件化编程" class="headerlink" title="Vue组件化编程"></a>Vue组件化编程</h2><h3 id="传统方式与组件化方式的区别"><a href="#传统方式与组件化方式的区别" class="headerlink" title="传统方式与组件化方式的区别"></a>传统方式与组件化方式的区别</h3><p><strong>传统方式编写应用的问题：</strong></p>
<ul>
<li>依赖关系混乱，不好维护</li>
<li>代码复用率不大，耦合性较高</li>
</ul>
<p><strong>组件化编程方式的优点：</strong></p>
<ul>
<li>依赖关系清晰，方便维护</li>
<li>代码复用率非常高，组件之间互不影响</li>
</ul>
<h3 id="组件的概念"><a href="#组件的概念" class="headerlink" title="组件的概念"></a>组件的概念</h3><blockquote>
<p>所谓的组件就是<strong>实现应用中局部功能代码和资源的集合</strong></p>
</blockquote>
<h3 id="模块与组件、模块化与组件化"><a href="#模块与组件、模块化与组件化" class="headerlink" title="模块与组件、模块化与组件化"></a>模块与组件、模块化与组件化</h3><h4 id="模块"><a href="#模块" class="headerlink" title="模块"></a>模块</h4><p>理解：向外提供特定功能的 js 程序，一般为一个js文件</p>
<p>使用原因： js文件多而杂</p>
<p>作用：复用js，简化js的编写，提高js运行效率</p>
<h4 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h4><p>理解：用来实现局部（特定）功能效果的代码集合（html&#x2F;css&#x2F;js&#x2F;image）</p>
<p>使用原因：一个界面的功能很复杂</p>
<p>作用：复用编码，简化项目编码，提高运行效率</p>
<h4 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h4><p>当应用中的js都以模块来编写的，那这个应用就是一个模块化的应用</p>
<h4 id="组件化"><a href="#组件化" class="headerlink" title="组件化"></a>组件化</h4><p>当应用中的功能都是多组件的方式来编写的，那这个应用就是一个组件化的应用</p>
<h3 id="非单文件组件与单文件组件"><a href="#非单文件组件与单文件组件" class="headerlink" title="非单文件组件与单文件组件"></a>非单文件组件与单文件组件</h3><h4 id="非单文件组件"><a href="#非单文件组件" class="headerlink" title="非单文件组件"></a>非单文件组件</h4><p>一个文件中包含有N个组件</p>
<h4 id="单文件组件"><a href="#单文件组件" class="headerlink" title="单文件组件"></a>单文件组件</h4><p>一个文件中只包含有一个组件</p>
<h3 id="非单文件组件编写"><a href="#非单文件组件编写" class="headerlink" title="非单文件组件编写"></a>非单文件组件编写</h3><h4 id="Vue使用组件的三大步骤"><a href="#Vue使用组件的三大步骤" class="headerlink" title="Vue使用组件的三大步骤"></a>Vue使用组件的三大步骤</h4><ol>
<li>定义组件（创建组件）</li>
<li>注册组件</li>
<li>使用组件（写组件标签）</li>
</ol>
<h4 id="如何定义？"><a href="#如何定义？" class="headerlink" title="如何定义？"></a>如何定义？</h4><p>使用Vue.extend(options)*创建，其中options和new Vue(options) 时传入的options几乎一样，但也有区别</p>
<p>区别如下：</p>
<ol>
<li>el不要写，因为最终左右的组件都要经过一个vm管理，由vm中的el决定服务哪个容器。</li>
<li>data必须写成函数，为什么？ — 避免组件被复用时，数据存在引用关系，使用函数形式，其中的return可以自动复制对象（深拷贝）</li>
</ol>
<p>备注1：使用template可以配置组件html解构</p>
<p><em>备注2：vue.extend()方法其实是vue的一个构造器,继承自vue 使用基础 Vue 构造器,创建一个“子类”。参数是一个包含组件选项的对象。</em></p>
<h4 id="如何注册？"><a href="#如何注册？" class="headerlink" title="如何注册？"></a>如何注册？</h4><ol>
<li>局部注册：靠newVue时候传入的components选项</li>
<li>全局注册：靠Vue.component(‘组件名’,组件);</li>
</ol>
<h4 id="编写组件标签"><a href="#编写组件标签" class="headerlink" title="编写组件标签"></a>编写组件标签</h4><p>使用 <code>&lt;组件名&gt;&lt;/组件名&gt;</code> 来在页面上引用组件标签</p>
<h4 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 3.编写组件标签 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">school</span>&gt;</span><span class="tag">&lt;/<span class="name">school</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 复用,事件对象互相独立 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">school</span>&gt;</span><span class="tag">&lt;/<span class="name">school</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">student</span>&gt;</span><span class="tag">&lt;/<span class="name">student</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 全局组件 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">hello</span>&gt;</span><span class="tag">&lt;/<span class="name">hello</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.注册组件</span></span><br><span class="line"><span class="comment">//创建一个school组件</span></span><br><span class="line"><span class="keyword">const</span> school = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">    <span class="comment">//不要写el配置项，因为左右组件最终都有vm实例管理</span></span><br><span class="line">    <span class="comment">//写template</span></span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">            &lt;div&gt;</span></span><br><span class="line"><span class="string">                &lt;h2&gt;学校名称 &#123;&#123;name&#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="string">                &lt;h2&gt;学校地址 &#123;&#123;address&#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="string">                &lt;button @click=&quot;ChangeName&quot;&gt;点我修改学校名为加里顿&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            `</span>,</span><br><span class="line">    <span class="comment">//     el: &#x27;#root&#x27;,</span></span><br><span class="line">    <span class="comment">//data必须写为函数式，因为对象式为引用类型，会造成一些问题</span></span><br><span class="line">    <span class="comment">//使用函数形式，其中的return可以自动复制对象（深拷贝）</span></span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;MIT&#x27;</span>,</span><br><span class="line">            <span class="attr">address</span>: <span class="string">&#x27;USA&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title class_">ChangeName</span>() &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;加里顿&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建一个student组件</span></span><br><span class="line"><span class="keyword">const</span> student = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">    <span class="comment">//写template</span></span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">            &lt;div&gt;</span></span><br><span class="line"><span class="string">                &lt;h2&gt;学生姓名 &#123;&#123;name&#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="string">                &lt;h2&gt;学生年龄 &#123;&#123;age&#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            `</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;MiniKano&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">19</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//全局组件</span></span><br><span class="line"><span class="keyword">const</span> globalHello = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">            &lt;div&gt;</span></span><br><span class="line"><span class="string">                hello1234</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            `</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;TOM&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//全局注册组件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;hello&#x27;</span>, globalHello)</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.注册组件（局部注册）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建vm</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="comment">//填入组件</span></span><br><span class="line">    <span class="attr">components</span>: &#123;</span><br><span class="line">        <span class="comment">//es6缩写</span></span><br><span class="line">        school,</span><br><span class="line">        student</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="组件的命名方法"><a href="#组件的命名方法" class="headerlink" title="组件的命名方法"></a>组件的命名方法</h4><p>对于单个单词组成：<strong>首字母大写即可</strong></p>
<p>对于多单词组成：</p>
<ol>
<li>全部小写，使用短横线 ’ - ‘  (kebab-case命名) 连接 ：<strong>my-component</strong></li>
<li>每一个单词的首字母大写 (camelCase命名) ：<strong>MyComponent</strong> （只能在脚手架环境中使用）</li>
</ol>
<p>备注：</p>
<ul>
<li>组件名尽可能回避原生的标签名，例如：h2、H2 都不可以</li>
<li>可以使用<strong>name</strong>配置项指定组件在开发者工具中呈现的名字</li>
</ul>
<p>关于组件标签：</p>
<ul>
<li>第一种写法：<code>&lt;MiniKano&gt;&lt;/MiniKano&gt;</code></li>
<li>第二种写法：<code>&lt;MiniKano/&gt;</code></li>
<li>备注：不使用脚手架时，<MiniKano/> 会导致后续组件无法渲染</li>
</ul>
<p>一个简写形式：</p>
<ul>
<li><code>const school = Vue.extend(options)</code> 可简写为:  <code>const school = options</code><br>可以简写是因为最后vm中的components会判断传入的是extends过的还是原对象，从而做出不同的反应</li>
</ul>
<h4 id="组件的嵌套"><a href="#组件的嵌套" class="headerlink" title="组件的嵌套"></a>组件的嵌套</h4><p>只需要注意一点：<strong>想嵌套到哪个组件就放到哪个组件内</strong></p>
<h5 id="代码示例-1"><a href="#代码示例-1" class="headerlink" title="代码示例"></a>代码示例</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123;msg&#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建一个student组件</span></span><br><span class="line"><span class="keyword">const</span> student = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">    <span class="comment">//写template</span></span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">            &lt;div&gt;</span></span><br><span class="line"><span class="string">                &lt;h2&gt;学生姓名 &#123;&#123;name&#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="string">                &lt;h2&gt;学生年龄 &#123;&#123;age&#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            `</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;MiniKano&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">19</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//school组件</span></span><br><span class="line"><span class="keyword">const</span> school = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">    <span class="comment">//可以使用name属性强制指定组件在开发者工具中呈现的组件名</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;MiniKano&#x27;</span>,</span><br><span class="line">    <span class="comment">// student是school的子组件,所以要写在school的模板里面</span></span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">            &lt;div&gt;</span></span><br><span class="line"><span class="string">                scholl组件开始</span></span><br><span class="line"><span class="string">                &lt;h2&gt;学校名称 &#123;&#123;name&#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="string">                &lt;h2&gt;学校地址 &#123;&#123;address&#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="string">                &lt;button @click=&quot;ChangeName&quot;&gt;点我修改学校名为加里顿&lt;/button&gt;</span></span><br><span class="line"><span class="string">                &lt;student&gt;&lt;/student&gt;</span></span><br><span class="line"><span class="string">                scholl组件结束</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            `</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;MIT&#x27;</span>,</span><br><span class="line">            <span class="attr">address</span>: <span class="string">&#x27;USA&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title class_">ChangeName</span>() &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">name</span> = <span class="string">&quot;加里顿&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//嵌套注册(注意student要在school前面)</span></span><br><span class="line">    <span class="attr">components</span>: &#123;</span><br><span class="line">        student</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义hello组件</span></span><br><span class="line"><span class="keyword">const</span> hello = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`&lt;h1&gt;&#123;&#123;msg&#125;&#125;&lt;/h1&gt;`</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">msg</span>: <span class="string">&#x27;hello world&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义app组件</span></span><br><span class="line"><span class="keyword">const</span> app = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">                &lt;div&gt;</span></span><br><span class="line"><span class="string">                    &lt;school&gt;&lt;/school&gt;</span></span><br><span class="line"><span class="string">                    &lt;hello&gt;&lt;/hello&gt;</span></span><br><span class="line"><span class="string">                &lt;/div&gt;</span></span><br><span class="line"><span class="string">                `</span>,</span><br><span class="line">    <span class="attr">components</span>: &#123;</span><br><span class="line">        school,</span><br><span class="line">        hello</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//创建vm</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`&lt;app&gt;&lt;/app&gt;`</span>,</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="comment">//注册组件(局部)</span></span><br><span class="line">    <span class="attr">components</span>: &#123;</span><br><span class="line">        <span class="comment">//es6缩写</span></span><br><span class="line">        app</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">msg</span>: <span class="string">&#x27;hello&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>以上代码组件结构如下：</p>
<ul>
<li><code>&lt;root&gt;</code><ul>
<li><code>&lt;app&gt;</code><ul>
<li><code>&lt;MiniKano&gt;</code></li>
</ul>
</li>
<li><code>&lt;hello&gt;</code></li>
</ul>
</li>
</ul>
<p>总结：<strong>被嵌套属性需要在template属性中写上嵌套者的组件标签，components中写上嵌套者的组件名即可完成嵌套操作</strong></p>
<h4 id="VueComponent构造函数"><a href="#VueComponent构造函数" class="headerlink" title="VueComponent构造函数"></a>VueComponent构造函数</h4><p><strong>关于VueComponent：</strong></p>
<ol>
<li>school组件本质是一个名为VueComponent的构造函数，且不是程序员定义的，是Vue.extend生成的。</li>
<li>我们只需要写<code>&lt;school/&gt;</code> 或 <code>&lt;school&gt;&lt;/school&gt;</code>,Vue解析时会帮我们创建school组件的实例对象<br>即Vue帮我们执行的：<code>new VueComponent(options)</code></li>
<li>特别注意：每次调用Vue.extend。返回的都是一个全新的VueComponent！！<br>所以每个标签组件就可以复用，因为他们都是独立的个体实例对象</li>
<li>关于this的指向：<ol>
<li>组件配置中：<ul>
<li>data函数、methods中的函数、watch中的函数、computed中的函数 它们的this均是【VueComponent实例对象】</li>
</ul>
</li>
<li>new Vue()配置中<ul>
<li>data函数、methods中的函数、watch中的函数、computed中的函数 它们的this均是【Vue实例对象】</li>
</ul>
</li>
</ol>
</li>
<li>VueComponent的实例对象，以后简称vc （组件实例对象）<br>Vue的示例对象，以后简称vm</li>
</ol>
<h5 id="VueComponent内部实现"><a href="#VueComponent内部实现" class="headerlink" title="VueComponent内部实现"></a>VueComponent内部实现</h5><p>如果我们创建了多个组件，分别输出组件的值：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建一个hello组件</span></span><br><span class="line"><span class="keyword">const</span> hello = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`&lt;h2&gt;&#123;&#123;msg&#125;&#125;&lt;/h2&gt;`</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">msg</span>: <span class="string">&#x27;你好&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(hello);</span><br><span class="line"><span class="comment">//school组件</span></span><br><span class="line"><span class="comment">//school组件</span></span><br><span class="line"><span class="keyword">const</span> school = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">    <span class="comment">//可以使用name属性强制指定组件在开发者工具中呈现的组件名</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;school&#x27;</span>,</span><br><span class="line">    <span class="comment">// student是school的子组件,所以要写在school的模板里面</span></span><br><span class="line">    <span class="attr">template</span>: <span class="string">`</span></span><br><span class="line"><span class="string">            &lt;div&gt;</span></span><br><span class="line"><span class="string">                &lt;h2&gt;学校名称 &#123;&#123;name&#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="string">                &lt;h2&gt;学校地址 &#123;&#123;address&#125;&#125;&lt;/h2&gt;</span></span><br><span class="line"><span class="string">                &lt;button @click=&quot;ShowName&quot;&gt;点我提示&lt;/button&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            `</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;MIT&#x27;</span>,</span><br><span class="line">            <span class="attr">address</span>: <span class="string">&#x27;USA&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title class_">ShowName</span>() &#123;</span><br><span class="line">            <span class="comment">//这里的this是VueComponent的实例对象</span></span><br><span class="line">            <span class="comment">//不过在没渲染的时候，VueComponent并没有执行，所以这个this其实就是构造函数中的this</span></span><br><span class="line">            <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(school);</span><br></pre></td></tr></table></figure>

<p><strong>结果都为</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ƒ <span class="title class_">VueComponent</span>(options) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">_init</span>(options);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是从Vue.extend的源码来看，这两个VueComponent并不是同一个函数</p>
<p>因为Vue.extend源码是这样写的:</p>
<p>大致代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Vue</span>.<span class="property">extend</span> = <span class="keyword">function</span> (<span class="params">extendOptions</span>) &#123;</span><br><span class="line">    <span class="comment">//省略。。。</span></span><br><span class="line">    <span class="keyword">var</span> <span class="title class_">Sub</span> = <span class="keyword">function</span> <span class="title function_">VueComponent</span>(<span class="params">options</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">_init</span>(options);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//省略。。。</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Sub</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>每次调用Vue.extend的时候，都会创建一个新变量用于接收新构造函数</strong><br><strong>所以每个组件的VueComponent都成为了独立的个体</strong><br><strong>直到需要渲染到页面时候，就会执行这些构造函数</strong></p>
<h4 id="如何获取Vue所管理的组件实例对象"><a href="#如何获取Vue所管理的组件实例对象" class="headerlink" title="如何获取Vue所管理的组件实例对象"></a>如何获取Vue所管理的组件实例对象</h4><blockquote>
<p><strong>可以使用<code>vm.$children</code>属性获取</strong></p>
</blockquote>
<p><code>vm.$children</code>属性返回的是一个数组，里面有vm管理的组件实例</p>
<p>例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建vm</span></span><br><span class="line">vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">components</span>: &#123;</span><br><span class="line">        school,</span><br><span class="line">        hello</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(vm.<span class="property">$children</span>);</span><br></pre></td></tr></table></figure>

<p><strong>备注：如果组件里面也有子组件，那这个组件的$children属性里面就会显示存放子组件</strong></p>
<h4 id="vm与vc的本质区别"><a href="#vm与vc的本质区别" class="headerlink" title="vm与vc的本质区别"></a>vm与vc的本质区别</h4><p>vm与vc相比：</p>
<ol>
<li>vc没有独立的el属性</li>
<li>vc的data必须写成函数式</li>
<li>vc是VueComponent的实例对象，而vm是Vue的实例对象</li>
</ol>
<h4 id="组件的一个重要的内置关系"><a href="#组件的一个重要的内置关系" class="headerlink" title="组件的一个重要的内置关系"></a>组件的一个重要的内置关系</h4><h5 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h5><blockquote>
<p>一个重要的内置关系：<strong>VueComponent.prototype.<strong>proto</strong>&#x3D;&#x3D;&#x3D; Vue.prototype</strong></p>
</blockquote>
<blockquote>
<p>为什么要有这个关系：<strong>让组件实例对象（vc）可以访问到Vue原型上的属性和方法</strong></p>
</blockquote>
<p>这涉及到原型链的问题，我们知道，VueComponent 和 Vue 实例化之后两者的内置的方法和属性其实都大同小异，其中的关键在于，Vue复用了一些方法与属性：指 <strong>通过更改原型指向的方式共享Vue上的一些属性和方法</strong> 这种方式也叫 <strong>原型链继承</strong></p>
<p>代码演示：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建hello组件</span></span><br><span class="line"><span class="keyword">const</span> hello = <span class="title class_">Vue</span>.<span class="title function_">extend</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">`&lt;h1&gt;hello&lt;/h1&gt;`</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建vm</span></span><br><span class="line">vm = <span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">components</span>: &#123;</span><br><span class="line">        hello</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(hello.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">__proto__</span> === <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>) <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<p>Vue的原型链大致为：</p>
<p><strong>Vue –&gt; Vue的原型对象 –&gt; Object的原型对象 –&gt; null</strong></p>
<p>VueComponent的原型链大致为：</p>
<p><strong>VueComponent –&gt; VueComponent的原型对象–&gt;  Vue的原型对象 –&gt; Object的原型对象 –&gt; null</strong></p>
<h5 id="图解"><a href="#图解" class="headerlink" title="图解"></a>图解</h5><p><img src="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/image-20220823004855399.png" alt="image-20220823004855399"></p>
<h3 id="单文件组件的编写"><a href="#单文件组件的编写" class="headerlink" title="单文件组件的编写"></a>单文件组件的编写</h3><h5 id="简介-2"><a href="#简介-2" class="headerlink" title="简介"></a>简介</h5><p><strong>单文件组件文件的扩展名是.vue</strong></p>
<p>文件内可以写三种标签：</p>
<ol>
<li><code>&lt;template&gt;</code>标签 ,用于填写预解析模板，也就是组件的结构</li>
<li><code>&lt;script&gt;</code>标签，用于填写组件交互相关的代码（数据，方法等）</li>
<li><code>&lt;style&gt;</code>标签，用于填写组件的样式</li>
</ol>
<p><strong>注意：多个vue单文件组件，最终会汇总于App.vue文件中，方便统一管理</strong></p>
<p><strong>script标签中由于填写的是组件相关的交互代码，故需要使用export向外暴露需要的变量</strong></p>
<h5 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h5><p>一般一个单文件组件写成的工程的文件树是这样的</p>
<ul>
<li>Root<ul>
<li>School.vue</li>
<li>Student.vue</li>
<li>App.vue</li>
<li>main.js</li>
<li>index.html</li>
</ul>
</li>
</ul>
<p>其中：</p>
<ul>
<li>App.vue汇总了所有的组件</li>
<li>main.js内实例化了vm</li>
<li>index.html提供了网页基础结构</li>
</ul>
<h5 id="代码演示-9"><a href="#代码演示-9" class="headerlink" title="代码演示"></a>代码演示</h5><p><strong>School.vue</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;!-- 组件的结构 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">class</span>=<span class="string">&quot;demo&quot;</span>&gt;</span>学校名称 &#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>学校地址 &#123;&#123;address&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;ShowName&quot;</span>&gt;</span>点我提示<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//简写 Vue.extend可以省略</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>: <span class="string">&#x27;School&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">name</span>: <span class="string">&#x27;MIT&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">address</span>: <span class="string">&#x27;USA&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title class_">ShowName</span>() &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="comment">/*组件的样式*/</span></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.demo</span>&#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="attribute">color</span>: pink;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><strong>Student.vue</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>学生姓名 &#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>学生年龄 &#123;&#123;age&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">//创建一个student组件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>:<span class="string">&#x27;Student&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">name</span>: <span class="string">&#x27;MiniKano&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="attr">age</span>: <span class="number">19</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><strong>App.vue</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">School</span>&gt;</span><span class="tag">&lt;/<span class="name">School</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">Student</span>&gt;</span><span class="tag">&lt;/<span class="name">Student</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 组件最终必须汇总于App.vue</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="comment">// 引入组件</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">School</span> <span class="keyword">from</span> <span class="string">&#x27;./School.vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">import</span> <span class="title class_">Student</span> <span class="keyword">from</span> <span class="string">&#x27;./Student.vue&#x27;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">name</span>:<span class="string">&#x27;App&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">components</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title class_">School</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title class_">Student</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p><strong>main.js</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vm初始化在这</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#root&#x27;</span>,</span><br><span class="line">    <span class="attr">components</span>: &#123; <span class="title class_">App</span> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>index.html</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">App</span>&gt;</span><span class="tag">&lt;/<span class="name">App</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 运行不了，需要在脚手架环境 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span> <span class="attr">src</span>=<span class="string">&quot;./main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>不过，你会发现，以上代码根本执行不了，原因是需要Vue脚手架的支持，脚手架将在下面小节讲，这里只是熟悉一下单文件组件的编写方法（（</p>
<h2 id="Vue脚手架"><a href="#Vue脚手架" class="headerlink" title="Vue脚手架"></a>Vue脚手架</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><blockquote>
<p>Vue脚手架又叫 <strong>Vue CLI</strong>（Command Line Interface）</p>
</blockquote>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>第一步：安装Node.js 后，在命令行直接输入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli</span><br></pre></td></tr></table></figure>

<p>第二步：切换到你要创建项目的目录，然后使用命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create xxxxx</span><br></pre></td></tr></table></figure>

<p>第三步：启动项目</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br></pre></td></tr></table></figure>

<h3 id="目录结构及文件描述"><a href="#目录结构及文件描述" class="headerlink" title="目录结构及文件描述"></a>目录结构及文件描述</h3><p>目录树如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">│  babel.config.js babel的配置文件</span><br><span class="line">│  jsconfig.json babel的配置文件</span><br><span class="line">│  package.json 应用包的配置文件</span><br><span class="line">│  README.md </span><br><span class="line">│  vue.config.js 配置webpack相关</span><br><span class="line">│  yarn.lock</span><br><span class="line">│</span><br><span class="line">├─public</span><br><span class="line">│      favicon.ico 页签图标</span><br><span class="line">│      index.html 主页面</span><br><span class="line">│</span><br><span class="line">└─src</span><br><span class="line">    │  App.vue</span><br><span class="line">    │  main.js</span><br><span class="line">    │</span><br><span class="line">    ├─assets 存放静态资源</span><br><span class="line">    │      logo.png</span><br><span class="line">    │</span><br><span class="line">    └─components 存放组件</span><br><span class="line">            HelloWorld.vue</span><br></pre></td></tr></table></figure>

<p>其中：</p>
<p><strong>babel.config.js</strong> 是babel的控制文件，用于将es6语法向下转换为es5的兼容语法，一般不需要做改动</p>
<p><strong>package.json</strong> 是包的管理文件，用来记录vue整个工程的名字，版本，主要包，启动参数等</p>
<p><strong>yarn.lock</strong> 是yarn的依赖包版本锁，用于控制依赖包及依赖包版本</p>
<p><strong>public</strong> 目录用于存放静态html资源，也是网页的入口</p>
<p><strong>src</strong> 目录用于存放源码，下面细说：</p>
<ul>
<li>src 根目录一般存放 <strong>main.js</strong> <strong>App.vue</strong></li>
<li>asserts目录里面主要是存放一些前端资源文件，如图片媒体等</li>
<li>components目录主要存放Vue的组件</li>
</ul>
<p><strong>README.MD</strong> 是说明文档啦~</p>
<p><em>P.S:如果安装了lint工具的话，记得在编写程序的时候不要使用它，不然会影响编程效率（</em></p>
<h4 id="执行vue-serve"><a href="#执行vue-serve" class="headerlink" title="执行vue serve"></a>执行vue serve</h4><p>执行了serve操作之后，vue首先就会执行main.js  之后会按照流程创建vm。引入组件等操作</p>
<p><strong>注意：run 之后 可能会有lint的报错导致无法启动，为了方便，可以直接在vue.config.js里面的defineConfig函数对象参数中添加</strong>  <code>lintOnSave:false</code> 即可</p>
<h3 id="Render函数"><a href="#Render函数" class="headerlink" title="Render函数"></a>Render函数</h3><h4 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h4><p>我们之前在main.js内Vue函数里面是这样写的</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">    <span class="attr">compoments</span>: &#123; <span class="title class_">App</span> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>但是，当我们使用脚手架打包运行的时候，会提示如下错误</p>
<blockquote>
<p>[Vue warn]: You are using the runtime-only build of Vue where the template compiler is not available. Either pre-compile the templates into render functions, or use the compiler-included build.<br>(found in <Root>)</p>
</blockquote>
<p>通过提示可知道:<strong>现有的vue运行时环境并不能使用模板编译器，可以选择使用render函数，或者使用完整的带解析器的vue运行环境</strong></p>
<p>因为我们引用的时候直接写了<code>import Vue from &#39;vue&#39;</code><br>在vue的源代码内其实是引用了 <code>dist/vue.runtime.esm.js</code>(ECMAScript Module)</p>
<p><em>p.s:不引入完整的vue执行和渲染效率会高一点，占用空间会低一点</em></p>
<h4 id="解决方法-1"><a href="#解决方法-1" class="headerlink" title="解决方法"></a>解决方法</h4><ol>
<li>使用完整版的Vue：<code>import Vue from &#39;vue/dist/vue&#39;</code></li>
<li>使用render函数</li>
</ol>
<h4 id="Render函数原理"><a href="#Render函数原理" class="headerlink" title="Render函数原理"></a>Render函数原理</h4><p>render函数包含一个参数，类型为function 默认是createElement函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params">createElement</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">typeof</span> createElement); <span class="comment">//function</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">createElement</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>箭头函数写法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="关于不同版本的vue"><a href="#关于不同版本的vue" class="headerlink" title="关于不同版本的vue"></a>关于不同版本的vue</h3><ol>
<li>vue.js 与 vue.runtime.xx.js的区别：<ol>
<li>vue.js是完整版的Vue，包含：核心功能+模板解析器</li>
<li>vue.runtime.xxx.j是运行版的Vue，只包含：核心功能，没有模板的解析器</li>
</ol>
</li>
<li>因为vue.runtime.xxx.js没有模板解析器，所以不能使用template配置项，需要使用render函数接收到的createElement函数去指定具体内容</li>
</ol>
<h3 id="修改默认配置"><a href="#修改默认配置" class="headerlink" title="修改默认配置"></a>修改默认配置</h3><p>Vue脚手架隐藏了所有的 webpack 相关的配置，如果香查看具体的webpack的配置，请执行: <code>vue inspect &gt; output.js</code></p>
<p>可以修改</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">entry</span>: &#123;</span><br><span class="line">    <span class="attr">app</span>: [</span><br><span class="line">        <span class="string">&#x27;./src/main.js&#x27;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这个对象来自定义入口函数的名字</p>
<p>但直接修改这一句显然是不会奏效的，需要修改<strong>vue.config.js</strong></p>
<blockquote>
<p>vue.config.js 是一个可选的配置文件，如果项目的(和package.json同级的)根目录中存在这个文件，那么它会被@vue&#x2F;cli-service自动加载。你也可以使用package.json中的 vue字段，但是注意这种写法需要你严格遵照JSON的格式来写。</p>
</blockquote>
<p>如果我们想要修改main.js入口文件的名字，需要进入vue.config.js中的pages对象中进行修改：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自定义pages</span></span><br><span class="line"><span class="attr">pages</span>: &#123;</span><br><span class="line">    <span class="attr">index</span>: &#123;</span><br><span class="line">        <span class="comment">// page 的入口</span></span><br><span class="line">        <span class="attr">entry</span>: <span class="string">&#x27;src/main.js&#x27;</span>,</span><br><span class="line">        <span class="comment">// 模板来源</span></span><br><span class="line">        <span class="attr">template</span>: <span class="string">&#x27;public/index.html&#x27;</span>,</span><br><span class="line">        <span class="comment">// 在 dist/index.html 的输出</span></span><br><span class="line">        <span class="attr">filename</span>: <span class="string">&#x27;index.html&#x27;</span>,</span><br><span class="line">        <span class="comment">// 当使用 title 选项时，</span></span><br><span class="line">        <span class="comment">// template 中的 title 标签需要是 &lt;title&gt;&lt;%= htmlWebpackPlugin.options.title %&gt;&lt;/title&gt;</span></span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;Index Page&#x27;</span>,</span><br><span class="line">        <span class="comment">// 在这个页面中包含的块，默认情况下会包含</span></span><br><span class="line">        <span class="comment">// 提取出来的通用 chunk 和 vendor chunk。</span></span><br><span class="line">        <span class="attr">chunks</span>: [<span class="string">&#x27;chunk-vendors&#x27;</span>, <span class="string">&#x27;chunk-common&#x27;</span>, <span class="string">&#x27;index&#x27;</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其他配置项可以i对脚手架进行个性化定制，详见：<a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/config/#pages">配置参考 | Vue CLI (vuejs.org)</a></p>
<h3 id="使用ref标记DOM"><a href="#使用ref标记DOM" class="headerlink" title="使用ref标记DOM"></a>使用ref标记DOM</h3><p>有些时候我们需要操作DOM，但在Vue中使用原生DOM操作指令显得不是太友好，所以Vue为我们提供了一个比较好用的操作DOM的方法：ref标记</p>
<p>只需要给template标签中的元素添加一个ref属性即可：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-text</span>=<span class="string">&quot;msg&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;title&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>然后就可以使用vc中的：<code>$refs</code> 进行控制DOM等操作</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">    <span class="comment">// 使用$refs可以输出设定的ref标记的DOM</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">title</span>);</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>但这里有个需要注意的点：<strong>如果给组件标签打上ref属性，那$refs的输出则是该组件标签与之对应的组件实例对象：</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">School</span> <span class="attr">ref</span>=<span class="string">&quot;school&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">    <span class="comment">//组件标签的ref就是与之对应的组件</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">school</span>);</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>ref总结：</p>
<ol>
<li>ref属性被用来给元素或子组件注册引用信息 （id的替代者）</li>
<li>应用在html标签上获取的是真实DOM元素，应用在组件标签上是组件实例对象（vc）</li>
<li>使用方式：<ol>
<li>打标识：<h1 v-text="msg" ref="title"></h1></li>
<li>获取： this.$refs.msg</li>
</ol>
</li>
</ol>
<h3 id="配置项porps"><a href="#配置项porps" class="headerlink" title="配置项porps"></a>配置项porps</h3><p>功能： 让组件接收外部传过来的数据</p>
<ol>
<li><p>传输数据：</p>
<ol>
<li><code>&lt;Demo name=&quot;xxx&quot;/&gt;</code></li>
</ol>
</li>
<li><p>接收数据：</p>
<ol>
<li><p>第一种方式（只接收）：<br> <code>props:[&#39;name&#39;]</code></p>
</li>
<li><p>第二种方式（限制类型）</p>
 <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>:&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="title class_">Number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>第三种方式（限制类型，限制必要性，指定默认值）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">props</span>:&#123;</span><br><span class="line">    <span class="attr">name</span>:&#123;</span><br><span class="line">        <span class="attr">type</span>:<span class="title class_">String</span>, <span class="comment">//类型</span></span><br><span class="line">        <span class="attr">required</span>:<span class="literal">true</span>, <span class="comment">//必要性</span></span><br><span class="line">        <span class="attr">default</span>: <span class="string">&#x27;33&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<p><strong>备注：props是只读的，Vue底层会监测你对props的修改，如果进行了修改，就会发生警告，若业务需求需要修改，那么请复制props的内容到data中一份，然后去修改data中的数据。</strong></p>
<h3 id="混入（mixin）"><a href="#混入（mixin）" class="headerlink" title="混入（mixin）"></a>混入（mixin）</h3><p>功能： 可以把多个组件公用的配置提取成一个混入对象</p>
<p>使用方式：</p>
<ol>
<li><p>第一步定义混合，例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mixin = &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>)&#123;...&#125;,</span><br><span class="line">    <span class="attr">methods</span>:&#123;...&#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>第二步使用混入，例如：</p>
<ol>
<li>全局混入：Vue.mixin(mixin)</li>
<li>局部混入：mixins:[mixin]</li>
</ol>
</li>
</ol>
<p>代码示例：</p>
<p>准备混入文件（mixin.js）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//分别暴露，抽离方法成混合</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mixin = &#123;</span><br><span class="line">    <span class="attr">methods</span>: &#123;</span><br><span class="line">        <span class="title function_">showName</span>(<span class="params"></span>) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">name</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;加载完成&#x27;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> mixin2 = &#123;</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">msg</span>: <span class="string">&#x27;MiniKanoMiniKano&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>局部混入(组件.vue)：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//局部混合</span></span><br><span class="line"><span class="keyword">import</span> &#123;mixin,mixin2&#125; <span class="keyword">from</span> <span class="string">&#x27;../mixin.js&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;School&#x27;</span>,</span><br><span class="line">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span>&#123;</span><br><span class="line">            <span class="attr">name</span>:<span class="string">&#x27;MIT&#x27;</span>,</span><br><span class="line">            <span class="attr">address</span>:<span class="string">&#x27;ddddd&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// mixins:[mixin,mixin2]</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>全局混入(main.js)：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//全局混合</span></span><br><span class="line"><span class="keyword">import</span> &#123; mixin, mixin2 &#125; <span class="keyword">from</span> <span class="string">&#x27;./mixin&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">mixin</span>(mixin)</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">mixin</span>(mixin2)</span><br></pre></td></tr></table></figure>

<h3 id="插件"><a href="#插件" class="headerlink" title="插件"></a>插件</h3><p>功能：用于增强Vue</p>
<p>本质：包含一个install方法的一个对象，install的第一个参数是Vue ，第二个以后的参数是插件使用者传递的数据。</p>
<p>定义插件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">对象.<span class="property">instll</span> = <span class="keyword">function</span>(<span class="params">Vue,options</span>)&#123;</span><br><span class="line">    <span class="comment">//添加全局过滤器</span></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="title function_">filter</span>(...);</span><br><span class="line">    <span class="comment">//添加全局指令</span></span><br><span class="line"> <span class="title class_">Vue</span>.<span class="title function_">directive</span>(...);</span><br><span class="line">    <span class="comment">//配置全局混合（入）</span></span><br><span class="line">    <span class="title class_">Vue</span>.<span class="title function_">mixin</span>(...);</span><br><span class="line">    <span class="comment">//添加实例方法</span></span><br><span class="line"> <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$myMethod</span> = <span class="keyword">function</span>(<span class="params"></span>)&#123;...&#125;;</span><br><span class="line">    <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$myProperty</span> = xxxx;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用插件：<code>Vue.use(插件名)</code></p>
<h3 id="scoped（局部）样式"><a href="#scoped（局部）样式" class="headerlink" title="scoped（局部）样式"></a>scoped（局部）样式</h3><p>在编写组件的时候，我们在每个组件中的style样式里面编写很多自定义样式，但是每个样式名字很容易重合，如果名字重合了，会出现样式覆盖的问题。</p>
<p>比如： 在<code>student.vue</code>中，编写了<code>demo</code>样式，在<code>school.vue</code>中同样也编写了demo样式，而且在<code>app.vue</code>中先引入了<code>school</code>，后引入<code>student</code>，就会出现后者的样式覆盖掉前者的同名样式的问题</p>
<p>想要解决这个问题的话，需要使用一个全新的配置项： <strong>scoped</strong></p>
<p><strong>用法：</strong>只需要在<strong>style</strong>标签中添加即可</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.demo</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: skyblue;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="样式块兼容less"><a href="#样式块兼容less" class="headerlink" title="样式块兼容less"></a>样式块兼容less</h3><p>想要在<strong>style</strong>块中兼容<strong>less</strong>，那么就需要在<strong>style</strong>标签里面添加 <strong>lang</strong>属性，写法如下：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">&quot;less&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css"><span class="selector-class">.demo</span>&#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">background-color</span>: orange;</span></span><br><span class="line"><span class="language-css">  <span class="selector-class">.sex</span>&#123;</span></span><br><span class="line"><span class="language-css">    <span class="attribute">background-color</span>: green;</span></span><br><span class="line"><span class="language-css">  &#125;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意：直接保存可能会报错，因为没有安装<strong>webpack</strong>的 <strong>less</strong>-<strong>loader</strong>插件</p>
<p>使用 <code>npm i less-loader</code>即可</p>
<p>*不写lang属性默认就是css</p>
<h3 id="组件化编码流程（通用）"><a href="#组件化编码流程（通用）" class="headerlink" title="组件化编码流程（通用）"></a>组件化编码流程（通用）</h3><ol>
<li>实现静态组件：抽取组件。使用组件实现静态页面效果</li>
<li>展示动态数据：<ul>
<li>数据的类型、名称是什么？</li>
<li>数据保存在哪个组件？</li>
</ul>
</li>
<li>交互——从绑定事件监听开始</li>
</ol>
<h2 id="TodoList案例"><a href="#TodoList案例" class="headerlink" title="TodoList案例"></a>TodoList案例</h2><p>代码下载：<a target="_blank" rel="noopener" href="https://minikanominikano.cn/wp-content/uploads/2022/08/todo.zip">https://MiniKanoMiniKano.cn/wp-content/uploads/2022/08/todo.zip</a></p>
<h3 id="总结案例"><a href="#总结案例" class="headerlink" title="总结案例"></a>总结案例</h3><ol>
<li>组件化编码流程：<ul>
<li>拆分静态组件：组件要按照功能点拆分，命名不要与html元素冲突</li>
<li>实现动态组件：考虑好数据的存放位置，数据是一个组件再用，还是一些组件再用：<ul>
<li>一个组件再用，放在组件自身就行</li>
<li>一些组件再用：放在他们的共同的父组件上（状态提升）</li>
</ul>
</li>
<li>实现交互：从绑定事件开始</li>
</ul>
</li>
<li>props适用于：<ul>
<li>父组件 &#x3D;&#x3D;》 子组件 通信</li>
<li>子组件 &#x3D;&#x3D;》 父组件 通信（要求父先给子一个函数）</li>
</ul>
</li>
<li>使用v-model时要切记：v-model绑定的值不能是props传过来的值，因为props是不可以被修改的</li>
<li>props传过来的若是对象类型的值，修改对象中的属性时Vue不会报错，但不推荐这么做</li>
<li>可以通过本地存储进行保存状态</li>
</ol>
<h2 id="组件的自定义事件"><a href="#组件的自定义事件" class="headerlink" title="组件的自定义事件"></a>组件的自定义事件</h2><ol>
<li><p>一种组件间通信的方式，适用于：子组件&#x3D;&#x3D;&#x3D;》 父组件</p>
</li>
<li><p>使用场景：A是父组件，B是子组件，B想给A传数据，那么就要在A中给B绑定自定义事件（事件的回调在A中）&#x2F;</p>
</li>
<li><p>解绑自定义事件：</p>
<ol>
<li><p>第一种方式，在父组件中：<code>&lt;Demo @MiniKano=&quot;test&quot;/&gt;</code> 或者 <code>&lt;Demo v-on:MiniKano=&quot;test&quot;&gt;</code></p>
</li>
<li><p>第二种方式，在父组件中:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="title class_">Demo</span> ref=<span class="string">&quot;dd&quot;</span>/&gt;</span><br><span class="line">....</span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">dd</span>.$on(<span class="string">&#x27;MiniKano&#x27;</span>,<span class="variable language_">this</span>.<span class="property">test</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>若想让自定义事件只能触发一次，只需要加上<code>once</code>修饰符或者<code>$once</code>方法</p>
</li>
<li><p>触发自定义事件：<code>this.$emit(&#39;MiniKano&#39;,传参)</code></p>
</li>
<li><p>解绑自定义事件:<code>this.$off(&#39;MiniKano&#39;)</code> 不写参数则为全部解绑，多参数需写成数组形式</p>
</li>
<li><p>组件上也可以绑定原生DOM事件，但需要native修饰符，例如<code>&lt;Student @click.native=&quot;show&quot;/&gt;</code></p>
</li>
<li><p>注意：通过<code>this.$refs.xxx.$on(xxx,回调函数)</code>绑定自定义事件时，回调要门配置在method中，要么使用箭头函数，总是需要注意this的指向</p>
</li>
</ol>
</li>
</ol>
<p><strong>P.S: 组件的自定义事件可以在Todolist中用，替换掉全选等方法</strong></p>
<h2 id="全局事件总线"><a href="#全局事件总线" class="headerlink" title="全局事件总线"></a>全局事件总线</h2><p><strong>全局事件总线(Global Event Bus)：可以实现任意组件之间的互相通信，数据传递</strong></p>
<p><em>全局事件总线，其实不是一个特定的接口或者方法，而是前人总结出来的一种实现组件间互相通信的结构</em></p>
<h3 id="原理与使用"><a href="#原理与使用" class="headerlink" title="原理与使用"></a>原理与使用</h3><p>由于Vue有一个内置的关系：<code>VueComponent.prototype.__proto__ === Vue.prototype</code><br>我们可以直接利用这个内置关系，在Vue.prototype上创建一个总线的载体<code>$bus</code>（一般为vm的实例对象）</p>
<p>安装全局事件总线：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    ......</span><br><span class="line">    <span class="comment">//生命周期最开始的钩子</span></span><br><span class="line">    <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//this就是这个vm</span></span><br><span class="line">        <span class="comment">//事件总线$bus是我们自己定义的</span></span><br><span class="line">        <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$bus</span> = <span class="variable language_">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>使用事件总线：</p>
<p>1.接收数据：A组件想要接收数据，则在A组件中给$bus绑定自定义事件，事件的回调<strong>留在A组件自身</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">methods</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">demo</span>(<span class="params">data</span>)&#123;......&#125;</span><br><span class="line">&#125;</span><br><span class="line">......</span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$bus</span>.$on(<span class="string">&#x27;xxx&#x27;</span>,<span class="variable language_">this</span>.<span class="property">demo</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.提供数据：<code>this.$bus.$emit(&#39;xxx&#39;,数据)</code></p>
<p>P.S:最好在beforeDestroy钩子中，用$off去解绑当前组件所用到的事件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//School.vue</span></span><br><span class="line">...</span><br><span class="line"><span class="title function_">beforeDestroy</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//用完就销毁，防止占用总线</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$bus</span>.$off(<span class="string">&#x27;hello&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>全局事件总线，其实就是在普通的自定义事件上，稍作修改，把事件绑定在了一个所有组件都能访问的原型对象（VM）上而已</p>
<h2 id="消息订阅与发布（pubsub）"><a href="#消息订阅与发布（pubsub）" class="headerlink" title="消息订阅与发布（pubsub）"></a>消息订阅与发布（pubsub）</h2><h3 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h3><p>pubsub 是一种组件间通信的方式，适用于任意组件间通信。</p>
<h3 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h3><ol>
<li><p>安装pubsub：<code>npm i pubsub-js</code></p>
</li>
<li><p>引入：<code>import pubsub from pubsub-js</code></p>
</li>
<li><p>接收数据：A组件想要接收数据，则在A组件中订阅消息，订阅的<strong>回调留在A组件自身</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">methods</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">demo</span>(<span class="params">data</span>)&#123;...&#125;</span><br><span class="line">&#125;</span><br><span class="line">......</span><br><span class="line"><span class="title function_">mounted</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">pid</span> = pubsub.<span class="title function_">subscrible</span>(<span class="string">&#x27;xxx&#x27;</span>,<span class="variable language_">this</span>.<span class="property">demo</span>)<span class="comment">//订阅消息</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>提供数据：<code>pubsub.publish(&#39;xx&#39;,数据)</code></p>
</li>
<li><p>最好在beforeDestroy钩子中，用<code>pubsub.unscrible(pid)</code>去 <strong>取消订阅</strong></p>
</li>
</ol>
<p><strong>这个组件能实现类似全局事件总线的功能，但是相比全局事件总线来说，需要手动安装，没有全局事件总线的原生优势</strong></p>
<h2 id="nextTick"><a href="#nextTick" class="headerlink" title="$nextTick"></a>$nextTick</h2><p><em>这个是在TodoList项目中使用的一个新的方法,是生命周期里的钩子</em></p>
<p><strong>语法</strong>：<code>this.$nextTick(回调函数)</code></p>
<p><strong>作用</strong>：在下一次DOM更新结束后执行指定的回调方法</p>
<p><strong>nextTick主要是用于处理数据动态变化后，DOM还未及时更新的问题，用nextTick就可以获取数据更新后最新DOM的变化：</strong></p>
<p>在Todolist项目中，当我们点击编辑按钮时，会出现一个input框，我们就需要在点击编辑按钮后立马获取input的焦点,如果直接在编辑按钮的点击事件中focus input框的话，是无效的，<strong>因为Vue要先执行完method里面的东西之后，才会更新DOM文档</strong></p>
<p>这时候就会想到，可以用异步代码去滞后执行自动对焦。比如<strong>定时器</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">edit</span>(<span class="params">todo</span>)&#123;</span><br><span class="line">    ......</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">autoFocus</span>.<span class="title function_">focus</span>();<span class="comment">//自动对焦</span></span><br><span class="line">    &#125;,<span class="number">0</span>)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>不过使用定时器的话，显然不是很优雅()</p>
<p>当然是有更合理的解决方法的，Vue给我们提供了一个方法<code>#nextTick</code> 用nextTick就可以在模板更新后调用预设的方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">edit</span>(<span class="params">todo</span>)&#123;</span><br><span class="line">    ......</span><br><span class="line">    <span class="variable language_">this</span>.$nextTick(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">$refs</span>.<span class="property">autoFocus</span>.<span class="title function_">focus</span>();<span class="comment">//自动对焦</span></span><br><span class="line">    &#125;)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h2 id="Vue封装的过渡与动画"><a href="#Vue封装的过渡与动画" class="headerlink" title="Vue封装的过渡与动画"></a>Vue封装的过渡与动画</h2><ol>
<li><p><strong>作用：在插入、更新、或移除DOM元素时，在核实的时候给元素添加样式类名</strong></p>
</li>
<li><p><strong>图示:</strong><br><img src="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/image-20220903003656759.png" alt="image-20220903003656759"></p>
</li>
<li><p><strong>写法：</strong></p>
<ol>
<li><p>准备好样式：</p>
<ul>
<li>元素进入的样式：<ol>
<li>v-enter:进入的起点</li>
<li>v-enter-active：进入过程中</li>
<li>v-rnter-to：进入的终点</li>
</ol>
</li>
<li>元素离开的样式：<ol>
<li>v-leave:离开的起点</li>
<li>v-leave-active：离开过程中</li>
<li>v-leave-to：离开的终点</li>
</ol>
</li>
</ul>
</li>
<li><p>样式写法示例：</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*vue能自动识别的样式*/</span></span><br><span class="line"><span class="selector-class">.MiniKanoMiniKano-enter-active</span>,<span class="selector-class">.MiniKanoMiniKano-leave-active</span>&#123;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">5s</span> linear;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*进入的起点*/</span><span class="comment">/*离开的终点*/</span></span><br><span class="line"><span class="selector-class">.MiniKanoMiniKano-enter</span>,<span class="selector-class">.MiniKanoMiniKano-leave-to</span>&#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">100%</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*进入的终点*/</span><span class="comment">/*离开的起点*/</span></span><br><span class="line"><span class="selector-class">.MiniKanoMiniKano-enter-to</span>,<span class="selector-class">.MiniKanoMiniKano-leave</span>&#123;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用<transition>包裹要过度的元素，并配置name属性：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&quot;MiniKanoMiniKano&quot;</span> <span class="attr">appear</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>HELLO<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>备注：若有多个元素需要过度，则需要使用：<transition-group>，且每个元素都要指定key值：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition-group</span> <span class="attr">name</span>=<span class="string">&quot;MiniKanoMiniKano&quot;</span> <span class="attr">appear</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span> <span class="attr">class</span>=<span class="string">&quot;gogogo&quot;</span> <span class="attr">key</span>=<span class="string">&quot;1&quot;</span>&gt;</span>HELLO<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">&quot;!isShow&quot;</span> <span class="attr">class</span>=<span class="string">&quot;gogogo&quot;</span> <span class="attr">key</span>=<span class="string">&quot;2&quot;</span>&gt;</span>HELLO<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition-group</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>想让元素默认是显示，可以添加 appear 属性</p>
</li>
<li><p>样式的名字默认是v开头，如果想自定义样式头，可以在标签上加上name属性即可</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">&quot;MiniKanoMiniKano&quot;</span> <span class="attr">appear</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span> <span class="attr">class</span>=<span class="string">&quot;gogogo&quot;</span> &gt;</span>HELLO<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">h1</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: skyblue;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="comment">/*vue能自动识别的样式*/</span></span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.MiniKanoMiniKano-enter-active</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">animation</span>: MiniKano .<span class="number">5s</span></span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="selector-class">.MiniKanoMiniKano-leave-active</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">animation</span>: MiniKano .<span class="number">5s</span> reverse;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css">    <span class="keyword">@keyframes</span> MiniKano &#123;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">from</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-<span class="number">100%</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">to</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">transform</span>: <span class="built_in">translateX</span>(<span class="number">0px</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    &#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>使用插件控制过渡（animate.css）：<br>首先需要安装插件：<code>npm install animate.css</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//由于是js，所以不需要from什么什么的</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;animate.css&#x27;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用animate.css库中使用 enter-animate-calss --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">transition-group</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">name</span>=<span class="string">&quot;animate__animated animate__bounce&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">appear</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">enter-active-class</span>=<span class="string">&quot;animate__bounceInLeft&quot;</span> </span></span><br><span class="line"><span class="tag">                  <span class="attr">leave-active-class</span>=<span class="string">&quot;animate__backOutLeft&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span> <span class="attr">class</span>=<span class="string">&quot;gogogo&quot;</span> <span class="attr">key</span>=<span class="string">&quot;1&quot;</span>&gt;</span>HELLO<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-show</span>=<span class="string">&quot;!isShow&quot;</span> <span class="attr">class</span>=<span class="string">&quot;gogogo&quot;</span> <span class="attr">key</span>=<span class="string">&quot;2&quot;</span>&gt;</span>HELLO<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition-group</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<h2 id="Vue代理"><a href="#Vue代理" class="headerlink" title="Vue代理"></a>Vue代理</h2><p><strong>当我们在脚手架中编写ajax请求的时候，与服务器通信，有时候会遇到跨域问题</strong></p>
<p><strong>一般的做法就是在后端进行处理，设置响应头，或者使用cors插件进行跨域处理</strong></p>
<p>但我们也可以使用 <strong>代理服务器</strong> 的方式进行间接的请求</p>
<p><strong>代理服务器请求原理：</strong></p>
<blockquote>
<p>因为ajax请求有跨域问题，但是代理服务器与后端服务器之间的通信并不是使用ajax进行传输的，所以自然不会存在跨域的问题</p>
</blockquote>
<h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><ul>
<li><p>在vue.config.js中添加一个新属性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 开启代理服务器</span></span><br><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: <span class="string">&#x27;后端服务器地址&#x27;</span><span class="comment">//例如：http://api.MiniKanoMiniKano.cn</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这会告诉开发服务器将任何未知请求 (<strong>没有匹配到静态文件的请求</strong>) 代理到<code>后端服务器地址</code>。</p>
</li>
<li><p>把需要ajax请求的地址统一换为脚手架的服务器地址：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">axios.<span class="title function_">get</span>(<span class="string">&#x27;http://localhost:8080/student&#x27;</span>).<span class="title function_">then</span>(</span><br><span class="line">    <span class="function"><span class="params">response</span> =&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求成功&#x27;</span>,response.<span class="property">data</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="params">error</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;请求失败&#x27;</span>,error.<span class="property">message</span>);</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果你想要更多的代理控制行为，也可以使用一个 <code>path: options</code> 成对的对象。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: &#123;<span class="comment">//匹配所有以’/api‘开头的请求路径</span></span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;&lt;url&gt;&#x27;</span>,<span class="comment">//代理目标的基础路径</span></span><br><span class="line">        <span class="attr">ws</span>: <span class="literal">true</span>,<span class="comment">//websocket</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span> <span class="comment">//修改请求源</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&#x27;/foo&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;&lt;other_url&gt;&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：有时设置代理的时候，需要去掉请求头 比如上面的<code>&#39;/api&#39;</code> 防止带入到后端服务器造成404</strong><br>使用<code>pathRewrite</code> 重写请求地址，格式：<code>pathRewrite:&#123;&#39;正则表达式&#39;,&#39;替换字符串&#39;&#125;</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">proxy</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;&lt;url&gt;&#x27;</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">            <span class="string">&#x27;^/api&#x27;</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>这样就可以解决跨域ajax请求的问题了</strong></p>
<h2 id="github搜索框案例"><a href="#github搜索框案例" class="headerlink" title="github搜索框案例"></a>github搜索框案例</h2><p>案例下载：[bdbtn]<a target="_blank" rel="noopener" href="https://minikanominikano.cn/wp-content/uploads/2022/08/fontstage.zip[/bdbtn">https://MiniKanoMiniKano.cn/wp-content/uploads/2022/08/fontstage.zip[/bdbtn</a>]</p>
<h2 id="Vue-resource"><a href="#Vue-resource" class="headerlink" title="Vue-resource"></a>Vue-resource</h2><p><strong>注意，此插件已过时</strong></p>
<p>如果不想用axios发送http请求，也可以使用一个Vue插件：Vue-resource</p>
<p>安装：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vue-resource</span><br></pre></td></tr></table></figure>

<p>引入：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入，使用资源文件</span></span><br><span class="line"><span class="keyword">import</span> vueResource <span class="keyword">from</span> <span class="string">&#x27;vue-resource&#x27;</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(vueResource);</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//不使用axios 使用插件带的$http 是一样的效果，不过用的少</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$http</span>.<span class="title function_">get</span>(<span class="string">`xxx`</span>).<span class="title function_">then</span>(</span><br><span class="line">    <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h2 id="slot-插槽"><a href="#slot-插槽" class="headerlink" title="slot 插槽"></a>slot 插槽</h2><blockquote>
<p>当我们想要在同一个组件里面展示不同内容的时候，除了使用v-if之外，还可以使用<strong>插槽</strong> 来分发内容</p>
</blockquote>
<p>作用：让父组件可以向子组件指定位置插入html结构，也是一种组件间通信方式，适用于 <strong>父组件 &#x3D;&#x3D;&#x3D;》子组件</strong></p>
<p><strong>分类： 默认插槽，具名插槽，作用域插槽</strong></p>
<h3 id="默认插槽"><a href="#默认插槽" class="headerlink" title="默认插槽"></a>默认插槽</h3><p>我们可以通过定义一个<code>&lt;slot&gt;&lt;/slot&gt;</code>来作为一个插槽</p>
<p>使用方法：</p>
<p>App.vue</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Category</span> <span class="attr">title</span>=<span class="string">&quot;美食&quot;</span> <span class="attr">:ListData</span>=<span class="string">&quot;foods&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;xxx&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Category</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Category</span> <span class="attr">title</span>=<span class="string">&quot;游戏&quot;</span> <span class="attr">:ListData</span>=<span class="string">&quot;games&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Category</span> <span class="attr">title</span>=<span class="string">&quot;电影&quot;</span> <span class="attr">:ListData</span>=<span class="string">&quot;films&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">video</span> <span class="attr">src</span>=<span class="string">&quot;xxxxx&quot;</span> <span class="attr">muted</span>=<span class="string">&quot;muted&quot;</span> <span class="attr">autoplay</span>=<span class="string">&quot;autoplay&quot;</span> <span class="attr">loop</span>=<span class="string">&quot;loop&quot;</span>&gt;</span></span><br><span class="line">        您的浏览器不支持HTML5标签。</span><br><span class="line">    <span class="tag">&lt;/<span class="name">video</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Category</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Category.vue</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 定义一个插槽（挖个坑等待父级填充，如果父级有填充，则使用父级的结构，没有就使用插槽内的结构） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">slot</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in ListData&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="具名插槽"><a href="#具名插槽" class="headerlink" title="具名插槽"></a>具名插槽</h3><p>有时我们需要多个插槽，默认插槽显然已经不能满足多插槽的使用情景，下面将引入具名插槽</p>
<p>使用方法：</p>
<p>App.vue</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Category</span> <span class="attr">title</span>=<span class="string">&quot;美食&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 自定义插槽名 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">slot</span>=<span class="string">&quot;center&quot;</span> <span class="attr">src</span>=<span class="string">&quot;XXX&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">slot</span>=<span class="string">&quot;footer&quot;</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>更多美食<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Category</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Category.vue</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 定义一个插槽（挖个坑等待父级填充，如果父级有填充，则使用父级的结构，没有就使用插槽内的结构） --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;center&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">&quot;footer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="作用域插槽"><a href="#作用域插槽" class="headerlink" title="作用域插槽"></a>作用域插槽</h3><p>理解：数据在组件的自身，但根据数据生成的结构需要<strong>组件的使用者</strong>来决定，（games数据在category组件中，但使用数据所遍历出来的结构由app组件决定）</p>
<p>2.具体编码：</p>
<p>App.vue</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Category</span> <span class="attr">title</span>=<span class="string">&quot;游戏&quot;</span> &gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 子组件传递的数据包装了一层对象 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">scope</span>=<span class="string">&quot;scop&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ul</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in scop.games&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h3</span>&gt;</span>&#123;&#123;scop.msg&#125;&#125;<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Category</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Category</span> <span class="attr">title</span>=<span class="string">&quot;游戏&quot;</span> &gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 还可以支持解构赋值 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">scope</span>=<span class="string">&quot;&#123;games&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ol</span>&gt;</span>  </span><br><span class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in games&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Category</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">Category</span> <span class="attr">title</span>=<span class="string">&quot;游戏&quot;</span> &gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- scope的另一种写法，slot-scope --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">slot-scope</span>=<span class="string">&quot;&#123;games&#125;&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h4</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in games&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;index&quot;</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Category</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Category.vue:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 使用作用域插槽，可以在app里面访问到这个组件传过去的东西 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">slot</span> <span class="attr">:games</span>=<span class="string">&quot;games&quot;</span> <span class="attr">msg</span>=<span class="string">&quot;hello&quot;</span>&gt;</span>我是默认内容<span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">...</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span>&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">games</span>:[<span class="string">&#x27;GTA5&#x27;</span>,<span class="string">&#x27;CSGO&#x27;</span>,<span class="string">&#x27;原&#x27;</span>,<span class="string">&#x27;MC&#x27;</span>],</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">...</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>总结：这三种插槽可以按照实际情况配合使用</strong></p>
<h2 id="VueX"><a href="#VueX" class="headerlink" title="VueX"></a>VueX</h2><h3 id="vueX是什么"><a href="#vueX是什么" class="headerlink" title="vueX是什么"></a>vueX是什么</h3><ol>
<li>概念：专门在Vue中实现集中式状态（数据）管理的一个Vue组件，对vue应用中多个组件的共享状态进行集中式管理（读&#x2F;写），也是一种组件间通信的方式，且适用于任意组件间的通信。</li>
</ol>
<h3 id="什么时候使用VueX"><a href="#什么时候使用VueX" class="headerlink" title="什么时候使用VueX"></a>什么时候使用VueX</h3><ol>
<li>多个组件依赖于同一个状态</li>
<li>来自不同组件的行为需要变更同一个状态</li>
</ol>
<h3 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h3><p><img src="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/vuex.png" alt="vuex"></p>
<p>上图是VueX的 “状态管理模式”：</p>
<p>这个状态自管理应用包含以下几个部分：</p>
<ul>
<li><strong>state</strong>，驱动应用的数据源（公共数据）；</li>
<li><strong>view</strong>，以声明方式将 <strong>state</strong> 映射到视图；</li>
<li><strong>actions</strong>，响应在 <strong>view</strong> 上的用户输入导致的状态变化（类似中间件）。</li>
</ul>
<p>其实就是类似于后端开发中的三层结构：<strong>视图层 业务层 持久层</strong></p>
<h4 id="工作流程"><a href="#工作流程" class="headerlink" title="工作流程"></a>工作流程</h4><ol>
<li>组件请求数据，使用 <code>dispatch(&#39;name&#39;,&#39;MiniKano&#39;)</code>,请求一个变量名(key)为name，值为‘MiniKano’的<strong>函数</strong></li>
<li>dispatch函数会到Actions中，这里类似中间件，可以在这里发送后端ajax请求，进行数据处理等操作，之后Actions会执行<code>commit(&#39;name&#39;,&#39;MiniKano&#39;)</code>到Mutations</li>
<li>commit函数到达Mutations中，会进行查找key为‘name’对应的<strong>函数</strong>，在这个函数内，存放了<strong>state</strong> 中的公共数据，进行Mutate操作，也就是 修改&#x2F;处理 数据</li>
<li>在Mutate操作，修改数据成功时，Vue会渲染修改后的DOM到视图中，这样就完成了修改数据的流程</li>
</ol>
<p><strong>注意：Actions如果不进行特殊操作，仅仅只是传递数据，可以直接在Vue Component步骤时候直接调用<code>commit(&#39;name&#39;,&#39;MiniKano&#39;)</code>  就可以跳过Actions阶段</strong></p>
<h3 id="搭建VueX环境"><a href="#搭建VueX环境" class="headerlink" title="搭建VueX环境"></a>搭建VueX环境</h3><h4 id="安装VueX"><a href="#安装VueX" class="headerlink" title="安装VueX"></a>安装VueX</h4><p><strong>注意：vue2中需要使用VueX的3版本，Vue3中需要使用VueX的4版本</strong></p>
<p>Vue2：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vuex@3</span><br></pre></td></tr></table></figure>

<p>Vue3:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vuex</span><br></pre></td></tr></table></figure>

<h4 id="使用VueX"><a href="#使用VueX" class="headerlink" title="使用VueX"></a>使用VueX</h4><p><strong>创建文件:</strong><code>src/store/index.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//该文件用于创建Vue中最为核心的store</span></span><br><span class="line"><span class="comment">//引入Vue</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="comment">//在这引入可以避免在use Vuex之前就创建了store造成报错</span></span><br><span class="line"><span class="comment">//引入Vuex</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Vuex</span> <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"><span class="comment">//使用Vuex</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">Vuex</span>);</span><br><span class="line"><span class="comment">//准备actions 用于响应组件中的动作</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;&#125;</span><br><span class="line"><span class="comment">//准备mutations 用于操作数据（）</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;&#125;</span><br><span class="line"><span class="comment">//准备state 用于存储数据</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;&#125;</span><br><span class="line"><span class="comment">//准备一个getters ，用于将state中的数据进行加工</span></span><br><span class="line"><span class="keyword">const</span> getters = &#123;&#125;</span><br><span class="line"><span class="comment">//准备store</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    actions,</span><br><span class="line">    mutations,</span><br><span class="line">    state,</span><br><span class="line">    getters</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//导出</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>

<p><strong>在<code>main.js</code>中创建vm时传入<code>store</code>配置项</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="property">config</span>.<span class="property">productionTip</span> = <span class="literal">false</span></span><br><span class="line"><span class="comment">//引入插件</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueResource</span> <span class="keyword">from</span> <span class="string">&#x27;vue-resource&#x27;</span>;</span><br><span class="line"><span class="comment">//使用插件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">VueResource</span>);</span><br><span class="line"><span class="comment">//引入store</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span>;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">    store, <span class="comment">//挂载为了$store</span></span><br><span class="line">    <span class="title function_">beforeCreate</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">Vue</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">$bus</span> = <span class="variable language_">this</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>组件中读取Vuex中的数据：<code>$store.state.sum</code></p>
<p>组件中修改Vuex中的数据：<code>$store.dispatch(&#39;action中的方法名&#39;,数据)</code> 或者 <code>$store.commit(&#39;action中的方法名&#39;,数据)</code></p>
<h3 id="getters的使用"><a href="#getters的使用" class="headerlink" title="getters的使用"></a>getters的使用</h3><p>在<code>src/store/index.js</code>中添加getters对象即可</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.......</span><br><span class="line"><span class="comment">//准备一个getters ，用于将state中的数据进行加工</span></span><br><span class="line"><span class="keyword">const</span> getters = &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line">    ......,</span><br><span class="line">    getters</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>使用getters：<code>$store.getters.属性名</code></p>
<h3 id="四个map方法的使用"><a href="#四个map方法的使用" class="headerlink" title="四个map方法的使用"></a>四个map方法的使用</h3><p><strong>mapState方法：</strong>用于帮助我们映射state中的数据为计算属性</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>:&#123;</span><br><span class="line">    <span class="comment">//使用mapState，，对象解构，因为mapState返回的是一个对象，用于映射状态对象属性</span></span><br><span class="line">    <span class="comment">//借助mapState读取state中的属性</span></span><br><span class="line">    <span class="comment">//..mapState(&#123;sum:&#x27;sum&#x27;,nickname:&#x27;nickname&#x27;,age:&#x27;age&#x27;&#125;),</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//数组写法，如果需要映射的名称是一样的话</span></span><br><span class="line">    ...<span class="title function_">mapState</span>([<span class="string">&#x27;sum&#x27;</span>,<span class="string">&#x27;nickname&#x27;</span>,<span class="string">&#x27;age&#x27;</span>]),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>mapGetters 方法</strong>：用于帮助我们映射<code>getters</code>中的数据为计算属性</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">computed</span>:&#123;</span><br><span class="line">    <span class="comment">//mapGetters也是一样的，借助它读取getters里面的属性</span></span><br><span class="line">    <span class="comment">// ...mapGetters(&#123;bigSum:&#x27;bigSum&#x27;&#125;),</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//数组写法</span></span><br><span class="line">    ...<span class="title function_">mapGetters</span>([<span class="string">&#x27;bigSum&#x27;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>mapActions方法：</strong>用于帮助我们生成<code>actions</code>对话的方法，即：包含<code>$store.dispatch(xxx)</code>函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">     <span class="comment">//靠mapActions生成：incrementOdd，incrementWait（对象形式）</span></span><br><span class="line">     ...<span class="title function_">mapActions</span>(&#123;<span class="attr">incrementOdd</span>:<span class="string">&#x27;addOdd&#x27;</span>,<span class="attr">incrementWait</span>:<span class="string">&#x27;addWait&#x27;</span>&#125;),</span><br><span class="line">     <span class="comment">//靠mapActions生成：incrementOdd，incrementWait（数组形式），前提是方法和属性名相同</span></span><br><span class="line">     ...<span class="title function_">mapActions</span>([<span class="string">&#x27;addOdd&#x27;</span>,<span class="string">&#x27;addWait&#x27;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>**mapMutations方法:**用于帮助我们生成<code>mutations</code>对话的方法，即:包含<code>$store.commit(xxx)</code>函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">methods</span>:&#123;</span><br><span class="line">    <span class="comment">//对象展开写法，这样的写法无法写参数，所以在使用的时候需要手动传入参数</span></span><br><span class="line">    <span class="comment">//方法会调用commit去联系mutation</span></span><br><span class="line">    ...<span class="title function_">mapMutations</span>(&#123;<span class="attr">increment</span>:<span class="string">&#x27;ADD&#x27;</span>,<span class="attr">decrement</span>:<span class="string">&#x27;DECR&#x27;</span>&#125;),</span><br><span class="line"></span><br><span class="line">    <span class="comment">//数组写法，方法会调用commit去联系mutation,前提是名字需要一致</span></span><br><span class="line">    ...<span class="title function_">mapMutations</span>([<span class="string">&#x27;ADD&#x27;</span>,<span class="string">&#x27;DECR&#x27;</span>])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em>备注：mapActions与Mutations使用时，若需要传递参数需要：在模板中绑定事件时传递好参数，否则参数是事件对象</em></p>
<h3 id="VueX模块化与namespace"><a href="#VueX模块化与namespace" class="headerlink" title="VueX模块化与namespace"></a>VueX模块化与namespace</h3><p><strong>目的：让代码更好维护，让多种数据分类更加明确</strong></p>
<p>修改<code>store.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> countAbout = &#123;</span><br><span class="line">    <span class="attr">namespaced</span>:<span class="literal">true</span>,<span class="comment">//开启明明空间</span></span><br><span class="line">    <span class="attr">state</span>:&#123;<span class="attr">x</span>:<span class="number">1</span>&#125;,</span><br><span class="line">    <span class="attr">mutations</span>:&#123;...&#125;,</span><br><span class="line">    <span class="attr">actions</span>:&#123;...&#125;,</span><br><span class="line"> <span class="attr">getters</span>:&#123;</span><br><span class="line">        <span class="title function_">bigSum</span>(<span class="params">state</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> state.<span class="property">sum</span> *<span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> personAbout = &#123;</span><br><span class="line"> <span class="attr">namespaced</span>:<span class="literal">true</span>,<span class="comment">//开启明明空间</span></span><br><span class="line">    <span class="attr">state</span>:&#123;...&#125;,</span><br><span class="line">    <span class="attr">mutations</span>:&#123;...&#125;,</span><br><span class="line">    <span class="attr">actions</span>:&#123;...&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> <span class="title class_">Vuex</span>.<span class="title class_">Store</span>(&#123;</span><br><span class="line"> <span class="attr">modules</span>:&#123;</span><br><span class="line">  countAbout,</span><br><span class="line">  personAbout</span><br><span class="line"> &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><strong>开启命名空间后，组件中读取state数据</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一，直接自己读取</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">state</span>.<span class="property">personAbout</span>.<span class="property">list</span></span><br><span class="line"><span class="comment">//方式二，借助mapState读取</span></span><br><span class="line">...<span class="title function_">mapState</span>(<span class="string">&#x27;countAbout&#x27;</span>,[<span class="string">&#x27;sum&#x27;</span>,<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;age&#x27;</span>]);</span><br></pre></td></tr></table></figure>

<p><strong>开启命名空间后，组件中读取getters数据</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一，直接自己读取</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="property">getters</span>[<span class="string">&#x27;personAbout/firstPersonName&#x27;</span>]</span><br><span class="line"><span class="comment">//方式二，借助mapGetters读取</span></span><br><span class="line">...<span class="title function_">mapGetters</span>(<span class="string">&#x27;countAbout&#x27;</span>,[<span class="string">&#x27;bigSum&#x27;</span>])</span><br></pre></td></tr></table></figure>

<p><strong>开启命名空间后，组件调用dispatch</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一，直接自己dispatch</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;personAbout/addPersonNotWang&#x27;</span>,personObj)</span><br><span class="line"><span class="comment">//方式二，借助mapActions</span></span><br><span class="line">...<span class="title function_">mapActions</span>(<span class="string">&#x27;countAbout&#x27;</span>,&#123;<span class="attr">incrementOdd</span>:<span class="string">&#x27;addOdd&#x27;</span>,<span class="attr">incrementWait</span>:<span class="string">&#x27;addWait&#x27;</span>&#125;),</span><br></pre></td></tr></table></figure>

<p><strong>开启命名空间后，组件调用commit</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一，直接自己commit</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">$store</span>.<span class="title function_">commit</span>(<span class="string">&#x27;personAbout/ADD_PERSON&#x27;</span>,personObj)</span><br><span class="line"><span class="comment">//方式二，借助mapMutations</span></span><br><span class="line">...<span class="title function_">mapMutations</span>(<span class="string">&#x27;countAbout&#x27;</span>,&#123;<span class="attr">increment</span>:<span class="string">&#x27;ADD&#x27;</span>,<span class="attr">decrement</span>:<span class="string">&#x27;DECR&#x27;</span>&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="求和案例-VueX"><a href="#求和案例-VueX" class="headerlink" title="求和案例(VueX)"></a>求和案例(VueX)</h3><p><strong>代码下载：</strong>[bdbtn]<a target="_blank" rel="noopener" href="https://minikanominikano.cn/wp-content/uploads/2022/08/26-%E6%B1%82%E5%92%8C%E6%A1%88%E4%BE%8B.zip[/bdbtn">https://MiniKanoMiniKano.cn/wp-content/uploads/2022/08/26-求和案例.zip[/bdbtn</a>]</p>
<h2 id="Vue-router"><a href="#Vue-router" class="headerlink" title="Vue-router"></a>Vue-router</h2><h3 id="相关理解"><a href="#相关理解" class="headerlink" title="相关理解"></a>相关理解</h3><h4 id="vue-router-的理解"><a href="#vue-router-的理解" class="headerlink" title="vue-router 的理解"></a>vue-router 的理解</h4><p>是一个Vue的插件库，专门用来实现SPA应用</p>
<h4 id="对SPA应用的理解"><a href="#对SPA应用的理解" class="headerlink" title="对SPA应用的理解"></a>对SPA应用的理解</h4><ol>
<li>单页 Web 应用 （single page web application，SPA）</li>
<li>整个应用<strong>只有一个完整的页面</strong>。</li>
<li>点击页面中的导航链接<strong>不会刷新</strong>页面，只会做页面的<strong>局部刷新</strong>。</li>
<li>数据需要通过ajax请求获取。</li>
</ol>
<h4 id="路由的理解"><a href="#路由的理解" class="headerlink" title="路由的理解"></a>路由的理解</h4><ol>
<li>什么是路由？<ol>
<li>一个路由就是一组映射关系（key - value）</li>
<li>key为路径，value可能是function或component</li>
</ol>
</li>
<li>路由的分类<ol>
<li>后端路由：<ol>
<li>理解：value 是 function，用于处理客户端提交的请求</li>
<li>工作过程：服务器接收到一个请求时，根据<strong>请求路径</strong>找到匹配的<strong>函数</strong>来处理请求，返回响应数据</li>
</ol>
</li>
<li>前端路由：<ol>
<li>理解：value 是 component，用于展示页面内容</li>
<li>工作过程：当浏览器路径改变时，对应的组件就会显示。</li>
</ol>
</li>
</ol>
</li>
</ol>
<h3 id="路由的基本使用"><a href="#路由的基本使用" class="headerlink" title="路由的基本使用"></a>路由的基本使用</h3><ol>
<li><p>安装vue-router，命令<code>npm i vue-router</code>(vue2安装 <code>vue-router@3</code>)</p>
</li>
<li><p>引用并应用插件：<code>vue.use(VueRouter)</code></p>
</li>
<li><p>编写router配置项（<code>/src/router/index.js</code>）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 该文件专门用于创建整个应用的路由器</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">VueRouter</span> <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&#x27;../components/About&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&#x27;../components/Home&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//创建路由器,并共享出去</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="attr">routes</span>: [&#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">About</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">Home</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在<code>main.js</code>中注册路由</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">    <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>),</span><br><span class="line">    <span class="comment">//注册路由</span></span><br><span class="line">    <span class="comment">// router: router</span></span><br><span class="line">    router</span><br><span class="line">&#125;).$mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>实现切换（active-class可配置高亮样式）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=<span class="string">&quot;/about&quot;</span> <span class="keyword">class</span>=<span class="string">&quot;list-group-item&quot;</span> active-<span class="keyword">class</span>=<span class="string">&quot;active&quot;</span>&gt;<span class="title class_">About</span>&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>指定展示位置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-view&gt;&lt;/router-view&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>注意:</strong></p>
<ol>
<li><strong>路由vue组件一般不放到component文件夹中，而是单独放在一个叫pages的文件夹中</strong></li>
<li><strong>通过切换，’隐藏 ‘了路由组件，默认是被销毁掉的，需要的时候再去挂载</strong></li>
<li>每个组件都有自己的<code>$route</code>属性，里面存储着自己的路由信息</li>
<li>整个应用只有一个router，可以通过组件的<code>$router</code>属性获取到</li>
</ol>
<h3 id="多级路由"><a href="#多级路由" class="headerlink" title="多级路由"></a>多级路由</h3><p>配置路由规则，使用children配置项：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">routes</span>: [&#123; <span class="comment">//一级路由</span></span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">About</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123; <span class="comment">//一级路由</span></span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/home&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="title class_">Home</span>,</span><br><span class="line">            <span class="attr">children</span>: [&#123;</span><br><span class="line">                    <span class="attr">path</span>: <span class="string">&#x27;news&#x27;</span>, <span class="comment">//子路由，不加斜杠</span></span><br><span class="line">                    <span class="attr">component</span>: <span class="title class_">News</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">path</span>: <span class="string">&#x27;message&#x27;</span>, <span class="comment">//子路由</span></span><br><span class="line">                    <span class="attr">component</span>: <span class="title class_">Message</span>,</span><br><span class="line">                    <span class="attr">children</span>: [&#123;</span><br><span class="line">                        <span class="attr">path</span>: <span class="string">&#x27;detail&#x27;</span>,</span><br><span class="line">                        <span class="attr">component</span>: <span class="title class_">Detail</span></span><br><span class="line">                    &#125;]</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure>

<p>跳转（需写完整路径）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 二级路由 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">class</span>=<span class="string">&quot;list-group-item&quot;</span> <span class="attr">active-class</span>=<span class="string">&quot;active&quot;</span> <span class="attr">to</span>=<span class="string">&quot;/home/news&quot;</span>&gt;</span>News<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="路由的query参数"><a href="#路由的query参数" class="headerlink" title="路由的query参数"></a>路由的query参数</h3><ol>
<li><p>传递参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 使用query参数传参，字符串写法 --&gt;</span><br><span class="line">&lt;!-- <span class="language-xml"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;`/home/message/detail?id=$&#123;L.id&#125;&amp;title=$&#123;L.title&#125;`&quot;</span>&gt;</span>&#123;&#123;L.title&#125;&#125;<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span>&amp;nbsp;&amp;nbsp; --&gt;</span><br><span class="line">&lt;!-- 使用query参数传参，to对象写法 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">path:&#x27;/home/message/detail&#x27;,</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">    query:&#123;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">        id: L.id,</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">        title: L.title</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">    &#125;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">&#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&#123;&#123;L.title&#125;&#125;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>接收参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$route.<span class="property">query</span>.<span class="property">id</span></span><br><span class="line">$route.<span class="property">query</span>.<span class="property">title</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="命名路由"><a href="#命名路由" class="headerlink" title="命名路由"></a>命名路由</h3><ol>
<li><p>作用:可以简化路由的跳转。</p>
</li>
<li><p>如何使用：</p>
<ol>
<li><p>给路由命名：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;message&#x27;</span>, <span class="comment">//子路由</span></span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Message</span>,</span><br><span class="line">    <span class="attr">children</span>: [&#123;</span><br><span class="line">         <span class="attr">name</span>: <span class="string">&#x27;xiangqiang&#x27;</span>,</span><br><span class="line">         <span class="attr">path</span>: <span class="string">&#x27;detail&#x27;</span>,</span><br><span class="line">         <span class="attr">component</span>: <span class="title class_">Detail</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>简化跳转：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--简化前--&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;`/home/message/detail?id=$&#123;L.id&#125;&amp;title=$&#123;L.title&#125;`&quot;</span>&gt;</span>&#123;&#123;L.title&#125;&#125;<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br><span class="line">&lt;!--简化后--&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">//path:&#x27;/home/message/detail&#x27;,</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">//不用path，用设置的name</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">name:&#x27;xiangqing&#x27;,</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">    query:&#123;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">        id: L.id,</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">        title: L.title</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">    &#125;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">&#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">跳转</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>
<h3 id="路由的params参数"><a href="#路由的params参数" class="headerlink" title="路由的params参数"></a>路由的params参数</h3><ol>
<li><p>配置路由，声明params参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;message&#x27;</span>, <span class="comment">//子路由</span></span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Message</span>,</span><br><span class="line">    <span class="attr">children</span>: [&#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">          <span class="comment">// params参数，：表示占位符 </span></span><br><span class="line">          <span class="attr">path</span>: <span class="string">&#x27;detail/:id/:title&#x27;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">Detail</span></span><br><span class="line">     &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>传递参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 使用params参数传参，字符串写法 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;`/home/message/detail/$&#123;L.id&#125;/$&#123;L.title&#125;`&quot;</span>&gt;</span>&#123;&#123;L.title&#125;&#125;<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span>&amp;nbsp;&amp;nbsp;</span><br><span class="line">&lt;!-- 使用params参数传参，to对象写法 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">:to</span>=<span class="string">&quot;&#123;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">//path:&#x27;/home/message/detail&#x27;,</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">//使用params的时候不可以用path，只能用name</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">name:&#x27;xiangqing&#x27;,</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">    params:&#123;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">        id: L.id,</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">        title: L.title</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">    &#125;</span></span></span></span><br><span class="line"><span class="string"><span class="tag"><span class="language-xml">&#125;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">&#123;&#123;L.title&#125;&#125;</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>特别注意：<strong>路由携带params参数时，若使用to的对象写法，则不能使用path配置项，需要使用name写法</strong>！</p>
</li>
<li><p>接收参数：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$route.<span class="property">params</span>.<span class="property">id</span></span><br><span class="line">$route.<span class="property">params</span>.<span class="property">title</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="路由的props配置"><a href="#路由的props配置" class="headerlink" title="路由的props配置"></a>路由的props配置</h3><p>作用：让路由组件更方便的接收到参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;message&#x27;</span>, <span class="comment">//子路由</span></span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Message</span>,</span><br><span class="line">    <span class="attr">children</span>: [&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">        <span class="comment">// params参数，：表示占位符 </span></span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;detail/:id/:title&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="title class_">Detail</span>,</span><br><span class="line">        <span class="comment">//props的第一种写法，值为对象,该对象的所有的key-value都会以props形式传给Detail组件</span></span><br><span class="line">        <span class="comment">// props: &#123;</span></span><br><span class="line">        <span class="comment">//     a: 1,</span></span><br><span class="line">        <span class="comment">//     b: &#x27;hello&#x27;</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//props的第二种写法，值为布尔值，若为真，就会把该路由组件收到的所有的params参数，以</span></span><br><span class="line">        <span class="comment">//props的形式传给Detail组件 （query不行）</span></span><br><span class="line">        <span class="comment">// props: true</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//props第三种写法，值为一个回调函数,就会把该路由组件收到的所有的参数传递回去，可query也可params</span></span><br><span class="line">        <span class="title function_">props</span>(<span class="params">$route</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="attr">id</span>: $route.<span class="property">params</span>.<span class="property">id</span>,</span><br><span class="line">                <span class="attr">title</span>: $route.<span class="property">params</span>.<span class="property">title</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>接收端只需要添加相应的props参数即可</strong>：<code>props:[&#39;id&#39;,&#39;title&#39;]</code></p>
<h3 id="lt-router-link-gt-的replace属性"><a href="#lt-router-link-gt-的replace属性" class="headerlink" title="&lt;router-link&gt;的replace属性"></a><code>&lt;router-link&gt;</code>的replace属性</h3><ol>
<li>作用：控制路由跳转时操作浏览器历史记录的模式</li>
<li>浏览器的历史纪录有两种写入方式：分别为<code>push</code>和<code>replace</code>，push是追加历史记录 replace是替换当前历史记录，默认为push</li>
<li>如何开启replace模式：<code>&lt;route-link replace .......&gt;</code> 即可</li>
</ol>
<h3 id="编程式路由导航"><a href="#编程式路由导航" class="headerlink" title="编程式路由导航"></a>编程式路由导航</h3><ol>
<li><p>作用：不借助<code>&lt;router-link&gt;</code>实现路由跳转，让路由跳转更加灵活</p>
</li>
<li><p>具体编码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//$router的两个API</span></span><br><span class="line"><span class="title function_">pushShow</span>(<span class="params">L</span>)&#123;</span><br><span class="line">  <span class="comment">// console.log(this.$router);</span></span><br><span class="line">  <span class="comment">//手动push</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">push</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>:&#123;</span><br><span class="line">      <span class="attr">id</span>:L.<span class="property">id</span>,</span><br><span class="line">      <span class="attr">title</span>:L.<span class="property">title</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">replaceShow</span>(<span class="params">L</span>)&#123;</span><br><span class="line">  <span class="comment">//手动replace</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">replace</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;xiangqing&#x27;</span>,</span><br><span class="line">    <span class="attr">params</span>:&#123;</span><br><span class="line">      <span class="attr">id</span>:L.<span class="property">id</span>,</span><br><span class="line">      <span class="attr">title</span>:L.<span class="property">title</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>前进和后退：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//后退</span></span><br><span class="line"><span class="title function_">back</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">back</span>();</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//前进</span></span><br><span class="line"><span class="title function_">forward</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">forward</span>();</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">//可前可后</span></span><br><span class="line"><span class="title function_">testgo</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$router</span>.<span class="title function_">go</span>(-<span class="number">2</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="缓存路由组件"><a href="#缓存路由组件" class="headerlink" title="缓存路由组件"></a>缓存路由组件</h3><ol>
<li><p>作用：让不展示的路由组件保持挂载，不被销毁。</p>
</li>
<li><p>具体编码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 保持组件不被销毁，include里接要保存的路由组件，默认是全部保存 --&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">keep-alive</span> <span class="attr">include</span>=<span class="string">&quot;News&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<p>如果想缓存多个组件，可以写成数组形式</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;keep-alive :include=<span class="string">&quot;[&#x27;News&#x27;,&#x27;Message&#x27;]&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span></span><br><span class="line">&lt;/keep-alive&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="两个新的生命周期钩子"><a href="#两个新的生命周期钩子" class="headerlink" title="两个新的生命周期钩子"></a>两个新的生命周期钩子</h3><p>作用：路由组件独有的两个钩子，用于捕获路由组件的激活状态。</p>
<p>具体名字：</p>
<ol>
<li><code>actived</code>路由组件被激活时触发。</li>
<li><code>deactivate</code>路由组件失活时触发。</li>
</ol>
<h4 id="active"><a href="#active" class="headerlink" title="active"></a>active</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//激活</span></span><br><span class="line"><span class="title function_">activated</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我被激活了&#x27;</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">timer</span> = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">opacity</span> -= <span class="number">0.01</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;@&#x27;</span>);</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">opacity</span> &lt;= <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">opacity</span> = <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">16</span>);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h4 id="deactivate"><a href="#deactivate" class="headerlink" title="deactivate"></a>deactivate</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//失活</span></span><br><span class="line"><span class="title function_">deactivated</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;我失活了&#x27;</span>);</span><br><span class="line">    <span class="built_in">clearInterval</span>(<span class="variable language_">this</span>.<span class="property">timer</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="路由守卫"><a href="#路由守卫" class="headerlink" title="路由守卫"></a>路由守卫</h3><ol>
<li><p>作用:对路由进行权限控制</p>
</li>
<li><p>分类：全局守卫、独享守卫、组件内守卫</p>
</li>
<li><p>全局守卫：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//全局前置路由守卫</span></span><br><span class="line"><span class="comment">//在每一次路由切换之前都会调用这个函数，初始化的时候也会调用这个函数</span></span><br><span class="line">router.<span class="title function_">beforeEach</span>(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(to, <span class="keyword">from</span>, next);</span><br><span class="line">    <span class="comment">//使用元信息来匹配需要授权的路由</span></span><br><span class="line">    <span class="keyword">if</span> (to.<span class="property">meta</span>.<span class="property">isAuth</span>) &#123;</span><br><span class="line">        <span class="comment">// if (to.name === &#x27;xinwen&#x27; || to.name === &#x27;xiaoxi&#x27;) &#123;</span></span><br><span class="line">        <span class="comment">// if (to.path === &#x27;/home/news&#x27; || to.path === &#x27;/home/message&#x27;) &#123;</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;name&#x27;</span>) !== <span class="string">&#x27;MiniKano&#x27;</span>) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&#x27;全局前置路由守卫不允许你进入该路径&#x27;</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">next</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//放行</span></span><br><span class="line">        <span class="title function_">next</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//后置全局路由守卫 初始化的时候被调用、每次路由切换之后被调用</span></span><br><span class="line">router.<span class="title function_">afterEach</span>(</span><br><span class="line">    <span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;后置路由守卫&#x27;</span>, to, <span class="keyword">from</span>);</span><br><span class="line">        <span class="comment">//借助后置路由守卫，切换完成后执行，就不会出现标题bug</span></span><br><span class="line">        <span class="variable language_">document</span>.<span class="property">title</span> = to.<span class="property">meta</span>.<span class="property">title</span> || <span class="string">&#x27;Vue&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>
</li>
<li><p>独享路由守卫（只有前置没有后置）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">///独享前置路由守卫(没有后置)</span></span><br><span class="line"><span class="attr">beforeEnter</span>: <span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (to.<span class="property">meta</span>.<span class="property">isAuth</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;name&#x27;</span>) !== <span class="string">&#x27;MiniKano&#x27;</span>) &#123;</span><br><span class="line">            <span class="title function_">alert</span>(<span class="string">&#x27;独享前置路由守卫不允许你进入该路径&#x27;</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="title function_">next</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//放行</span></span><br><span class="line">        <span class="title function_">next</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>组件内守卫（千万不要理解为前置或者后置守卫，没有这种说法）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//组件路由守卫</span></span><br><span class="line"><span class="comment">//通过路由规则，进入该组件时被调用</span></span><br><span class="line">beforeRouteEnter (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line"> <span class="comment">//...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//通过路由规则，离开该组件时被调用</span></span><br><span class="line">beforeRouteLeave (to, <span class="keyword">from</span>, next) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="路由器的两种工作模式"><a href="#路由器的两种工作模式" class="headerlink" title="路由器的两种工作模式"></a>路由器的两种工作模式</h3><ol>
<li>对于一个url来说，什么是hash值？ —- #及其后面的内容就是hash值</li>
<li>hash值不会包含在HTTP请求中，即：hash值不会带给服务器</li>
<li>hash模式：<ol>
<li>地址中永远带着# 号，不美观</li>
<li>若以后将地址通过第三方手机app分享，若app校验严格，则地址会被标记为不合法</li>
<li>兼容性较好</li>
</ol>
</li>
<li>history模式：<ol>
<li>地址干净美观</li>
<li>兼容性和hash模式相比略差</li>
<li>应用部署上线时需要后端人员支持，解决刷新页面服务端404的问题</li>
</ol>
</li>
</ol>
<p><strong>切换方法：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建路由器,并共享出去</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> <span class="title class_">VueRouter</span>(&#123;</span><br><span class="line">    <span class="comment">//选择路由工作模式(不写默认是hash)</span></span><br><span class="line">    <span class="attr">mode</span>: <span class="string">&#x27;history&#x27;</span>,</span><br><span class="line">    <span class="comment">// mode: &#x27;hash&#x27;</span></span><br><span class="line">    <span class="comment">//两者的区别，hash模式兼容性好一点，但是会多一个#</span></span><br><span class="line">    <span class="comment">//history不会有多余的字符，但是兼容性稍差</span></span><br><span class="line">.....</span><br></pre></td></tr></table></figure>

<h2 id="ElementUI"><a href="#ElementUI" class="headerlink" title="ElementUI"></a>ElementUI</h2><h3 id="引入-Element"><a href="#引入-Element" class="headerlink" title="引入 Element"></a>引入 Element</h3><p>你可以引入整个 Element，或是根据需要仅引入部分组件。我们先介绍如何引入完整的 Element。</p>
<h4 id="完整引入"><a href="#完整引入" class="headerlink" title="完整引入"></a>完整引入</h4><p>在 main.js 中写入以下内容：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ElementUI</span> <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;element-ui/lib/theme-chalk/index.css&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">ElementUI</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>以上代码便完成了 Element 的引入。需要注意的是，样式文件需要单独引入。</p>
<h4 id="按需引入"><a href="#按需引入" class="headerlink" title="按需引入"></a>按需引入</h4><p>借助 <a target="_blank" rel="noopener" href="https://github.com/QingWei-Li/babel-plugin-component">babel-plugin-component</a>，我们可以只引入需要的组件，以达到减小项目体积的目的。</p>
<p>首先，安装 babel-plugin-component：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install babel-plugin-component -D</span><br></pre></td></tr></table></figure>

<p>然后，将 .babelrc 修改为：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;presets&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">[</span><span class="string">&quot;es2015&quot;</span><span class="punctuation">,</span> <span class="punctuation">&#123;</span> <span class="attr">&quot;modules&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span> <span class="punctuation">&#125;</span><span class="punctuation">]</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;plugins&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">[</span></span><br><span class="line">      <span class="string">&quot;component&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;libraryName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;element-ui&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;styleLibraryName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;theme-chalk&quot;</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>接下来，如果你只希望引入部分组件，比如 Button 和 Select，那么需要在 main.js 中写入以下内容：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">Vue</span> <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Button</span>, <span class="title class_">Select</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="title class_">Button</span>.<span class="property">name</span>, <span class="title class_">Button</span>);</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="title class_">Select</span>.<span class="property">name</span>, <span class="title class_">Select</span>);</span><br><span class="line"><span class="comment">/* 或写为</span></span><br><span class="line"><span class="comment"> * Vue.use(Button)</span></span><br><span class="line"><span class="comment"> * Vue.use(Select)</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Vue</span>(&#123;</span><br><span class="line">  <span class="attr">el</span>: <span class="string">&#x27;#app&#x27;</span>,</span><br><span class="line">  <span class="attr">render</span>: <span class="function"><span class="params">h</span> =&gt;</span> <span class="title function_">h</span>(<span class="title class_">App</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="Vue3"><a href="#Vue3" class="headerlink" title="Vue3"></a>Vue3</h2><h3 id="使用vite创建工程"><a href="#使用vite创建工程" class="headerlink" title="使用vite创建工程"></a>使用vite创建工程</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 创建工程</span></span><br><span class="line">npm init vite-app &lt;project-name&gt;</span><br><span class="line"><span class="comment">## 进入工程目录</span></span><br><span class="line"><span class="built_in">cd</span> &lt;project-name&gt;</span><br><span class="line"><span class="comment">## 安装依赖</span></span><br><span class="line">npm install</span><br><span class="line"><span class="comment">## 运行</span></span><br><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<h3 id="常用-Composition-API"><a href="#常用-Composition-API" class="headerlink" title="常用 Composition API"></a>常用 Composition API</h3><h4 id="1-setup函数"><a href="#1-setup函数" class="headerlink" title="1.setup函数"></a>1.setup函数</h4><ol>
<li>理解：Vue3中的一个新配置项，值为一个函数</li>
<li>setup是所有Composition API（组合API）’<em>表演的舞台</em>‘</li>
<li>组件中所用到的：数据、方法等、均要配置再setup中</li>
<li>setup函数的两种返回值：<ol>
<li>若返回一个对象，则对象中的属性，方法，再模板中均可以直接使用（需要注意）</li>
<li>若返回一个渲染函数：则可以自定义渲染内容。</li>
</ol>
</li>
<li>注意点：<ol>
<li>尽量不要与Vue2.x配置混用<ul>
<li>但setup中不能访问到Vue2.x中的配置（data、methods、computed…）</li>
<li>如有重名，<strong>setup优先</strong></li>
</ul>
</li>
<li>setup不是一个async函数，因为返回值不再是return的对象，而是promise，模板看不到return对象中的</li>
</ol>
</li>
</ol>
<p>属性(但后面讲到了Suspense异步组件的时候会就可以返回Promise或者async形式的setup)</p>
<h4 id="2-ref函数"><a href="#2-ref函数" class="headerlink" title="2.ref函数"></a>2.ref函数</h4><ul>
<li>作用：定义一个响应式的数据</li>
<li>语法: <code>const xxx = ref(initValue)</code><ul>
<li>创建一个包含响应式数据的引用对象（reference对象）</li>
<li>JS中操作数据：<code>xxx.value</code></li>
<li>模板中读取数据:不需要.value,直接<code>&#123;&#123;xxx&#125;&#125;</code>即可</li>
</ul>
</li>
<li>备注：<ul>
<li>接受的数据可以是：基本类型、也可以是对象类型</li>
<li>基本类型的数据：响应式依然是靠<code>Object.defineProperty()</code>的<code>get</code>与<code>set</code>完成的</li>
<li>对象类型的数据：内部<strong>”<em>求助</em>“</strong>了Vue3中的一个新函数— <code>reactive</code>函数</li>
</ul>
</li>
</ul>
<h4 id="3-reactive函数"><a href="#3-reactive函数" class="headerlink" title="3.reactive函数"></a>3.reactive函数</h4><ul>
<li>作用：定义一个对象类型的响应式数据（基本类型别用他，用ref函数）</li>
<li>语法：<code>const 代理对象 = reactive(被代理对象)</code>接收一个对象（或数组），返回一个代理器对象（Proxy的实例对象）</li>
<li>reactive定义的响应式数据是’深层次的‘</li>
<li>内部基于ES6中的Proxy实现，通过代理对象操作源对象内部数据都是响应式的</li>
</ul>
<h4 id="4-Vue3-0中的响应式原理"><a href="#4-Vue3-0中的响应式原理" class="headerlink" title="4.Vue3.0中的响应式原理"></a>4.Vue3.0中的响应式原理</h4><h5 id="vue2-x的响应式"><a href="#vue2-x的响应式" class="headerlink" title="vue2.x的响应式"></a>vue2.x的响应式</h5><ul>
<li><p>实现原理：</p>
<ul>
<li><p>对象类型：通过<code>Object.defineProperty()</code>对属性的读取，修改和拦截（数据劫持）</p>
</li>
<li><p>数组类型：通过重写更新数组的一系列方法来实现拦截。（对数组的变更方法进行了包装）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(data,<span class="string">&#x27;count&#x27;</span>,&#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>)&#123;&#125;,</span><br><span class="line">    <span class="title function_">set</span>(<span class="params"></span>)&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>存在的问题：</p>
<ul>
<li>新增属性、删除属性，界面不会更新（没有响应式）</li>
<li>直接通过下标修改数组，界面不会自动更新</li>
</ul>
</li>
</ul>
<h5 id="Vue3-0的响应式"><a href="#Vue3-0的响应式" class="headerlink" title="Vue3.0的响应式"></a>Vue3.0的响应式</h5><ul>
<li>实现原理：<ul>
<li>通过Proxy（代理）: 拦截对象中任意属性的变化，包括属性值的读写、属性的添加与删除等</li>
<li>通过Reflect（反射）：对被代理对象中的属性进行操作。</li>
<li>MDN文档中有描述Proxy和Reflect的信息，可以去看看</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//模拟Vue3中实现响应式</span></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Proxy</span>(person, &#123;</span><br><span class="line">    <span class="comment">//target是p propname是操作的p中的属性名字</span></span><br><span class="line">    <span class="comment">//捕获读取的动作</span></span><br><span class="line">    <span class="title function_">get</span>(<span class="params">target, propName</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`有人读取了p身上的<span class="subst">$&#123;propName&#125;</span>属性`</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, propName)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//捕获修改、添加的动作</span></span><br><span class="line">    <span class="title function_">set</span>(<span class="params">target, propName, value</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`有人修改了p身上的<span class="subst">$&#123;propName&#125;</span>属性`</span>)</span><br><span class="line">        <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, propName, value)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//捕获删除的动作</span></span><br><span class="line">    <span class="title function_">deleteProperty</span>(<span class="params">target, propName</span>) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`有人删除了p身上的<span class="subst">$&#123;propName&#125;</span>属性`</span>);</span><br><span class="line">        <span class="comment">//删除一个对象，返回删除的状态</span></span><br><span class="line">        <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target, propName)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="reactive对比ref"><a href="#reactive对比ref" class="headerlink" title="reactive对比ref"></a>reactive对比ref</h5><ul>
<li>从定义数据角度对比<ul>
<li>ref用来定义：<strong>基本类型数据</strong></li>
<li>reactive用来定义：<strong>对象（或数组）类型的数据</strong></li>
<li>备注：ref也可以用来定义<strong>对象（或数组）类型的数据</strong>，它内部会自动通过<code>reactive</code>转换为<strong>代理对象</strong></li>
</ul>
</li>
<li>从原理角度对比：<ul>
<li>ref通过<code>Object.defineProperty()</code>的<code>get</code>与<code>set</code>来实现响应式（数据劫持）</li>
<li>reactive通过使用 <strong>proxy</strong> 来实现响应式（数据劫持），并通过Reflect操作源对象内部的数据</li>
</ul>
</li>
<li>从使用角度来对比：<ul>
<li>ref定义的数据：操作数据需要.value 读取数据时模板中直接读取，不需要<code>·value</code></li>
<li>reactive定义的数据：操作数据与读取数据：均不要<code>.value</code></li>
</ul>
</li>
</ul>
<h5 id="setup的两个注意点"><a href="#setup的两个注意点" class="headerlink" title="setup的两个注意点"></a>setup的两个注意点</h5><ul>
<li>setup执行的时机<ul>
<li>在beforeCreate之前执行一次，this是undefined</li>
</ul>
</li>
<li>setup的参数<ul>
<li>props：值为对象，包含：组件外部传递过来，且组件内声明接收了的属性</li>
<li>context：上下文对象<ul>
<li>attrs：值为对象，包含：组件外部传递过来，但没有在props配置中声明的属性，相当于<code>this.$attrs</code></li>
<li>slots：收到的插槽内容，相当于<code>this.$slots</code></li>
<li>emit：分发自定义事件的函数，相当于<code>this.$emit</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="计算属性与监视"><a href="#计算属性与监视" class="headerlink" title="计算属性与监视"></a>计算属性与监视</h5><ol>
<li>computed函数</li>
</ol>
<ul>
<li><p>与vue2.x中的computed配置功能一致</p>
</li>
<li><p>写法</p>
   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;computed&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="comment">//Vue3中的计算属性-简写形式，没有考虑计算属性被修改的情况</span></span><br><span class="line"><span class="comment">// person.fullName = computed(()=&gt;&#123;</span></span><br><span class="line"><span class="comment">//   return person.firstName + person.lastName</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line"><span class="comment">//完整写法</span></span><br><span class="line">person.<span class="property">fullName</span> = <span class="title function_">computed</span>(&#123;</span><br><span class="line">    <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> person.<span class="property">firstName</span> + <span class="string">&#x27;-&#x27;</span> + person.<span class="property">lastName</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">set</span>(<span class="params">value</span>)&#123;</span><br><span class="line">        <span class="keyword">const</span> nameArr = value.<span class="title function_">split</span>(<span class="string">&#x27;-&#x27;</span>);</span><br><span class="line">        person.<span class="property">firstName</span> = nameArr[<span class="number">0</span>];</span><br><span class="line">        person.<span class="property">lastName</span> = nameArr[<span class="number">1</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
<ol start="2">
<li><p>watch函数</p>
<ul>
<li><p>与vue2.x中的watch配置功能一致</p>
</li>
<li><p>两个小坑</p>
<ul>
<li>监视reactive定义的响应式数据时：oldValue无法正确获取、强制开启了深度监视（deep配置失效）。</li>
<li>监视reactive定义的响应式数据中某个属性时：deep配置有效</li>
</ul>
</li>
<li><p>&#96;&#96;&#96;javascript<br>&#x2F;&#x2F;情况一：监视ref所定义的响应式数据<br>watch(sum,(newValue,oldValue)&#x3D;&gt;{<br>console.log(‘sum变化’,newValue,oldValue);<br>},{immediate:true})</p>
<p>&#x2F;&#x2F;情况二：监视ref定义的多个响应式数据(使用数组)<br>&#x2F;&#x2F;如果是reactive的对象设置的属性，默认会强制开启深度监视（deep配置无效），无需设置，也不能关掉深度监视<br>watch([sum,msg],(newValue,oldValue)&#x3D;&gt;{<br>console.log(‘sum变化’,newValue,oldValue);<br>},{immediate:true})</p>
<p>&#x2F;&#x2F;情况三：监视reactive所定义的一个响应式数据，注意，此处无法正确获取oldValue<br>watch(person,(newValue,oldValue)&#x3D;&gt;{<br>console.log(‘person变化了’);<br>console.log(newValue,oldValue);&#x2F;&#x2F;你会发现这两个的值是一样的<br>})</p>
<p>&#x2F;&#x2F;情况四：监视reactive所定义的一个响应式数据中的某一个属性<br>watch(()&#x3D;&gt;person.job.j1.salary,(newValue,oldValue)&#x3D;&gt;{<br>console.log(‘salary变化了’);<br>console.log(newValue,oldValue);&#x2F;&#x2F;你会发现这两个的值是一样的<br>})</p>
<p>&#x2F;&#x2F;情况五：监视reactive所定义的一个响应式数据中的某些属性<br>watch([()&#x3D;&gt;person.job.j1.salary,()&#x3D;&gt;person.name],(newValue,oldValue)&#x3D;&gt;{<br>console.log(‘salary或者name变化了’);<br>console.log(newValue,oldValue);&#x2F;&#x2F;你会发现这两个的值是一样的<br>})</p>
<p>&#x2F;&#x2F;特殊情况，由于job没有地址上的变化，只是他里面属性发生了变化，所以监视不奏效<br>watch(()&#x3D;&gt;person.job,(newValue,oldValue)&#x3D;&gt;{<br>console.log(‘salary变化了’);<br>console.log(newValue,oldValue);<br>},{deep:true})&#x2F;&#x2F;此处由于监视的是reactive定义的对象的某个属性，deep有效</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*说白了，监视的如果是个对象里面包裹着对象，那你直接用reactive就可以直接监视到数据，如果你用的是ref，那么就加上deep或者是在监视对象后面加上value 即可正常监测数据变化*</span><br><span class="line"></span><br><span class="line">##### watchEffect函数</span><br><span class="line"></span><br><span class="line">+ watch的套路是：既要指明监视的属性，又要指明监视的回调</span><br><span class="line">+ watchEffect的套路是：不用指明监视哪个属性，监视的回调中用到哪个属性，那就监视哪个属性</span><br><span class="line">  也就是，只会监视函数内所依赖的属性，并且默认immediate为true</span><br><span class="line">+ watchEffect比较像compured：</span><br><span class="line">  + 但computed注重的是计算出来的值（回调函数的返回值），所以必须要写返回值</span><br><span class="line">  + 而watchEffect更注重的是过程（回调函数的函数体），所以不用写返回值也行</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">//监视函数里面使用到的数据</span><br><span class="line">watchEffect(()=&gt;&#123;</span><br><span class="line">    //监视sum name salary</span><br><span class="line">    const x1 = sum.value</span><br><span class="line">    const x2 = person.name</span><br><span class="line">    const x3 = person.job.j1.salary</span><br><span class="line">    console.log(&#x27;watchEffect所指定的回调执行了&#x27;);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
<h4 id="5-Vue3中的生命周期"><a href="#5-Vue3中的生命周期" class="headerlink" title="5.Vue3中的生命周期"></a>5.Vue3中的生命周期</h4><img src="https://pan.kanokano.cn/d/阿里云の盘/Typora图床/lifecycle.16e4c08e.png" alt="Component lifecycle diagram" style="zoom:50%;" />

<h4 id="6-通过组合式API调用生命周期钩子"><a href="#6-通过组合式API调用生命周期钩子" class="headerlink" title="6.通过组合式API调用生命周期钩子"></a>6.通过组合式API调用生命周期钩子</h4><ol>
<li>在Vue3中，setup会比beforeCreate和created的优先级要高 ，所以使用组合式API的时候，setup已经替代掉这两个生命周期钩子</li>
</ol>
<p><strong>代码演示</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//数据</span></span><br><span class="line">    <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//通过组合式API（setup内）的形式使用生命周期钩子</span></span><br><span class="line">    <span class="comment">//组合式API中的生命周期钩子比配置项钩子先执行</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;----setup----&#x27;</span>);</span><br><span class="line">    <span class="title function_">onBeforeMount</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;----onBeforeMount----&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;----onMounted----&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">onBeforeUpdate</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;----onBeforeUpdate----&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">onUpdated</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;----onUpdated----&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">onBeforeUnmount</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;----onBeforeUnmount----&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">onUnmounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;----onUnmounted----&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//返回一个对象</span></span><br><span class="line">    <span class="keyword">return</span> &#123;sum&#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><strong>还有一个注意点是</strong>：<strong>组合式API中的生命周期钩子比配置项钩子先执行</strong></p>
<h4 id="7-自定义hook函数"><a href="#7-自定义hook函数" class="headerlink" title="7.自定义hook函数"></a>7.自定义hook函数</h4><ul>
<li>什么是hook？ ——本值是一个函数，把setup函数中使用的CompositionAPI进行封装</li>
<li>类似vue2.x中的mixin</li>
<li>自定义hook的优势：复用代码，让setup中的逻辑更清楚易懂</li>
</ul>
<h4 id="8-toRef"><a href="#8-toRef" class="headerlink" title="8.toRef"></a>8.toRef</h4><ul>
<li>作用：创建一个ref对象，其value值指向另一个对象中的某个属性值</li>
<li>语法：<code>const name = toRef(person,&#39;name&#39;)</code></li>
<li>应用：要将响应式对象中的某个属性单独提供给外部使用时</li>
<li>扩展：<code>toRefs</code> 与 <code>toRef</code> 功能一致，但可以批量创建多个ref对象，语法：<code>toRefs(person)</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive,toRef,toRefs&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="comment">//数据</span></span><br><span class="line">    <span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">        <span class="attr">job</span>:&#123;</span><br><span class="line">            <span class="attr">j1</span>:&#123;</span><br><span class="line">                <span class="attr">salary</span>:<span class="number">20</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//返回一个对象</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">//这样做是无效的，会失去响应式，这是值传递而不是引用传递</span></span><br><span class="line">        <span class="comment">// name : person.name</span></span><br><span class="line">        <span class="comment">// name:toRef(person,&#x27;name&#x27;),</span></span><br><span class="line">        <span class="comment">// age:toRef(person,&#x27;age&#x27;),</span></span><br><span class="line">        <span class="comment">// salary:toRef(person.job.j1,&#x27;salary&#x27;)</span></span><br><span class="line">        <span class="comment">//person.job本身就是引用类型，所以不需要toRef</span></span><br><span class="line">        <span class="comment">// job:person.job</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//torefs可以给里面每一个属性变成refimpl</span></span><br><span class="line">        ...<span class="title function_">toRefs</span>(person),</span><br><span class="line">        ...<span class="title function_">toRefs</span>(person.<span class="property">job</span>.<span class="property">j1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="其他Composition-API"><a href="#其他Composition-API" class="headerlink" title="其他Composition API"></a>其他Composition API</h3><blockquote>
<p>1.shallowReactive 与 shallowRef</p>
</blockquote>
<ul>
<li>shallowReactive：只处理对象最外层属性的响应式（浅响应式）</li>
<li>shallowRef：只处理基本数据类型的响应式，不进行对象的响应式处理</li>
<li>什么时候使用？<ul>
<li>如果有一个对象数据，结构比较深，但变化时只是外层属性变化&#x3D;&#x3D;&gt;shallowReactive</li>
<li>如果有一个对象数据，后续功能不会修改该对象中的属性，而是生成新的对象来替换&#x3D;&#x3D;&gt;shallowRef</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引用</span></span><br><span class="line"><span class="keyword">import</span> &#123;ref,reactive,toRefs,shallowReactive,shallowRef&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="comment">//数据</span></span><br><span class="line"><span class="comment">//浅层reactive，只处理第一层的对象的响应式</span></span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">shallowReactive</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">18</span>,</span><br><span class="line">    <span class="attr">job</span>:&#123;</span><br><span class="line">        <span class="attr">j1</span>:&#123;</span><br><span class="line">            <span class="attr">salary</span>:<span class="number">20</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//shallowRef只处理基本数据类型的响应式，不进行对象响应式的计算</span></span><br><span class="line"><span class="keyword">let</span> x = <span class="title function_">shallowRef</span>(&#123;</span><br><span class="line">    <span class="attr">y</span>:<span class="number">0</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>2.readonly 与 shallowReadonly</p>
</blockquote>
<ul>
<li>readonly:让一个响应式数据变为只读的(深只读)。</li>
<li>shallowReadonly: 让一个响应式数据变为只读的(浅只读)</li>
<li>应用场景:不希望数据被修改时(特别是别人传给你的)。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//person现在是只读的,readonly接收响应式数据</span></span><br><span class="line">person = <span class="title function_">readonly</span>(person)</span><br><span class="line"></span><br><span class="line"><span class="comment">//person的第一层对象的属性是只读的，job内的属性不受影响</span></span><br><span class="line">person = <span class="title function_">shallowReadonly</span>(person)</span><br><span class="line"></span><br><span class="line">x  = <span class="title function_">readonly</span>(x)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>3.toRaw 与 markRaw</p>
</blockquote>
<p><strong>toRaw：</strong></p>
<ul>
<li>作用：将一个由<code>reactive</code>生成的<strong>响应式对象</strong>转为<strong>普通对象</strong></li>
<li>使用场景：用于读取响应式对象对应的普通对象，对这个普通对象的而所有操作，<strong>不会引起页面更新</strong></li>
</ul>
<p><strong>markRaw:</strong></p>
<ul>
<li>作用： 标记一个对象，使其永远不会在成为响应式对象</li>
<li>应用场景：<ul>
<li>有些值不应该被设置为响应式的，例如第三方的复杂类库</li>
<li>当渲染具有不可变的数据源的大列表时，跳过响应式转换可以提高性能</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引用</span></span><br><span class="line"><span class="keyword">import</span> &#123;ref,reactive,toRefs,toRaw,markRaw&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="comment">//toRaw只能用在reactive创建的响应式对象上</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">showRawPerson</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">toRaw</span>(person));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//console.log(toRaw(x));//无效</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">addCar</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> car = &#123;<span class="attr">name</span>:<span class="string">&#x27;马自达&#x27;</span>,<span class="attr">price</span>:<span class="string">&#x27;1&#x27;</span>&#125;</span><br><span class="line">    <span class="comment">//添加的car是响应式的，得益于proxy</span></span><br><span class="line">    <span class="comment">// person.car = car</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//标记为markRaw的数据，即使数据更改了，vue也不会更新数据到页面</span></span><br><span class="line">    person.<span class="property">car</span> = <span class="title function_">markRaw</span>(car)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">replaceCar</span>(<span class="params"></span>)&#123;</span><br><span class="line">    person.<span class="property">car</span>.<span class="property">name</span> = <span class="string">&#x27;nmsl&#x27;</span></span><br><span class="line">    person.<span class="property">car</span>.<span class="property">price</span>++</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(person.<span class="property">car</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>4.customRef</p>
</blockquote>
<ul>
<li><p>作用：创建一个自定义的ref，对其依赖跟踪和更新触发进行显式控制</p>
</li>
<li><p>实现防抖效果</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引用</span></span><br><span class="line"><span class="keyword">import</span> &#123;ref,customRef&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="comment">//自定义ref,实现防抖效果</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myRef</span>(<span class="params">value,delay</span>)&#123;</span><br><span class="line">    <span class="comment">//追踪器track和触发器trigger</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">customRef</span>(<span class="function">(<span class="params">track,trigger</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> timer</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="title function_">get</span>(<span class="params"></span>)&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;getter&#x27;</span>,value);</span><br><span class="line">                <span class="title function_">track</span>()<span class="comment">//通知Vue追踪value的变化(提前和get商量一下，让他认为这个value是有用的)</span></span><br><span class="line">                <span class="keyword">return</span> value</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="title function_">set</span>(<span class="params">val</span>)&#123;</span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;setter&#x27;</span>,val);</span><br><span class="line">                <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">                timer = <span class="built_in">setTimeout</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">                    value = val</span><br><span class="line">                    <span class="title function_">trigger</span>()<span class="comment">//通知vue重新解析模板</span></span><br><span class="line">                &#125;,delay)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// let keyWord = ref(&#x27;hello&#x27;)//使用vue提供的ref</span></span><br><span class="line"><span class="keyword">let</span> keyWord = <span class="title function_">myRef</span>(<span class="string">&#x27;hello&#x27;</span>,<span class="number">1000</span>)<span class="comment">//使用自定义的ref</span></span><br></pre></td></tr></table></figure></li>
</ul>
<blockquote>
<p>5.provide 与 inject</p>
</blockquote>
<ul>
<li><p>作用：实现<strong>祖孙组件间</strong>的通信(中间隔一个父)</p>
</li>
<li><p>套路：父组件有一个<code>provide</code>选项来提供数据，子组件有一个<code>inject</code>选项来开始使用这些数据</p>
</li>
<li><p>具体写法：</p>
<ul>
<li><p>1.祖组件中：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive,toRefs,provide&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> car = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;马自达&#x27;</span>,</span><br><span class="line">        <span class="attr">price</span>:<span class="number">114514</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="title function_">provide</span>(<span class="string">&#x27;car&#x27;</span>,car)<span class="comment">//给自己的后代组件传递数据</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        ...<span class="title function_">toRefs</span>(car)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>2.孙组件中</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;inject&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="title function_">setup</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> car = <span class="title function_">inject</span>(<span class="string">&#x27;car&#x27;</span>)<span class="comment">//类似全局事件总线</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        car</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<blockquote>
<p>6.响应式数据的判断</p>
</blockquote>
<ul>
<li>isRef: 检查一个值是否为一个ref对象</li>
<li>isReactive：检查一个对象是否是由<code>reactive</code>创建的响应式代理</li>
<li>isReadonly：检查一个对象是否是由<code>readonly</code>创建的只读代理</li>
<li>isProxy：检查一个对象是否是由<code>reactive</code>或者<code>readonly</code></li>
</ul>
<h3 id="四、Compostion-API的优势"><a href="#四、Compostion-API的优势" class="headerlink" title="四、Compostion API的优势"></a>四、Compostion API的优势</h3><h4 id="Options-API-Vue2-存在的问题"><a href="#Options-API-Vue2-存在的问题" class="headerlink" title="Options API (Vue2)存在的问题"></a>Options API (Vue2)存在的问题</h4><p>使用传统OptionsAPI中，新增或者修改一个需求，就需要分别在data，methods，computed里修改 。</p>
<table>
<thead>
<tr>
<th><img src="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/f84e4e2c02424d9a99862ade0a2e4114tplv-k3u1fbpfcp-watermark.gif"></th>
<th><img src="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/e5ac7e20d1784887a826f6360768a368tplv-k3u1fbpfcp-watermark-16634993151275.gif"></th>
</tr>
</thead>
</table>
<h4 id="Composition-API-Vue3-的优势"><a href="#Composition-API-Vue3-的优势" class="headerlink" title="Composition API (Vue3)的优势"></a>Composition API (Vue3)的优势</h4><p>我们可以更加优雅的组织我们的代码，函数。让相关功能的代码更加有序的组织在一起。</p>
<table>
<thead>
<tr>
<th><img src="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/bc0be8211fc54b6c941c036791ba4efetplv-k3u1fbpfcp-watermark.gif"></th>
<th><img src="https://pan.kanokano.cn/d/%E9%98%BF%E9%87%8C%E4%BA%91%E3%81%AE%E7%9B%98/Typora%E5%9B%BE%E5%BA%8A/6cc55165c0e34069a75fe36f8712eb80tplv-k3u1fbpfcp-watermark.gif"></th>
</tr>
</thead>
</table>
<h3 id="五、新的组件"><a href="#五、新的组件" class="headerlink" title="五、新的组件"></a>五、新的组件</h3><h4 id="Fragment"><a href="#Fragment" class="headerlink" title="Fragment"></a>Fragment</h4><ul>
<li>在Vue2中: 组件必须有一个根标签</li>
<li>在Vue3中: 组件可以没有根标签, 内部会将多个标签包含在一个Fragment虚拟元素中</li>
<li>好处: 减少标签层级, 减小内存占用</li>
</ul>
<h4 id="Teleport"><a href="#Teleport" class="headerlink" title="Teleport"></a>Teleport</h4><ul>
<li><p>什么是Teleport？ <code>teleport</code> 是一种能够将我们的 <strong>组件html结构</strong> 移动到<strong>指定位置</strong>的技术</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;teleport to=&quot;移动位置&quot;&gt;</span><br><span class="line"> &lt;div v-if=&quot;isShow&quot; class=&quot;mask&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;dialog&quot;&gt;</span><br><span class="line">   &lt;h3&gt;我是一个弹窗&lt;/h3&gt;</span><br><span class="line">   &lt;button @click=&quot;isShow = false&quot;&gt;关闭弹窗&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"> &lt;/div&gt;</span><br><span class="line">&lt;/teleport&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="Suspense"><a href="#Suspense" class="headerlink" title="Suspense"></a>Suspense</h4><ul>
<li><p>等待异步组件时渲染一些额外内容，让应用有更好的用户体验</p>
</li>
<li><p>使用步骤：</p>
<ul>
<li><p>异步引入组件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;defineAsyncComponent&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">()=&gt;</span><span class="title function_">import</span>(<span class="string">&#x27;./components/Child.vue&#x27;</span>))</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用<code>Suspense</code>包裹组件，并配置好<code>default</code> 与 <code>fallback</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"> &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">  &lt;h3&gt;我是App组件&lt;/h3&gt;</span><br><span class="line">  &lt;Suspense&gt;</span><br><span class="line">   &lt;template v-slot:default&gt;</span><br><span class="line">    &lt;Child/&gt;</span><br><span class="line">   &lt;/template&gt;</span><br><span class="line">   &lt;template v-slot:fallback&gt;</span><br><span class="line">    &lt;h3&gt;加载中.....&lt;/h3&gt;</span><br><span class="line">   &lt;/template&gt;</span><br><span class="line">  &lt;/Suspense&gt;</span><br><span class="line"> &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="六、其他"><a href="#六、其他" class="headerlink" title="六、其他"></a>六、其他</h3><h4 id="1-全局API的转移"><a href="#1-全局API的转移" class="headerlink" title="1.全局API的转移"></a>1.全局API的转移</h4><ul>
<li><p>Vue 2.x 有许多全局 API 和配置。</p>
<ul>
<li><p>例如：注册全局组件、注册全局指令等。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//注册全局组件</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">component</span>(<span class="string">&#x27;MyButton&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">data</span>: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="attr">template</span>: <span class="string">&#x27;&lt;button @click=&quot;count++&quot;&gt;Clicked &#123;&#123; count &#125;&#125; times.&lt;/button&gt;&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//注册全局指令</span></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">directive</span>(<span class="string">&#x27;focus&#x27;</span>, &#123;</span><br><span class="line">  <span class="attr">inserted</span>: <span class="function"><span class="params">el</span> =&gt;</span> el.<span class="title function_">focus</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Vue3.0中对这些API做出了调整：</p>
<ul>
<li><p>将全局的API，即：<code>Vue.xxx</code>调整到应用实例（<code>app</code>）上</p>
<table>
<thead>
<tr>
<th>2.x 全局 API（<code>Vue</code>）</th>
<th>3.x 实例 API (<code>app</code>)</th>
</tr>
</thead>
<tbody><tr>
<td>Vue.config.xxxx</td>
<td>app.config.xxxx</td>
</tr>
<tr>
<td>Vue.config.productionTip</td>
<td><strong style="color:#DD5145">移除</strong></td>
</tr>
<tr>
<td>Vue.component</td>
<td>app.component</td>
</tr>
<tr>
<td>Vue.directive</td>
<td>app.directive</td>
</tr>
<tr>
<td>Vue.mixin</td>
<td>app.mixin</td>
</tr>
<tr>
<td>Vue.use</td>
<td>app.use</td>
</tr>
<tr>
<td>Vue.prototype</td>
<td>app.config.globalProperties</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
</ul>
<h4 id="2-其他改变"><a href="#2-其他改变" class="headerlink" title="2.其他改变"></a>2.其他改变</h4><ul>
<li><p>data选项应始终被声明为一个函数。</p>
</li>
<li><p>过度类名的更改：</p>
<ul>
<li><p>Vue2.x写法</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.v-enter</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v-leave</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Vue3.x写法</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.v-enter-from</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.v-leave-from</span>,</span><br><span class="line"><span class="selector-class">.v-enter-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong style="color:#DD5145">移除</strong>keyCode作为 v-on 的修饰符，同时也不再支持<code>config.keyCodes</code></p>
</li>
<li><p><strong style="color:#DD5145">移除</strong><code>v-on.native</code>修饰符</p>
<ul>
<li><p>父组件中绑定事件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-component</span><br><span class="line">  v-on:close=&quot;handleComponentEvent&quot;</span><br><span class="line">  v-on:click=&quot;handleNativeClickEvent&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>子组件中声明自定义事件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    emits: [&#x27;close&#x27;]</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p><strong style="color:#DD5145">移除</strong>过滤器（filter）</p>
<blockquote>
<p>过滤器虽然这看起来很方便，但它需要一个自定义语法，打破大括号内表达式是 “只是 JavaScript” 的假设，这不仅有学习成本，而且有实现成本！建议用方法调用或计算属性去替换过滤器。</p>
</blockquote>
</li>
</ul>
</div>
        </div>
        
            <div class="kratos-copyright text-center clearfix">
                <h5 itemprop="copyrightNotice">本作品采用 <a rel="license nofollow" target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">知识共享署名-相同方式共享 4.0 国际许可协议</a> 进行许可</h5>
            </div>
        
        <footer class="kratos-entry-footer clearfix">
            
                <div class="post-like-donate text-center clearfix" id="post-like-donate">
                
                
                    <a class="share" href="javascript:;"><i class="fa fa-share-alt"></i> 分享</a>
                    <div class="share-wrap" style="display: none;">
    <div class="share-group">
        <a href="javascript:;" class="share-plain qq" onclick="share('qq');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-qq"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain qzone" onclick="share('qzone');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-star"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weixin pop style-plain" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-weixin"></i>
            </div>
            <div class="share-int">
                <div class="qrcode" id="wechat-qr"></div>
                <p>打开微信“扫一扫”，打开网页后点击屏幕右上角分享按钮</p>
            </div>
        </a>
        <a href="javascript:;" class="share-plain weibo" onclick="share('weibo');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-weibo"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain facebook style-plain" onclick="share('facebook');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-facebook"></i>
            </div>
        </a>
        <a href="javascript:;" class="share-plain twitter style-plain" onclick="share('twitter');" rel="nofollow">
            <div class="icon-wrap">
                <i class="fa fa-twitter"></i>
            </div>
        </a>
    </div>
    <script type="text/javascript">
        $(()=>{
            new QRCode("wechat-qr", {
                text: "https://blog.kanokano.cn/2022/10/10/Vue%E8%AE%B0%E5%BD%95/",
                width: 150,
                height: 150,
                correctLevel : QRCode.CorrectLevel.H
            });
        });
        function share(dest) {
            const qqBase        = "https://connect.qq.com/widget/shareqq/index.html?";
            const weiboBase     = "https://service.weibo.com/share/share.php?";
            const qzoneBase     = "https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?";
            const facebookBase  = "https://www.facebook.com/sharer/sharer.php?";
            const twitterBase   = "https://twitter.com/intent/tweet?";
            const hostUrl       = "https://blog.kanokano.cn/2022/10/10/Vue%E8%AE%B0%E5%BD%95/";
            const title         = "「Vue笔记」";
            const excerpt       = `Vue笔记简介
Vue是一个动态构建用户界面的渐进式 Javascript 框架

特点
遵循mvvm模式
编码简洁，体积小，运行效率高，适合移动&#x2F;pc 端开发
它本身只关注UI，也可以引入其他第三方库开发项目

浅尝一下引...`;
            let _URL;
            switch (dest) {
                case "qq"       : _URL = qqBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";     break;
                case "weibo"    : _URL = weiboBase+"url="+hostUrl+"&title="+title+excerpt;                                 break;
                case "qzone"    : _URL = qzoneBase+"url="+hostUrl+"&title="+title+"&desc=&summary="+excerpt+"&site=cxpy";  break;
                case "facebook" : _URL = facebookBase+"u="+hostUrl;                                                        break;
                case "twitter"  : _URL = twitterBase+"text="+title+excerpt+"&url="+hostUrl;                                break;
            }
            window.open(_URL);
        };
    </script>
</div>
                
                </div>
            
            <div class="footer-tag clearfix">
                <div class="pull-left">
                <i class="fa fa-tags"></i>
                    
                </div>
                <div class="pull-date">
                    <time datetime="2022-10-10T13:49:27.950Z" itemprop="dateModified">最后编辑：2022-10-10</time>
                </div>
            </div>
        </footer>
    </div>
    
        <nav class="navigation post-navigation clearfix" role="navigation">
            
            <div class="nav-previous clearfix">
                <a title=" JavaScript ES6 中一些新增的语法" href="/2022/10/10/ES6-11一些新增的语法/">&lt; 上一篇</a>
            </div>
            
            
        </nav>
    
    
</article>

        

            </section>

        

                
            

<section id="kratos-widget-area" class="col-md-4 hidden-xs hidden-sm">
    <!-- 文章和页面根据splitter来分割，没有的话就从头开始设置为sticky -->
    
    
                <aside id="krw-about" class="widget widget-kratos-about clearfix">
    <div class="photo-background"></div>
    <div class="photo-wrapper clearfix">
        <div class="photo-wrapper-tip text-center">
            <img class="about-photo" src="/images/avatar.webp" loading="lazy" decoding="auto" />
        </div>
    </div>
    <div class="textwidget">
        <p class="text-center"></p>
    </div>
    <div class="site-meta">
        <a class="meta-item" href="/archives/">
            <span class="title">
                文章
            </span>
            <span class="count">
                3
            </span>
        </a>
        <a class="meta-item" href="/categories/">
            <span class="title">
                分类
            </span>
            <span class="count">
                0
            </span>
        </a>
        <a class="meta-item" href="/tags/">
            <span class="title">
                标签
            </span>
            <span class="count">
                0
            </span>
        </a>
    </div>
</aside>
            
                    <div class="sticky-area">
                
                

            
                
            
                
  <aside id="krw-posts" class="widget widget-kratos-posts">
  <h4 class="widget-title"><i class="fa fa-file"></i>最新文章</h4>
  <div class="tab-content">
      <ul class="list-group">
        
        
          
          
            <a class="list-group-item" href="/2022/10/10/Vue%E8%AE%B0%E5%BD%95/"><i class="fa  fa-book"></i> Vue笔记</a>
            
          
        
          
          
            <a class="list-group-item" href="/2022/10/10/ES6-11%E4%B8%80%E4%BA%9B%E6%96%B0%E5%A2%9E%E7%9A%84%E8%AF%AD%E6%B3%95/"><i class="fa  fa-book"></i> JavaScript ES6 中一些新增的语法</a>
            
          
        
          
          
            <a class="list-group-item" href="/2022/10/10/hello-world/"><i class="fa  fa-book"></i> Hello World</a>
            
          
        
      </ul>
  </div>
  </aside>

            
    </div>
</section>
        
        </div>
    </div>
</div>
<footer>
    <div id="footer"  class="ap-lrc"  >
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-md-offset-3 footer-list text-center">
                    <ul class="kratos-social-icons">
                        
                        
                        <li><a target="_blank" rel="nofollow" href="https://t.me/CandyUnion"><i class="fa fa-telegram"></i></a></li>
                        
                        
                        
                        <li><a target="_blank" rel="me" href="https://nya.one/@Candinya"><i class="fa fa fa-share-alt-square"></i></a></li>
                        <li><a target="_blank" rel="nofollow" href="https://github.com/Candinya"><i class="fa fa-github"></i></a></li>
                        
                    </ul>
                    <ul class="kratos-copyright">
                        <div>
                            <li>&copy; 2022 minikanoの测试站 版权所有.</li>
                            <li>本站已运行<span id="span_dt">Loading...</span></li>
                        </div>
                        <div>
                            <li>Theme <a href="https://github.com/Candinya/Kratos-Rebirth" target="_blank">Kratos:Rebirth</a></li>
                            <li>Site built with&nbsp;<i class="fa fa-heart throb" style="color:#d43f57"></i>&nbsp;by MiniKano.</li>
                        </div>
                        <div>
                            <li>Powered by <a href="https://hexo.io" target="_blank" rel="nofollow">Hexo</a></li>
                            <li>Hosted on <a href="https://github.io" target="_blank">Github Pages</a></li>
                        </div>
                        <div>
                            
                            
                        </div>
                    </ul>
                </div>
            </div>
        </div>
        <div class="kr-tool text-center">
            <div class="tool">
                
                    <div class="box search-box">
                        <a href="/search/">
                            <span class="fa fa-search"></span>
                        </a>
                    </div>
                
                
                    <div class="box theme-box" id="darkmode-switch">
                        <span class="fa fa-adjust"></span>
                    </div>
                
                
            </div>
            <div class="box gotop-box">
                <span class="fa fa-chevron-up"></span>
            </div>
        </div>
    </div>
</footer>
</div>
</div>

        <script defer src="/vendors/bootstrap@3.3.4/dist/js/bootstrap.min.js"></script>
<script defer src="/vendors/nprogress@0.2.0/nprogress.js"></script>
<script>
    if (!window.kr) {
        window.kr = {};
    }
    window.kr.notMobile = (!(navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)));
    window.kr.siteRoot = "/";
</script>


    <script async src="/js/candy.min.js"></script>



    <script defer src="/vendors/aplayer@1.10.1/dist/APlayer.min.js"></script>
    
    <script defer src="/vendors/meting@2.0.1/dist/Meting.min.js"></script>
    <meting-js
        server="netease"
        type="playlist"
        id="3204190542"
        order="random"
        fixed="true"
    >
    </meting-js>



    <script defer src="/vendors/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

<script defer src="/vendors/clipboard@2.0.6/dist/clipboard.min.js"></script>
<script defer src="/js/kratosr.min.js"></script>
<script defer src="/js/pjax.min.js"></script>



<!-- Extra support for third-party plguins  -->


    </body>
</html>